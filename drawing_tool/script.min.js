!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n={canvasList:document.querySelector(".drawing-tool__canvases"),strokeColor:document.querySelector(".input--stroke-color"),fillColor:document.querySelector(".input--fill-color"),lineWeight:document.querySelector(".select--line-weight"),tools:document.querySelector(".field--tools"),toolsList:document.querySelectorAll(".custom-radio"),toolPencilWrapper:document.querySelector(".custom-radio--pencil"),toolPencil:document.querySelector(".input--pencil"),save:document.querySelector(".btn--save"),clear:document.querySelector(".btn--clear")},o="custom-radio--checked",s=550,a=550,c=void 0,l=[],u=void 0,d=void 0,h=void 0,v=function(){function e(t,i){r(this,e),this.startX=t,this.startY=i,this.endX=this.startX,this.endY=this.startY}return i(e,[{key:"initLayer",value:function(e){this.ctx=e.getContext("2d"),this.ctx.beginPath(),this.ctx.moveTo(this.startX,this.startY),u=1===l.length?this.ctx:u,h=u}},{key:"drawDot",value:function(e){var t=n.lineWeight.selectedIndex;this.ctx||(this.ctx=h,this.ctx.beginPath()),h=this.ctx,this.ctx.lineWidth=n.lineWeight.options[t].value,this.ctx.strokeStyle=e,this.ctx.lineTo(this.endX,this.endY),this.ctx.stroke()}},{key:"drawShapes",value:function(e){var t=n.lineWeight.selectedIndex;if(this.ctx.clearRect(0,0,s,a),this.ctx.beginPath(),this.ctx.lineWidth=n.lineWeight.options[t].value,this.ctx.strokeStyle=n.strokeColor.value,this.ctx.fillStyle=n.fillColor.value,"rect"===e)this.ctx.rect(this.startX,this.startY,this.endX-this.startX,this.endY-this.startY);else{var r=Math.abs(this.endX-this.startX),i=Math.abs(this.endY-this.startY),o=r>i?r:i;this.ctx.arc(this.startX,this.startY,o,0,2*Math.PI)}this.ctx.fill(),this.ctx.stroke()}}]),e}(),f=function(){var e=document.createElement("canvas");e.className="drawing-tool__canvas drawing-tool__canvas--"+l.length,n.canvasList.appendChild(e),e.setAttribute("width",s),e.setAttribute("height",a),l.push(e),c.initLayer(e)},m=function(){l.forEach(function(e,t){u.drawImage(e,0,0),t>0&&n.canvasList.removeChild(e)}),l=l.slice(0,1)},p=t.customizeColorPicker=function(e,t){t.style.backgroundColor=e.value},g=function(e){for(var t=0;t<n.toolsList.length;t++)n.toolsList[t].classList.remove(o);e.parentElement.classList.add(o);var r=x();n.canvasList.style.cursor="rect"===r||"circle"===r?"crosshair":"default"},x=function(){return n.tools.querySelector(".input:checked").value},L=function(){return l.length-1},k=t.getMousePosition=function(e){var t=e.target.getBoundingClientRect();return{x:e.clientX-t.left,y:e.clientY-t.top}},y=function(){n.save.classList.remove("disabled"),n.clear.classList.remove("disabled"),n.save.addEventListener("click",Y),n.clear.addEventListener("click",P)},b=function(){n.save.classList.add("disabled"),n.clear.classList.add("disabled"),n.save.removeEventListener("click",Y),n.clear.removeEventListener("click",P)},E=function(e){var t=k(e);if(c=new v(t.x,t.y),"rect"===d||"circle"===d)f();else{var r=x();("rect"===r||"circle"===r||L()<0)&&f()}var i=L();l[i].addEventListener("mouseup",w),l[i].addEventListener("mouseout",w),l[i].addEventListener("mousemove",C)},C=function(e){var t=k(e);switch(c.endX=t.x,c.endY=t.y,x()){case"pencil":c.drawDot(n.strokeColor.value);break;case"eraser":c.drawDot(n.fillColor.value);break;case"rect":c.drawShapes("rect");break;case"circle":c.drawShapes("circle");break;default:return"Unknown tool"}y(),d=x()},w=function e(){var t=L();l[t].removeEventListener("mouseup",e),l[t].removeEventListener("mouseout",e),l[t].removeEventListener("mousemove",C)},S=function(e){p(e.target,e.target.parentElement)},X=function(e){"radio"===e.target.type&&g(e.target)},Y=function(e){m(),e.target.href=l[0].toDataURL()},P=function(){m(),l[0]&&n.canvasList.removeChild(l[0]),l=[],b()};p(n.strokeColor,n.strokeColor.parentElement),p(n.fillColor,n.fillColor.parentElement),n.toolPencil.checked=!0,g(n.toolPencil),b(),n.strokeColor.addEventListener("change",S),n.fillColor.addEventListener("change",S),n.tools.addEventListener("click",X),n.canvasList.addEventListener("mousedown",E)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2NyaXB0LmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCAxZDY0ZTA2YzVlMDBhZThkYThkZiIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0LmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJFTEVNRU5UUyIsImNhbnZhc0xpc3QiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHJva2VDb2xvciIsImZpbGxDb2xvciIsImxpbmVXZWlnaHQiLCJ0b29scyIsInRvb2xzTGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0b29sUGVuY2lsV3JhcHBlciIsInRvb2xQZW5jaWwiLCJzYXZlIiwiY2xlYXIiLCJDVVJSRU5UX1RPT0xfQ0xBU1MiLCJDQU5WQVNfV0lEVEgiLCJDQU5WQVNfSEVJR0hUIiwicGFpbnQiLCJsYXllcnMiLCJjdHgiLCJwcmV2VG9vbCIsInByZXZDdHgiLCJQYWludCIsIngiLCJ5IiwidGhpcyIsInN0YXJ0WCIsInN0YXJ0WSIsImVuZFgiLCJlbmRZIiwiY2FudmFzIiwiZ2V0Q29udGV4dCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImNvbG9yIiwibGluZVdlaWdodEluZGV4Iiwic2VsZWN0ZWRJbmRleCIsImxpbmVXaWR0aCIsIm9wdGlvbnMiLCJzdHJva2VTdHlsZSIsImxpbmVUbyIsInN0cm9rZSIsInR5cGUiLCJjbGVhclJlY3QiLCJmaWxsU3R5bGUiLCJyZWN0Iiwid2lkdGgiLCJNYXRoIiwiYWJzIiwiaGVpZ2h0IiwicmFkaXVzIiwiYXJjIiwiUEkiLCJmaWxsIiwicmVuZGVyTGF5ZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kQ2hpbGQiLCJzZXRBdHRyaWJ1dGUiLCJwdXNoIiwiaW5pdExheWVyIiwibWVyZ2VDYW52YXNMYXllcnMiLCJmb3JFYWNoIiwiaW5kZXgiLCJkcmF3SW1hZ2UiLCJyZW1vdmVDaGlsZCIsInNsaWNlIiwiY3VzdG9taXplQ29sb3JQaWNrZXIiLCJwaWNrZXIiLCJ3cmFwcGVyIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjaG9vc2VUb29sIiwidG9vbEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJwYXJlbnRFbGVtZW50IiwiYWRkIiwiY3VycmVudFRvb2xzIiwiZ2V0Q3VycmVudFRvb2wiLCJjdXJzb3IiLCJnZXRBY3RpdmVMYXllck51bWJlciIsImdldE1vdXNlUG9zaXRpb24iLCJldmVudCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImNsaWVudFgiLCJsZWZ0IiwiY2xpZW50WSIsInRvcCIsImFjdGl2YXRlQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uQnRuU2F2ZUNsaWNrIiwib25CdG5DbGVhckNsaWNrIiwiZGVhY3RpdmF0ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJvbkNhbnZhc01vdXNlRG93biIsIm1vdXNlUG9zIiwiY3VycmVudFRvb2wiLCJhY3RpdmVMYXllck51bSIsIm9uQ2FudmFzTW91c2VVcCIsIm9uQ2FudmFzTW91c2VNb3ZlIiwiZHJhd0RvdCIsImRyYXdTaGFwZXMiLCJvbkNvbG9yUGlja2VyQ2xpY2siLCJvblRvb2xzQ2xpY2siLCJocmVmIiwidG9EYXRhVVJMIiwiY2hlY2tl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RixhQU0xQmQsRUFBa0IsV0FDdEIvQixJQUNJM0MsRUFBTyxJQUNUbEIsRUFBU0MsV0FBV2dFLFlBQVkvQyxFQUFPLElBRXpDQSxLQUNBMkUsSUFJRjFCLEdBQXFCbkUsRUFBU0ksWUFBYUosRUFBU0ksWUFBWXdFLGVBQ2hFVCxFQUFxQm5FLEVBQVNLLFVBQVdMLEVBQVNLLFVBQVV1RSxlQUM1RDVFLEVBQVNXLFdBQVdnRyxTQUFVLEVBQzlCbkMsRUFBV3hFLEVBQVNXLFlBQ3BCa0YsSUFHQTdGLEVBQVNJLFlBQVlzRixpQkFBaUIsU0FBVWEsR0FDaER2RyxFQUFTSyxVQUFVcUYsaUJBQWlCLFNBQVVhLEdBQzlDdkcsRUFBU08sTUFBTW1GLGlCQUFpQixRQUFTYyxHQUN6Q3hHLEVBQVNDLFdBQVd5RixpQkFBaUIsWUFBYUsiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHQvKipcblx0ICogRE9OLdGN0LvQtdC80LXQvdGC0YssINC6INC60L7RgtC+0YDRi9C8INCy0YvQv9C+0LvQvdGP0LXRgtGB0Y8g0L7QsdGA0LDRidC10L3QuNC1XG5cdCAqIEB0eXBlIHtPYmplY3R9XG5cdCAqIEBjb25zdGFudFxuXHQgKi9cblx0dmFyIEVMRU1FTlRTID0ge1xuXHQgIGNhbnZhc0xpc3Q6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kcmF3aW5nLXRvb2xfX2NhbnZhc2VzJyksXG5cdCAgc3Ryb2tlQ29sb3I6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC0tc3Ryb2tlLWNvbG9yJyksXG5cdCAgZmlsbENvbG9yOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtLWZpbGwtY29sb3InKSxcblx0ICBsaW5lV2VpZ2h0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LS1saW5lLXdlaWdodCcpLFxuXHQgIHRvb2xzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmllbGQtLXRvb2xzJyksXG5cdCAgdG9vbHNMaXN0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3VzdG9tLXJhZGlvJyksXG5cdCAgdG9vbFBlbmNpbFdyYXBwZXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tcmFkaW8tLXBlbmNpbCcpLFxuXHQgIHRvb2xQZW5jaWw6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dC0tcGVuY2lsJyksXG5cdCAgc2F2ZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi0tc2F2ZScpLFxuXHQgIGNsZWFyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuLS1jbGVhcicpXG5cdH07XG5cdFxuXHQvKipcblx0ICog0JrQu9Cw0YHRgSwg0L/RgNC40YHQstCw0LjQstCw0LXQvNGL0Lkg0LLRi9Cx0YDQsNC90L3QvtC80YMg0LrQsNGB0YLQvtC80L3QvtC80YMg0YDQsNC00LjQvtCx0LDRgtGC0L7QvdGDXG5cdCAqIEB0eXBlIHtTdHJpbmd9XG5cdCAqIEBjb25zdGFudFxuXHQgKi9cblx0dmFyIENVUlJFTlRfVE9PTF9DTEFTUyA9ICdjdXN0b20tcmFkaW8tLWNoZWNrZWQnO1xuXHRcblx0LyoqXG5cdCAqINCg0LDQt9C80LXRgNGLIGNhbnZhcyDQv9C+INGI0LjRgNC40L3QtSDQuCDQstGL0YHQvtGC0LUg0YHQvtC+0YLQstC10YLRgdGC0LLQtdC90L3QviAo0LIgcHgpXG5cdCAqIEB0eXBlIHtOdW1iZXJ9XG5cdCAqIEBjb25zdGFudFxuXHQgKi9cblx0dmFyIENBTlZBU19XSURUSCA9IDU1MDtcblx0dmFyIENBTlZBU19IRUlHSFQgPSA1NTA7XG5cdFxuXHQvKipcblx0ICog0K3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCAnUGFpbnQnXG5cdCAqL1xuXHR2YXIgcGFpbnQgPSB2b2lkIDA7XG5cdFxuXHQvKipcblx0ICog0KHQu9C+0LggY2FudmFzLCDQutC+0YLQvtGA0YvQuSDQvdCwINC00LDQvdC90YvQuSDQvNC+0LzQtdC90YIg0L3QsNGF0L7QtNGP0YLRgdGPINCyIERPTS3QtNC10YDQtdCy0LVcblx0ICogQHR5cGUge0FycmF5fVxuXHQgKi9cblx0dmFyIGxheWVycyA9IFtdO1xuXHRcblx0LyoqXG5cdCAqINCe0YHQvdC+0LLQvdC+0Lkg0LrQvtC90YLQtdC60YHRgiBjYW52YXMuINCa0L7QvdGC0LXQutGB0YIgMS3QvtCz0L4g0YHQvtC30LTQsNC90L3QvtCz0L4g0YHQu9C+0Y9cblx0ICovXG5cdHZhciBjdHggPSB2b2lkIDA7XG5cdFxuXHQvKipcblx0ICog0J3QsNC30LLQsNC90LjQtSDQv9GA0LXQtNGL0LTRg9GJ0LXQs9C+INCy0YvQsdGA0LDQvdC90L7Qs9C+INC40L3RgdGC0YDRg9C80LXQvdGC0LBcblx0ICovXG5cdHZhciBwcmV2VG9vbCA9IHZvaWQgMDtcblx0XG5cdC8qKlxuXHQgKiDQmtC+0L3RgtC10LrRgdGCINC/0YDQtdC00YvQtNGD0YnQtdCz0L4g0YHQu9C+0Y8gY2FudmFzXG5cdCAqL1xuXHR2YXIgcHJldkN0eCA9IHZvaWQgMDtcblx0XG5cdC8qKlxuXHQgKiDQmtC70LDRgdGBINGC0LjQv9CwICdQYWludCdcblx0ICovXG5cdFxuXHR2YXIgUGFpbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gUGFpbnQoeCwgeSkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBhaW50KTtcblx0XG5cdCAgICB0aGlzLnN0YXJ0WCA9IHg7XG5cdCAgICB0aGlzLnN0YXJ0WSA9IHk7XG5cdCAgICB0aGlzLmVuZFggPSB0aGlzLnN0YXJ0WDtcblx0ICAgIHRoaXMuZW5kWSA9IHRoaXMuc3RhcnRZO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFBhaW50LCBbe1xuXHQgICAga2V5OiAnaW5pdExheWVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0TGF5ZXIoY2FudmFzKSB7XG5cdCAgICAgIHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cdCAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuXHQgICAgICB0aGlzLmN0eC5tb3ZlVG8odGhpcy5zdGFydFgsIHRoaXMuc3RhcnRZKTtcblx0ICAgICAgY3R4ID0gbGF5ZXJzLmxlbmd0aCA9PT0gMSA/IHRoaXMuY3R4IDogY3R4O1xuXHQgICAgICBwcmV2Q3R4ID0gY3R4O1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2RyYXdEb3QnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdEb3QoY29sb3IpIHtcblx0ICAgICAgdmFyIGxpbmVXZWlnaHRJbmRleCA9IEVMRU1FTlRTLmxpbmVXZWlnaHQuc2VsZWN0ZWRJbmRleDtcblx0XG5cdCAgICAgIGlmICghdGhpcy5jdHgpIHtcblx0ICAgICAgICB0aGlzLmN0eCA9IHByZXZDdHg7XG5cdCAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcHJldkN0eCA9IHRoaXMuY3R4O1xuXHRcblx0ICAgICAgdGhpcy5jdHgubGluZVdpZHRoID0gRUxFTUVOVFMubGluZVdlaWdodC5vcHRpb25zW2xpbmVXZWlnaHRJbmRleF0udmFsdWU7XG5cdCAgICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG5cdCAgICAgIHRoaXMuY3R4LmxpbmVUbyh0aGlzLmVuZFgsIHRoaXMuZW5kWSk7XG5cdCAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2RyYXdTaGFwZXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdTaGFwZXModHlwZSkge1xuXHQgICAgICB2YXIgbGluZVdlaWdodEluZGV4ID0gRUxFTUVOVFMubGluZVdlaWdodC5zZWxlY3RlZEluZGV4O1xuXHRcblx0ICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIENBTlZBU19XSURUSCwgQ0FOVkFTX0hFSUdIVCk7XG5cdCAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpO1xuXHQgICAgICB0aGlzLmN0eC5saW5lV2lkdGggPSBFTEVNRU5UUy5saW5lV2VpZ2h0Lm9wdGlvbnNbbGluZVdlaWdodEluZGV4XS52YWx1ZTtcblx0ICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBFTEVNRU5UUy5zdHJva2VDb2xvci52YWx1ZTtcblx0ICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gRUxFTUVOVFMuZmlsbENvbG9yLnZhbHVlO1xuXHRcblx0ICAgICAgaWYgKHR5cGUgPT09ICdyZWN0Jykge1xuXHQgICAgICAgIHRoaXMuY3R4LnJlY3QodGhpcy5zdGFydFgsIHRoaXMuc3RhcnRZLCB0aGlzLmVuZFggLSB0aGlzLnN0YXJ0WCwgdGhpcy5lbmRZIC0gdGhpcy5zdGFydFkpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhciB3aWR0aCA9IE1hdGguYWJzKHRoaXMuZW5kWCAtIHRoaXMuc3RhcnRYKTtcblx0ICAgICAgICB2YXIgaGVpZ2h0ID0gTWF0aC5hYnModGhpcy5lbmRZIC0gdGhpcy5zdGFydFkpO1xuXHQgICAgICAgIHZhciByYWRpdXMgPSB3aWR0aCA+IGhlaWdodCA/IHdpZHRoIDogaGVpZ2h0O1xuXHQgICAgICAgIHRoaXMuY3R4LmFyYyh0aGlzLnN0YXJ0WCwgdGhpcy5zdGFydFksIHJhZGl1cywgMCwgMiAqIE1hdGguUEkpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLmN0eC5maWxsKCk7XG5cdCAgICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIFBhaW50O1xuXHR9KCk7XG5cdFxuXHQvKipcblx0ICog0KHQvtC30LTQsNC90LjQtSDRgdC70L7RjyBjYW52YXNcblx0ICovXG5cdFxuXHRcblx0dmFyIHJlbmRlckxheWVyID0gZnVuY3Rpb24gcmVuZGVyTGF5ZXIoKSB7XG5cdCAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuXHQgIGNhbnZhcy5jbGFzc05hbWUgPSAnZHJhd2luZy10b29sX19jYW52YXMgZHJhd2luZy10b29sX19jYW52YXMtLScgKyBsYXllcnMubGVuZ3RoO1xuXHQgIEVMRU1FTlRTLmNhbnZhc0xpc3QuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblx0ICBjYW52YXMuc2V0QXR0cmlidXRlKCd3aWR0aCcsIENBTlZBU19XSURUSCk7XG5cdCAgY2FudmFzLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgQ0FOVkFTX0hFSUdIVCk7XG5cdCAgbGF5ZXJzLnB1c2goY2FudmFzKTtcblx0ICBwYWludC5pbml0TGF5ZXIoY2FudmFzKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDQntCx0YrQtdC00LjQvdC10L3QuNC1INGB0LvQvtC10LIgY2FudmFzINCyINC+0LTQuNC9ICgxLdGL0LkpXG5cdCAqINCj0LTQsNC70LXQvdC40LUg0LLRgdC10YUg0YHQu9C+0LXQsiwg0LrRgNC+0LzQtSAxLdC+0LPQviAo0L7QvdC4INCx0L7Qu9GM0YjQtSDQvdC1INC90YPQttC90YspXG5cdCAqL1xuXHR2YXIgbWVyZ2VDYW52YXNMYXllcnMgPSBmdW5jdGlvbiBtZXJnZUNhbnZhc0xheWVycygpIHtcblx0ICBsYXllcnMuZm9yRWFjaChmdW5jdGlvbiAoY2FudmFzLCBpbmRleCkge1xuXHQgICAgY3R4LmRyYXdJbWFnZShjYW52YXMsIDAsIDApO1xuXHQgICAgaWYgKGluZGV4ID4gMCkge1xuXHQgICAgICBFTEVNRU5UUy5jYW52YXNMaXN0LnJlbW92ZUNoaWxkKGNhbnZhcyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgbGF5ZXJzID0gbGF5ZXJzLnNsaWNlKDAsIDEpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqINCe0YLRgNC40YHQvtCy0LrQsCDQutCw0YHRgtC+0LzQvdC+0LkgJ9Cf0LjQv9C10YLQutC4J1xuXHQgKiBAcGFyYW0gIHtFbGVtZW50fSBwaWNrZXIgIERPTS3RjdC70LXQvNC10L3RgiDRgdGC0LDQvdC00LDRgNGC0L3QvtCz0L4gY29sb3IgcGlja2VyLdCwXG5cdCAqIEBwYXJhbSAge0VsZW1lbnR9IHdyYXBwZXIgRE9NLdGN0LvQtdC80LXQvdGCINC60LDRgdGC0L7QvNC90L7Qs9C+IGNvbG9yIHBpY2tlci3QsFxuXHQgKi9cblx0dmFyIGN1c3RvbWl6ZUNvbG9yUGlja2VyID0gZXhwb3J0cy5jdXN0b21pemVDb2xvclBpY2tlciA9IGZ1bmN0aW9uIGN1c3RvbWl6ZUNvbG9yUGlja2VyKHBpY2tlciwgd3JhcHBlcikge1xuXHQgIHdyYXBwZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcGlja2VyLnZhbHVlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqINCS0YvQsdC+0YAg0LjQvdGB0YLRgNGD0LzQtdC90YLQsFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRvb2xFbGVtZW50IERPTS3RjdC70LXQvNC10L3RgiDQstGL0LHRgNCw0L3QvdC+0LPQviDQuNC90YHRgtGA0YPQvNC10L3RgtCwXG5cdCAqL1xuXHR2YXIgY2hvb3NlVG9vbCA9IGZ1bmN0aW9uIGNob29zZVRvb2wodG9vbEVsZW1lbnQpIHtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IEVMRU1FTlRTLnRvb2xzTGlzdC5sZW5ndGg7IGkrKykge1xuXHQgICAgRUxFTUVOVFMudG9vbHNMaXN0W2ldLmNsYXNzTGlzdC5yZW1vdmUoQ1VSUkVOVF9UT09MX0NMQVNTKTtcblx0ICB9XG5cdCAgdG9vbEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKENVUlJFTlRfVE9PTF9DTEFTUyk7XG5cdFxuXHQgIHZhciBjdXJyZW50VG9vbHMgPSBnZXRDdXJyZW50VG9vbCgpO1xuXHQgIEVMRU1FTlRTLmNhbnZhc0xpc3Quc3R5bGUuY3Vyc29yID0gY3VycmVudFRvb2xzID09PSAncmVjdCcgfHwgY3VycmVudFRvb2xzID09PSAnY2lyY2xlJyA/ICdjcm9zc2hhaXInIDogJ2RlZmF1bHQnO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqINCf0L7Qu9GD0YfQtdC90LjQtSDQvdCw0LfQstCw0L3QuNGPINGC0LXQutGD0YnQtdCz0L4g0LLRi9Cx0YDQsNC90L3QvtCz0L4g0LjQvdGB0YLRgNGD0LzQtdC90YLQsFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHR2YXIgZ2V0Q3VycmVudFRvb2wgPSBmdW5jdGlvbiBnZXRDdXJyZW50VG9vbCgpIHtcblx0ICByZXR1cm4gRUxFTUVOVFMudG9vbHMucXVlcnlTZWxlY3RvcignLmlucHV0OmNoZWNrZWQnKS52YWx1ZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDQn9C+0LvRg9GH0LXQvdC40LUg0LDQutGC0LjQstC90L7Qs9C+INGB0LvQvtGPIGNhbnZhc1xuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9XG5cdCAqL1xuXHR2YXIgZ2V0QWN0aXZlTGF5ZXJOdW1iZXIgPSBmdW5jdGlvbiBnZXRBY3RpdmVMYXllck51bWJlcigpIHtcblx0ICByZXR1cm4gbGF5ZXJzLmxlbmd0aCAtIDE7XG5cdH07XG5cdFxuXHQvKipcblx0ICog0J7Qv9GA0LXQtNC10LvQtdC90LjQtSDQutC+0L7RgNC00LjQvdCw0YIg0LzRi9GI0Lhcblx0ICogQHBhcmFtICB7T2JqZWN0fSBldmVudCDQodC+0LHRi9GC0LjQtSwg0LLRi9C30LLQsNCy0YjQtdC1INC00LDQvdC90YPRjiDRhNGD0L3QutGG0LjRjlxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHR2YXIgZ2V0TW91c2VQb3NpdGlvbiA9IGV4cG9ydHMuZ2V0TW91c2VQb3NpdGlvbiA9IGZ1bmN0aW9uIGdldE1vdXNlUG9zaXRpb24oZXZlbnQpIHtcblx0ICB2YXIgcmVjdCA9IGV2ZW50LnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0ICByZXR1cm4ge1xuXHQgICAgeDogZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCxcblx0ICAgIHk6IGV2ZW50LmNsaWVudFkgLSByZWN0LnRvcFxuXHQgIH07XG5cdH07XG5cdFxuXHQvKipcblx0ICog0JDQutGC0LjQstCw0YbQuNGPINC60L3QvtC/0L7QuiDRg9C/0YDQsNCy0LvQtdC90LjRjyBjYW52YXNcblx0ICovXG5cdHZhciBhY3RpdmF0ZUJ0biA9IGZ1bmN0aW9uIGFjdGl2YXRlQnRuKCkge1xuXHQgIEVMRU1FTlRTLnNhdmUuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcblx0ICBFTEVNRU5UUy5jbGVhci5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuXHQgIEVMRU1FTlRTLnNhdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkJ0blNhdmVDbGljayk7XG5cdCAgRUxFTUVOVFMuY2xlYXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkJ0bkNsZWFyQ2xpY2spO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqINCU0LXQsNC60YLQuNCy0LDRhtC40Y8g0LrQvdC+0L/QvtC6INGD0L/RgNCw0LLQu9C10L3QuNGPIGNhbnZhc1xuXHQgKi9cblx0dmFyIGRlYWN0aXZhdGUgPSBmdW5jdGlvbiBkZWFjdGl2YXRlKCkge1xuXHQgIEVMRU1FTlRTLnNhdmUuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZWQnKTtcblx0ICBFTEVNRU5UUy5jbGVhci5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuXHQgIEVMRU1FTlRTLnNhdmUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkJ0blNhdmVDbGljayk7XG5cdCAgRUxFTUVOVFMuY2xlYXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkJ0bkNsZWFyQ2xpY2spO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPICdtb3VzZWRvd24nINC90LAg0L7QsdC70LDRgdGC0LggY2FudmFzXG5cdCAqINCd0LDRh9Cw0LvQviDQvtGC0YDQuNGB0L7QstC60Lhcblx0ICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG5cdCAqL1xuXHR2YXIgb25DYW52YXNNb3VzZURvd24gPSBmdW5jdGlvbiBvbkNhbnZhc01vdXNlRG93bihldmVudCkge1xuXHQgIHZhciBtb3VzZVBvcyA9IGdldE1vdXNlUG9zaXRpb24oZXZlbnQpO1xuXHQgIHBhaW50ID0gbmV3IFBhaW50KG1vdXNlUG9zLngsIG1vdXNlUG9zLnkpO1xuXHRcblx0ICBpZiAocHJldlRvb2wgPT09ICdyZWN0JyB8fCBwcmV2VG9vbCA9PT0gJ2NpcmNsZScpIHtcblx0ICAgIHJlbmRlckxheWVyKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjdXJyZW50VG9vbCA9IGdldEN1cnJlbnRUb29sKCk7XG5cdCAgICBpZiAoY3VycmVudFRvb2wgPT09ICdyZWN0JyB8fCBjdXJyZW50VG9vbCA9PT0gJ2NpcmNsZScgfHwgZ2V0QWN0aXZlTGF5ZXJOdW1iZXIoKSA8IDApIHtcblx0ICAgICAgcmVuZGVyTGF5ZXIoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBhY3RpdmVMYXllck51bSA9IGdldEFjdGl2ZUxheWVyTnVtYmVyKCk7XG5cdCAgbGF5ZXJzW2FjdGl2ZUxheWVyTnVtXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25DYW52YXNNb3VzZVVwKTtcblx0ICBsYXllcnNbYWN0aXZlTGF5ZXJOdW1dLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0Jywgb25DYW52YXNNb3VzZVVwKTtcblx0ICBsYXllcnNbYWN0aXZlTGF5ZXJOdW1dLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uQ2FudmFzTW91c2VNb3ZlKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQtNCy0LjQttC10L3QuNGPINC80YvRiNC4ICgnbW91c2Vtb3ZlJykg0L/QviDQvtCx0LvQsNGB0YLQuCBjYW52YXNcblx0ICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG5cdCAqL1xuXHR2YXIgb25DYW52YXNNb3VzZU1vdmUgPSBmdW5jdGlvbiBvbkNhbnZhc01vdXNlTW92ZShldmVudCkge1xuXHQgIHZhciBtb3VzZVBvcyA9IGdldE1vdXNlUG9zaXRpb24oZXZlbnQpO1xuXHQgIHBhaW50LmVuZFggPSBtb3VzZVBvcy54O1xuXHQgIHBhaW50LmVuZFkgPSBtb3VzZVBvcy55O1xuXHRcblx0ICBzd2l0Y2ggKGdldEN1cnJlbnRUb29sKCkpIHtcblx0ICAgIGNhc2UgJ3BlbmNpbCc6XG5cdCAgICAgIHBhaW50LmRyYXdEb3QoRUxFTUVOVFMuc3Ryb2tlQ29sb3IudmFsdWUpO1xuXHQgICAgICBicmVhaztcblx0ICAgIGNhc2UgJ2VyYXNlcic6XG5cdCAgICAgIHBhaW50LmRyYXdEb3QoRUxFTUVOVFMuZmlsbENvbG9yLnZhbHVlKTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICdyZWN0Jzpcblx0ICAgICAgcGFpbnQuZHJhd1NoYXBlcygncmVjdCcpO1xuXHQgICAgICBicmVhaztcblx0ICAgIGNhc2UgJ2NpcmNsZSc6XG5cdCAgICAgIHBhaW50LmRyYXdTaGFwZXMoJ2NpcmNsZScpO1xuXHQgICAgICBicmVhaztcblx0ICAgIGRlZmF1bHQ6XG5cdCAgICAgIHJldHVybiAnVW5rbm93biB0b29sJztcblx0ICB9XG5cdFxuXHQgIGFjdGl2YXRlQnRuKCk7XG5cdCAgcHJldlRvb2wgPSBnZXRDdXJyZW50VG9vbCgpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNC5ICdtb3VzZXVwJyDQuCAnbW91c2Vkb3duJyDQvdCwINC+0LHQu9Cw0YHRgtC4IGNhbnZhc1xuXHQgKiDQntC60L7QvdGH0LDQvdC40LUg0L7RgtGA0LjRgdC+0LLQutC4XG5cdCAqIEBwYXJhbSAge09iamVjdH0gZXZlbnRcblx0ICovXG5cdHZhciBvbkNhbnZhc01vdXNlVXAgPSBmdW5jdGlvbiBvbkNhbnZhc01vdXNlVXAoKSB7XG5cdCAgdmFyIGFjdGl2ZUxheWVyTnVtID0gZ2V0QWN0aXZlTGF5ZXJOdW1iZXIoKTtcblx0ICBsYXllcnNbYWN0aXZlTGF5ZXJOdW1dLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkNhbnZhc01vdXNlVXApO1xuXHQgIGxheWVyc1thY3RpdmVMYXllck51bV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBvbkNhbnZhc01vdXNlVXApO1xuXHQgIGxheWVyc1thY3RpdmVMYXllck51bV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25DYW52YXNNb3VzZU1vdmUpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC40LfQvNC10L3QtdC90LjRjyDRhtCy0LXRgtCwINCyIGNvbG9yIHBpY2tlclxuXHQgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcblx0ICovXG5cdHZhciBvbkNvbG9yUGlja2VyQ2xpY2sgPSBmdW5jdGlvbiBvbkNvbG9yUGlja2VyQ2xpY2soZXZlbnQpIHtcblx0ICBjdXN0b21pemVDb2xvclBpY2tlcihldmVudC50YXJnZXQsIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50KTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQstGL0LHQvtGA0LAg0LjQvdGB0YLRgNGD0LzQtdC90YLQsFxuXHQgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcblx0ICovXG5cdHZhciBvblRvb2xzQ2xpY2sgPSBmdW5jdGlvbiBvblRvb2xzQ2xpY2soZXZlbnQpIHtcblx0ICBpZiAoZXZlbnQudGFyZ2V0LnR5cGUgPT09ICdyYWRpbycpIHtcblx0ICAgIGNob29zZVRvb2woZXZlbnQudGFyZ2V0KTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICog0KHQvtGF0YDQsNC90LXQvdC40LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQvdCwIGNhbnZhcyAo0YHQviDQstGB0LXRhSDRgdC70L7QtdCyKSDQsiDRhNCw0LnQu1xuXHQgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcblx0ICovXG5cdHZhciBvbkJ0blNhdmVDbGljayA9IGZ1bmN0aW9uIG9uQnRuU2F2ZUNsaWNrKGV2ZW50KSB7XG5cdCAgbWVyZ2VDYW52YXNMYXllcnMoKTtcblx0ICBldmVudC50YXJnZXQuaHJlZiA9IGxheWVyc1swXS50b0RhdGFVUkwoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDQntGH0LjRgdGC0LrQsCBjYW52YXMgKNCy0YHQtdGFINGB0LvQvtC10LIpXG5cdCAqL1xuXHR2YXIgb25CdG5DbGVhckNsaWNrID0gZnVuY3Rpb24gb25CdG5DbGVhckNsaWNrKCkge1xuXHQgIG1lcmdlQ2FudmFzTGF5ZXJzKCk7XG5cdCAgaWYgKGxheWVyc1swXSkge1xuXHQgICAgRUxFTUVOVFMuY2FudmFzTGlzdC5yZW1vdmVDaGlsZChsYXllcnNbMF0pO1xuXHQgIH1cblx0ICBsYXllcnMgPSBbXTtcblx0ICBkZWFjdGl2YXRlKCk7XG5cdH07XG5cdFxuXHQvLyDQntGC0YDQuNGB0L7QstC60LAg0YbQstC10YLQvtCyINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOLiDQo9GB0YLQsNC90L7QstC60LAg0LjQvdGB0YLRgNGD0LzQtdC90YLQsCDQv9C+INGD0LzQvtC70YfQsNC90LjRjlxuXHRjdXN0b21pemVDb2xvclBpY2tlcihFTEVNRU5UUy5zdHJva2VDb2xvciwgRUxFTUVOVFMuc3Ryb2tlQ29sb3IucGFyZW50RWxlbWVudCk7XG5cdGN1c3RvbWl6ZUNvbG9yUGlja2VyKEVMRU1FTlRTLmZpbGxDb2xvciwgRUxFTUVOVFMuZmlsbENvbG9yLnBhcmVudEVsZW1lbnQpO1xuXHRFTEVNRU5UUy50b29sUGVuY2lsLmNoZWNrZWQgPSB0cnVlO1xuXHRjaG9vc2VUb29sKEVMRU1FTlRTLnRvb2xQZW5jaWwpO1xuXHRkZWFjdGl2YXRlKCk7XG5cdFxuXHQvLyDQndCw0LLQtdGI0LjQstCw0L3QuNC1INC+0LHRgNCw0LHQvtGC0YfQuNC60L7QsiDRgdC+0LHRi9GC0LjQuSDQv9GA0Lgg0LjQvdC40YbQuNCw0LvQuNC30LDRhtC40Lgg0L/RgNC40LvQvtC20LXQvdC40Y9cblx0RUxFTUVOVFMuc3Ryb2tlQ29sb3IuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25Db2xvclBpY2tlckNsaWNrKTtcblx0RUxFTUVOVFMuZmlsbENvbG9yLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQ29sb3JQaWNrZXJDbGljayk7XG5cdEVMRU1FTlRTLnRvb2xzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25Ub29sc0NsaWNrKTtcblx0RUxFTUVOVFMuY2FudmFzTGlzdC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkNhbnZhc01vdXNlRG93bik7XG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzY3JpcHQuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAxZDY0ZTA2YzVlMDBhZThkYThkZiIsIi8qKlxuICogRE9OLdGN0LvQtdC80LXQvdGC0YssINC6INC60L7RgtC+0YDRi9C8INCy0YvQv9C+0LvQvdGP0LXRgtGB0Y8g0L7QsdGA0LDRidC10L3QuNC1XG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQGNvbnN0YW50XG4gKi9cbmNvbnN0IEVMRU1FTlRTID0ge1xuICBjYW52YXNMaXN0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJhd2luZy10b29sX19jYW52YXNlcycpLFxuICBzdHJva2VDb2xvcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlucHV0LS1zdHJva2UtY29sb3InKSxcbiAgZmlsbENvbG9yOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaW5wdXQtLWZpbGwtY29sb3InKSxcbiAgbGluZVdlaWdodDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlbGVjdC0tbGluZS13ZWlnaHQnKSxcbiAgdG9vbHM6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWVsZC0tdG9vbHMnKSxcbiAgdG9vbHNMaXN0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY3VzdG9tLXJhZGlvJyksXG4gIHRvb2xQZW5jaWxXcmFwcGVyOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLXJhZGlvLS1wZW5jaWwnKSxcbiAgdG9vbFBlbmNpbDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmlucHV0LS1wZW5jaWwnKSxcbiAgc2F2ZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi0tc2F2ZScpLFxuICBjbGVhcjogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi0tY2xlYXInKSxcbn07XG5cbi8qKlxuICog0JrQu9Cw0YHRgSwg0L/RgNC40YHQstCw0LjQstCw0LXQvNGL0Lkg0LLRi9Cx0YDQsNC90L3QvtC80YMg0LrQsNGB0YLQvtC80L3QvtC80YMg0YDQsNC00LjQvtCx0LDRgtGC0L7QvdGDXG4gKiBAdHlwZSB7U3RyaW5nfVxuICogQGNvbnN0YW50XG4gKi9cbmNvbnN0IENVUlJFTlRfVE9PTF9DTEFTUyA9ICdjdXN0b20tcmFkaW8tLWNoZWNrZWQnO1xuXG4vKipcbiAqINCg0LDQt9C80LXRgNGLIGNhbnZhcyDQv9C+INGI0LjRgNC40L3QtSDQuCDQstGL0YHQvtGC0LUg0YHQvtC+0YLQstC10YLRgdGC0LLQtdC90L3QviAo0LIgcHgpXG4gKiBAdHlwZSB7TnVtYmVyfVxuICogQGNvbnN0YW50XG4gKi9cbmNvbnN0IENBTlZBU19XSURUSCA9IDU1MDtcbmNvbnN0IENBTlZBU19IRUlHSFQgPSA1NTA7XG5cbi8qKlxuICog0K3QutC30LXQvNC/0LvRj9GAINC60LvQsNGB0YHQsCAnUGFpbnQnXG4gKi9cbmxldCBwYWludDtcblxuLyoqXG4gKiDQodC70L7QuCBjYW52YXMsINC60L7RgtC+0YDRi9C5INC90LAg0LTQsNC90L3Ri9C5INC80L7QvNC10L3RgiDQvdCw0YXQvtC00Y/RgtGB0Y8g0LIgRE9NLdC00LXRgNC10LLQtVxuICogQHR5cGUge0FycmF5fVxuICovXG5sZXQgbGF5ZXJzID0gW107XG5cbi8qKlxuICog0J7RgdC90L7QstC90L7QuSDQutC+0L3RgtC10LrRgdGCIGNhbnZhcy4g0JrQvtC90YLQtdC60YHRgiAxLdC+0LPQviDRgdC+0LfQtNCw0L3QvdC+0LPQviDRgdC70L7Rj1xuICovXG5sZXQgY3R4O1xuXG4vKipcbiAqINCd0LDQt9Cy0LDQvdC40LUg0L/RgNC10LTRi9C00YPRidC10LPQviDQstGL0LHRgNCw0L3QvdC+0LPQviDQuNC90YHRgtGA0YPQvNC10L3RgtCwXG4gKi9cbmxldCBwcmV2VG9vbDtcblxuLyoqXG4gKiDQmtC+0L3RgtC10LrRgdGCINC/0YDQtdC00YvQtNGD0YnQtdCz0L4g0YHQu9C+0Y8gY2FudmFzXG4gKi9cbmxldCBwcmV2Q3R4O1xuXG4vKipcbiAqINCa0LvQsNGB0YEg0YLQuNC/0LAgJ1BhaW50J1xuICovXG5jbGFzcyBQYWludCB7XG4gIGNvbnN0cnVjdG9yKHgsIHkpIHtcbiAgICB0aGlzLnN0YXJ0WCA9IHg7XG4gICAgdGhpcy5zdGFydFkgPSB5O1xuICAgIHRoaXMuZW5kWCA9IHRoaXMuc3RhcnRYO1xuICAgIHRoaXMuZW5kWSA9IHRoaXMuc3RhcnRZO1xuICB9XG5cbiAgaW5pdExheWVyKGNhbnZhcykge1xuICAgIHRoaXMuY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5jdHgubW92ZVRvKHRoaXMuc3RhcnRYLCB0aGlzLnN0YXJ0WSk7XG4gICAgY3R4ID0gKGxheWVycy5sZW5ndGggPT09IDEpID8gdGhpcy5jdHggOiBjdHg7XG4gICAgcHJldkN0eCA9IGN0eDtcbiAgfVxuXG4gIGRyYXdEb3QoY29sb3IpIHtcbiAgICBjb25zdCBsaW5lV2VpZ2h0SW5kZXggPSBFTEVNRU5UUy5saW5lV2VpZ2h0LnNlbGVjdGVkSW5kZXg7XG5cbiAgICBpZiAoIXRoaXMuY3R4KSB7XG4gICAgICB0aGlzLmN0eCA9IHByZXZDdHg7XG4gICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICB9XG4gICAgcHJldkN0eCA9IHRoaXMuY3R4O1xuXG4gICAgdGhpcy5jdHgubGluZVdpZHRoID0gRUxFTUVOVFMubGluZVdlaWdodC5vcHRpb25zW2xpbmVXZWlnaHRJbmRleF0udmFsdWU7XG4gICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcbiAgICB0aGlzLmN0eC5saW5lVG8odGhpcy5lbmRYLCB0aGlzLmVuZFkpO1xuICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICB9XG5cbiAgZHJhd1NoYXBlcyh0eXBlKSB7XG4gICAgY29uc3QgbGluZVdlaWdodEluZGV4ID0gRUxFTUVOVFMubGluZVdlaWdodC5zZWxlY3RlZEluZGV4O1xuXG4gICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIENBTlZBU19XSURUSCwgQ0FOVkFTX0hFSUdIVCk7XG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgdGhpcy5jdHgubGluZVdpZHRoID0gRUxFTUVOVFMubGluZVdlaWdodC5vcHRpb25zW2xpbmVXZWlnaHRJbmRleF0udmFsdWU7XG4gICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBFTEVNRU5UUy5zdHJva2VDb2xvci52YWx1ZTtcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBFTEVNRU5UUy5maWxsQ29sb3IudmFsdWU7XG5cbiAgICBpZiAodHlwZSA9PT0gJ3JlY3QnKSB7XG4gICAgICB0aGlzLmN0eC5yZWN0KHRoaXMuc3RhcnRYLCB0aGlzLnN0YXJ0WSwgdGhpcy5lbmRYIC0gdGhpcy5zdGFydFgsIHRoaXMuZW5kWSAtIHRoaXMuc3RhcnRZKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgd2lkdGggPSBNYXRoLmFicyh0aGlzLmVuZFggLSB0aGlzLnN0YXJ0WCk7XG4gICAgICBjb25zdCBoZWlnaHQgPSBNYXRoLmFicyh0aGlzLmVuZFkgLSB0aGlzLnN0YXJ0WSk7XG4gICAgICBjb25zdCByYWRpdXMgPSAod2lkdGggPiBoZWlnaHQpID8gd2lkdGggOiBoZWlnaHQ7XG4gICAgICB0aGlzLmN0eC5hcmModGhpcy5zdGFydFgsIHRoaXMuc3RhcnRZLCByYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcbiAgICB9XG5cbiAgICB0aGlzLmN0eC5maWxsKCk7XG4gICAgdGhpcy5jdHguc3Ryb2tlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiDQodC+0LfQtNCw0L3QuNC1INGB0LvQvtGPIGNhbnZhc1xuICovXG5jb25zdCByZW5kZXJMYXllciA9ICgpID0+IHtcbiAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gIGNhbnZhcy5jbGFzc05hbWUgPSBgZHJhd2luZy10b29sX19jYW52YXMgZHJhd2luZy10b29sX19jYW52YXMtLSR7bGF5ZXJzLmxlbmd0aH1gO1xuICBFTEVNRU5UUy5jYW52YXNMaXN0LmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gIGNhbnZhcy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgQ0FOVkFTX1dJRFRIKTtcbiAgY2FudmFzLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgQ0FOVkFTX0hFSUdIVCk7XG4gIGxheWVycy5wdXNoKGNhbnZhcyk7XG4gIHBhaW50LmluaXRMYXllcihjYW52YXMpO1xufTtcblxuLyoqXG4gKiDQntCx0YrQtdC00LjQvdC10L3QuNC1INGB0LvQvtC10LIgY2FudmFzINCyINC+0LTQuNC9ICgxLdGL0LkpXG4gKiDQo9C00LDQu9C10L3QuNC1INCy0YHQtdGFINGB0LvQvtC10LIsINC60YDQvtC80LUgMS3QvtCz0L4gKNC+0L3QuCDQsdC+0LvRjNGI0LUg0L3QtSDQvdGD0LbQvdGLKVxuICovXG5jb25zdCBtZXJnZUNhbnZhc0xheWVycyA9ICgpID0+IHtcbiAgbGF5ZXJzLmZvckVhY2goKGNhbnZhcywgaW5kZXgpID0+IHtcbiAgICBjdHguZHJhd0ltYWdlKGNhbnZhcywgMCwgMCk7XG4gICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgRUxFTUVOVFMuY2FudmFzTGlzdC5yZW1vdmVDaGlsZChjYW52YXMpO1xuICAgIH1cbiAgfSk7XG4gIGxheWVycyA9IGxheWVycy5zbGljZSgwLCAxKTtcbn07XG5cbi8qKlxuICog0J7RgtGA0LjRgdC+0LLQutCwINC60LDRgdGC0L7QvNC90L7QuSAn0J/QuNC/0LXRgtC60LgnXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBwaWNrZXIgIERPTS3RjdC70LXQvNC10L3RgiDRgdGC0LDQvdC00LDRgNGC0L3QvtCz0L4gY29sb3IgcGlja2VyLdCwXG4gKiBAcGFyYW0gIHtFbGVtZW50fSB3cmFwcGVyIERPTS3RjdC70LXQvNC10L3RgiDQutCw0YHRgtC+0LzQvdC+0LPQviBjb2xvciBwaWNrZXIt0LBcbiAqL1xuZXhwb3J0IGNvbnN0IGN1c3RvbWl6ZUNvbG9yUGlja2VyID0gKHBpY2tlciwgd3JhcHBlcikgPT4ge1xuICB3cmFwcGVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHBpY2tlci52YWx1ZTtcbn07XG5cbi8qKlxuICog0JLRi9Cx0L7RgCDQuNC90YHRgtGA0YPQvNC10L3RgtCwXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRvb2xFbGVtZW50IERPTS3RjdC70LXQvNC10L3RgiDQstGL0LHRgNCw0L3QvdC+0LPQviDQuNC90YHRgtGA0YPQvNC10L3RgtCwXG4gKi9cbmNvbnN0IGNob29zZVRvb2wgPSAodG9vbEVsZW1lbnQpID0+IHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBFTEVNRU5UUy50b29sc0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICBFTEVNRU5UUy50b29sc0xpc3RbaV0uY2xhc3NMaXN0LnJlbW92ZShDVVJSRU5UX1RPT0xfQ0xBU1MpO1xuICB9XG4gIHRvb2xFbGVtZW50LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChDVVJSRU5UX1RPT0xfQ0xBU1MpO1xuXG4gIGNvbnN0IGN1cnJlbnRUb29scyA9IGdldEN1cnJlbnRUb29sKCk7XG4gIEVMRU1FTlRTLmNhbnZhc0xpc3Quc3R5bGUuY3Vyc29yID0gKGN1cnJlbnRUb29scyA9PT0gJ3JlY3QnIHx8IGN1cnJlbnRUb29scyA9PT0gJ2NpcmNsZScpID8gJ2Nyb3NzaGFpcicgOiAnZGVmYXVsdCc7XG59O1xuXG4vKipcbiAqINCf0L7Qu9GD0YfQtdC90LjQtSDQvdCw0LfQstCw0L3QuNGPINGC0LXQutGD0YnQtdCz0L4g0LLRi9Cx0YDQsNC90L3QvtCz0L4g0LjQvdGB0YLRgNGD0LzQtdC90YLQsFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5jb25zdCBnZXRDdXJyZW50VG9vbCA9ICgpID0+IEVMRU1FTlRTLnRvb2xzLnF1ZXJ5U2VsZWN0b3IoJy5pbnB1dDpjaGVja2VkJykudmFsdWU7XG5cbi8qKlxuICog0J/QvtC70YPRh9C10L3QuNC1INCw0LrRgtC40LLQvdC+0LPQviDRgdC70L7RjyBjYW52YXNcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuY29uc3QgZ2V0QWN0aXZlTGF5ZXJOdW1iZXIgPSAoKSA9PiBsYXllcnMubGVuZ3RoIC0gMTtcblxuLyoqXG4gKiDQntC/0YDQtdC00LXQu9C10L3QuNC1INC60L7QvtGA0LTQuNC90LDRgiDQvNGL0YjQuFxuICogQHBhcmFtICB7T2JqZWN0fSBldmVudCDQodC+0LHRi9GC0LjQtSwg0LLRi9C30LLQsNCy0YjQtdC1INC00LDQvdC90YPRjiDRhNGD0L3QutGG0LjRjlxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5leHBvcnQgY29uc3QgZ2V0TW91c2VQb3NpdGlvbiA9IChldmVudCkgPT4ge1xuICBjb25zdCByZWN0ID0gZXZlbnQudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICByZXR1cm4ge1xuICAgIHg6IGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQsXG4gICAgeTogZXZlbnQuY2xpZW50WSAtIHJlY3QudG9wLFxuICB9O1xufTtcblxuLyoqXG4gKiDQkNC60YLQuNCy0LDRhtC40Y8g0LrQvdC+0L/QvtC6INGD0L/RgNCw0LLQu9C10L3QuNGPIGNhbnZhc1xuICovXG5jb25zdCBhY3RpdmF0ZUJ0biA9ICgpID0+IHtcbiAgRUxFTUVOVFMuc2F2ZS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICBFTEVNRU5UUy5jbGVhci5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICBFTEVNRU5UUy5zYXZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25CdG5TYXZlQ2xpY2spO1xuICBFTEVNRU5UUy5jbGVhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQnRuQ2xlYXJDbGljayk7XG59O1xuXG4vKipcbiAqINCU0LXQsNC60YLQuNCy0LDRhtC40Y8g0LrQvdC+0L/QvtC6INGD0L/RgNCw0LLQu9C10L3QuNGPIGNhbnZhc1xuICovXG5jb25zdCBkZWFjdGl2YXRlID0gKCkgPT4ge1xuICBFTEVNRU5UUy5zYXZlLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gIEVMRU1FTlRTLmNsZWFyLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gIEVMRU1FTlRTLnNhdmUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkJ0blNhdmVDbGljayk7XG4gIEVMRU1FTlRTLmNsZWFyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25CdG5DbGVhckNsaWNrKTtcbn07XG5cbi8qKlxuICog0J7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8gJ21vdXNlZG93bicg0L3QsCDQvtCx0LvQsNGB0YLQuCBjYW52YXNcbiAqINCd0LDRh9Cw0LvQviDQvtGC0YDQuNGB0L7QstC60LhcbiAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxuICovXG5jb25zdCBvbkNhbnZhc01vdXNlRG93biA9IChldmVudCkgPT4ge1xuICBjb25zdCBtb3VzZVBvcyA9IGdldE1vdXNlUG9zaXRpb24oZXZlbnQpO1xuICBwYWludCA9IG5ldyBQYWludChtb3VzZVBvcy54LCBtb3VzZVBvcy55KTtcblxuICBpZiAocHJldlRvb2wgPT09ICdyZWN0JyB8fCBwcmV2VG9vbCA9PT0gJ2NpcmNsZScpIHtcbiAgICByZW5kZXJMYXllcigpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGN1cnJlbnRUb29sID0gZ2V0Q3VycmVudFRvb2woKTtcbiAgICBpZiAoY3VycmVudFRvb2wgPT09ICdyZWN0JyB8fCBjdXJyZW50VG9vbCA9PT0gJ2NpcmNsZScgfHwgZ2V0QWN0aXZlTGF5ZXJOdW1iZXIoKSA8IDApIHtcbiAgICAgIHJlbmRlckxheWVyKCk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgYWN0aXZlTGF5ZXJOdW0gPSBnZXRBY3RpdmVMYXllck51bWJlcigpO1xuICBsYXllcnNbYWN0aXZlTGF5ZXJOdW1dLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvbkNhbnZhc01vdXNlVXApO1xuICBsYXllcnNbYWN0aXZlTGF5ZXJOdW1dLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0Jywgb25DYW52YXNNb3VzZVVwKTtcbiAgbGF5ZXJzW2FjdGl2ZUxheWVyTnVtXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbkNhbnZhc01vdXNlTW92ZSk7XG59O1xuXG4vKipcbiAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC00LLQuNC20LXQvdC40Y8g0LzRi9GI0LggKCdtb3VzZW1vdmUnKSDQv9C+INC+0LHQu9Cw0YHRgtC4IGNhbnZhc1xuICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gKi9cbmNvbnN0IG9uQ2FudmFzTW91c2VNb3ZlID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IG1vdXNlUG9zID0gZ2V0TW91c2VQb3NpdGlvbihldmVudCk7XG4gIHBhaW50LmVuZFggPSBtb3VzZVBvcy54O1xuICBwYWludC5lbmRZID0gbW91c2VQb3MueTtcblxuICBzd2l0Y2ggKGdldEN1cnJlbnRUb29sKCkpIHtcbiAgICBjYXNlICdwZW5jaWwnOlxuICAgICAgcGFpbnQuZHJhd0RvdChFTEVNRU5UUy5zdHJva2VDb2xvci52YWx1ZSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdlcmFzZXInOlxuICAgICAgcGFpbnQuZHJhd0RvdChFTEVNRU5UUy5maWxsQ29sb3IudmFsdWUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAncmVjdCc6XG4gICAgICBwYWludC5kcmF3U2hhcGVzKCdyZWN0Jyk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdjaXJjbGUnOlxuICAgICAgcGFpbnQuZHJhd1NoYXBlcygnY2lyY2xlJyk7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICdVbmtub3duIHRvb2wnO1xuICB9XG5cbiAgYWN0aXZhdGVCdG4oKTtcbiAgcHJldlRvb2wgPSBnZXRDdXJyZW50VG9vbCgpO1xufTtcblxuLyoqXG4gKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjQuSAnbW91c2V1cCcg0LggJ21vdXNlZG93bicg0L3QsCDQvtCx0LvQsNGB0YLQuCBjYW52YXNcbiAqINCe0LrQvtC90YfQsNC90LjQtSDQvtGC0YDQuNGB0L7QstC60LhcbiAqIEBwYXJhbSAge09iamVjdH0gZXZlbnRcbiAqL1xuY29uc3Qgb25DYW52YXNNb3VzZVVwID0gKCkgPT4ge1xuICBjb25zdCBhY3RpdmVMYXllck51bSA9IGdldEFjdGl2ZUxheWVyTnVtYmVyKCk7XG4gIGxheWVyc1thY3RpdmVMYXllck51bV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG9uQ2FudmFzTW91c2VVcCk7XG4gIGxheWVyc1thY3RpdmVMYXllck51bV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBvbkNhbnZhc01vdXNlVXApO1xuICBsYXllcnNbYWN0aXZlTGF5ZXJOdW1dLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uQ2FudmFzTW91c2VNb3ZlKTtcbn07XG5cbi8qKlxuICog0J7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8g0LjQt9C80LXQvdC10L3QuNGPINGG0LLQtdGC0LAg0LIgY29sb3IgcGlja2VyXG4gKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcbiAqL1xuY29uc3Qgb25Db2xvclBpY2tlckNsaWNrID0gKGV2ZW50KSA9PiB7XG4gIGN1c3RvbWl6ZUNvbG9yUGlja2VyKGV2ZW50LnRhcmdldCwgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQpO1xufTtcblxuLyoqXG4gKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQstGL0LHQvtGA0LAg0LjQvdGB0YLRgNGD0LzQtdC90YLQsFxuICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gKi9cbmNvbnN0IG9uVG9vbHNDbGljayA9IChldmVudCkgPT4ge1xuICBpZiAoZXZlbnQudGFyZ2V0LnR5cGUgPT09ICdyYWRpbycpIHtcbiAgICBjaG9vc2VUb29sKGV2ZW50LnRhcmdldCk7XG4gIH1cbn07XG5cbi8qKlxuICog0KHQvtGF0YDQsNC90LXQvdC40LUg0LjQt9C+0LHRgNCw0LbQtdC90LjRjyDQvdCwIGNhbnZhcyAo0YHQviDQstGB0LXRhSDRgdC70L7QtdCyKSDQsiDRhNCw0LnQu1xuICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XG4gKi9cbmNvbnN0IG9uQnRuU2F2ZUNsaWNrID0gKGV2ZW50KSA9PiB7XG4gIG1lcmdlQ2FudmFzTGF5ZXJzKCk7XG4gIGV2ZW50LnRhcmdldC5ocmVmID0gbGF5ZXJzWzBdLnRvRGF0YVVSTCgpO1xufTtcblxuLyoqXG4gKiDQntGH0LjRgdGC0LrQsCBjYW52YXMgKNCy0YHQtdGFINGB0LvQvtC10LIpXG4gKi9cbmNvbnN0IG9uQnRuQ2xlYXJDbGljayA9ICgpID0+IHtcbiAgbWVyZ2VDYW52YXNMYXllcnMoKTtcbiAgaWYgKGxheWVyc1swXSkge1xuICAgIEVMRU1FTlRTLmNhbnZhc0xpc3QucmVtb3ZlQ2hpbGQobGF5ZXJzWzBdKTtcbiAgfVxuICBsYXllcnMgPSBbXTtcbiAgZGVhY3RpdmF0ZSgpO1xufTtcblxuLy8g0J7RgtGA0LjRgdC+0LLQutCwINGG0LLQtdGC0L7QsiDQv9C+INGD0LzQvtC70YfQsNC90LjRji4g0KPRgdGC0LDQvdC+0LLQutCwINC40L3RgdGC0YDRg9C80LXQvdGC0LAg0L/QviDRg9C80L7Qu9GH0LDQvdC40Y5cbmN1c3RvbWl6ZUNvbG9yUGlja2VyKEVMRU1FTlRTLnN0cm9rZUNvbG9yLCBFTEVNRU5UUy5zdHJva2VDb2xvci5wYXJlbnRFbGVtZW50KTtcbmN1c3RvbWl6ZUNvbG9yUGlja2VyKEVMRU1FTlRTLmZpbGxDb2xvciwgRUxFTUVOVFMuZmlsbENvbG9yLnBhcmVudEVsZW1lbnQpO1xuRUxFTUVOVFMudG9vbFBlbmNpbC5jaGVja2VkID0gdHJ1ZTtcbmNob29zZVRvb2woRUxFTUVOVFMudG9vbFBlbmNpbCk7XG5kZWFjdGl2YXRlKCk7XG5cbi8vINCd0LDQstC10YjQuNCy0LDQvdC40LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQvtCyINGB0L7QsdGL0YLQuNC5INC/0YDQuCDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuCDQv9GA0LjQu9C+0LbQtdC90LjRj1xuRUxFTUVOVFMuc3Ryb2tlQ29sb3IuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgb25Db2xvclBpY2tlckNsaWNrKTtcbkVMRU1FTlRTLmZpbGxDb2xvci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvbkNvbG9yUGlja2VyQ2xpY2spO1xuRUxFTUVOVFMudG9vbHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblRvb2xzQ2xpY2spO1xuRUxFTUVOVFMuY2FudmFzTGlzdC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbkNhbnZhc01vdXNlRG93bik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2NyaXB0LmpzIl0sInNvdXJjZVJvb3QiOiIifQ==