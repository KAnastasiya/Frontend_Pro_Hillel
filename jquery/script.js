!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var r=n(2);n(7);var i=function(e){return(0,r.$)(e.target).toggleClass(function(e){return"even_"+e})},o=function(e){},s=function(e){(0,r.$)(e.target).toggleClass("is-clicked"),(0,r.$)("#even").on("click",o),(0,r.$)(".btn--remove").attr("disabled",null).attr({type:"button",textContent:e.data.name}).on("click",a)},a=function(e){(0,r.$)(e.target).attr("disabled",!0),(0,r.$)("li").removeClass("is-clicked"),(0,r.$)("#even").off("click",i)};(0,r.$)("ul").on("click","li",{name:"Remove listeners"},s).find(".list__item").each(function(e,t){return t.textContent=t.textContent+"_"+e}).attr("id",function(e){return e%2?"odd":"even"}).find((0,r.$)("#even")).on("click",i)},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.$=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),a=t.$=function(e){return new u(e)};a.listeners=[];var u=function(){function e(t){return i(this,e),(0,s.isString)(t)?this._ctx=Array.from(document.querySelectorAll(t)):this._ctx=[t],this}return o(e,[{key:"find",value:function(e){var t=this;return(0,s.isString)(e)?this._ctx=this._ctx.reduce(function(t,n){return[].concat(r(t),r(Array.from(n.querySelectorAll(e))))},[]):this._ctx=e._ctx.filter(function(e){return t._ctx.some(function(t){return t.contains(e)})}),this}},{key:"each",value:function(e){return this._ctx.forEach(function(t,n){return e(n,t)}),this}},{key:"attr",value:function(e,t){return this._ctx.reduce(function(n,r,i){if(void 0===t){if(!(0,s.isObject)(e))return n||r.getAttribute(e);for(var o in e)r[o]=e[o]}else null===t?r.removeAttribute(e):r[e]=(0,s.result)(t,i)},null)||this}},{key:"hasClass",value:function(e){return this._ctx[0].classList.contains(e)}},{key:"toggleClass",value:function(e,t){var n=function(e,n){return e.classList.toggle(n,t)};return this._ctx.forEach(function(t,r,i){return n(t,(0,s.result)(e,r,r,i))}),this}},{key:"addClass",value:function(e){return this.toggleClass(e,!0)}},{key:"removeClass",value:function(e){return this.toggleClass(e,!1)}},{key:"on",value:function(e,t,n,r){var i=this;return void 0===r&&(r=t,t=null),t?this._ctx.forEach(function(o){o.addEventListener(e,function(e){Array.from(o.querySelectorAll(t)).includes(e.target)&&(n&&(e.data=n),r(e))}),i._saveEventListener(o,e,r)}):this._ctx.forEach(function(t){t.addEventListener(e,r),i._saveEventListener(t,e,r)}),this}},{key:"off",value:function(e,t){var n=void 0;return n=e?t?function(n,r){return n.elemId===r.dataset.id&&n.events===e&&n.handler===t}:function(t,n){return t.elemId===n.dataset.id&&t.events===e}:function(e,t){return e.elemId===t.dataset.id},this._ctx.forEach(function(e){for(var t=a.listeners.length-1;t>=0;t--)n(a.listeners[t],e)&&(e.removeEventListener(a.listeners[t].events,a.listeners[t].handler),a.listeners.splice(t,1))}),this}},{key:"_saveEventListener",value:function(e,t,n){var r=e.dataset.id;r||(r=(0,s.generateId)("xxxxxx"),e.dataset.id=r),a.listeners.some(function(e){return e.elemId===r&&e.events===t&&e.handler===n})||a.listeners.push({elemId:r,events:t,handler:n})}}]),e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=(t.isString=function(e){return"string"==typeof e},t.isFunc=function(e){return"function"==typeof e});t.isObject=function(e){return"object"===("undefined"==typeof e?"undefined":n(e))},t.result=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return r(e)?e.apply(null,n):e},t.generateId=function(e){return e.replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"/*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}[hidden],template{display:none}",""])},function(e,t,n){t=e.exports=n(1)(),t.i(n(4),""),t.push([e.id,"body{padding:20px}ul{padding-left:20px;margin-bottom:20px}li{font-size:16px;padding:5px 0;cursor:pointer}li.is-clicked{color:green;font-size:18px}li.is-clicked#even{color:blue}li[class*=even]{text-transform:uppercase}.btn{padding:6px 10px}.btn:not([disabled]){cursor:pointer}.btn[disabled]{opacity:.5}",""])},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=p[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(l(r.parts[o],t))}else{for(var s=[],o=0;o<r.parts.length;o++)s.push(l(r.parts[o],t));p[r.id]={id:r.id,refs:1,parts:s}}}}function i(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],s=i[1],a=i[2],u=i[3],l={css:s,media:a,sourceMap:u};n[o]?n[o].parts.push(l):t.push(n[o]={id:o,parts:[l]})}return t}function o(e,t){var n=v(),r=g[g.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),g.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function u(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function l(e,t){var n,r,i;if(t.singleton){var o=y++;n=m||(m=a(t)),r=c.bind(null,n,o,!1),i=c.bind(null,n,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=d.bind(null,n),i=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=f.bind(null,n),i=function(){s(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function c(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=x(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function f(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function d(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var p={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},b=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,g=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=b()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=i(e);return r(n,t),function(e){for(var o=[],s=0;s<n.length;s++){var a=n[s],u=p[a.id];u.refs--,o.push(u)}if(e){r(i(e),t)}for(var s=0;s<o.length;s++){var u=o[s];if(0===u.refs){for(var l=0;l<u.parts.length;l++)u.parts[l]();delete p[u.id]}}}};var x=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(5);"string"==typeof r&&(r=[[e.id,r,""]]);n(6)(r,{});r.locals&&(e.exports=r.locals)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2NyaXB0LmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBkY2FhNTNkZDQwMGI2M2UxYTBhNiIsIndlYnBhY2s6Ly8vLi9zY3JpcHQuanMiLCJ3ZWJwYWNrOi8vLy4uL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vanMvalF1ZXJ5TW9jay5qcyIsIndlYnBhY2s6Ly8vLi9qcy91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi4vfi9ub3JtYWxpemUuY3NzL25vcm1hbGl6ZS5jc3MiLCJ3ZWJwYWNrOi8vLy4vc3R5bGUuc2NzcyIsIndlYnBhY2s6Ly8vLi4vfi9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL3N0eWxlLnNjc3M/MWIzYyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfalF1ZXJ5TW9jayIsIm9uRXZlbkl0ZW1DbGljayIsImV2ZW50IiwiJCIsInRhcmdldCIsInRvZ2dsZUNsYXNzIiwiaW5kZXgiLCJvbkV2ZW5JdGVtQ2xpY2tfMSIsIm9uSXRlbUNsaWNrIiwib24iLCJhdHRyIiwidHlwZSIsInRleHRDb250ZW50IiwiZGF0YSIsIm5hbWUiLCJvbkJ0bkNsaWNrIiwicmVtb3ZlQ2xhc3MiLCJvZmYiLCJmaW5kIiwiZWFjaCIsImVsZW0iLCJsaXN0IiwidG9TdHJpbmciLCJyZXN1bHQiLCJpIiwidGhpcyIsImxlbmd0aCIsIml0ZW0iLCJwdXNoIiwiam9pbiIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyIiwiQXJyYXkiLCJpc0FycmF5IiwiYXJyMiIsImZyb20iLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsInVuZGVmaW5lZCIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJfdXRpbHMiLCJzZWxlY3RvciIsImpRdWVyeU1vY2siLCJsaXN0ZW5lcnMiLCJpc1N0cmluZyIsIl9jdHgiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfdGhpcyIsInJlZHVjZSIsImNvbmNhdCIsImZpbHRlciIsInNvbWUiLCJwYXJlbnQiLCJjb250YWlucyIsImZuIiwiZm9yRWFjaCIsImF0dHJpYnV0ZU5hbWUiLCJtZW1vIiwiaXNPYmplY3QiLCJnZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJjbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJzdGF0ZSIsInRvZ2dsZSIsImNsYXNzZXMiLCJldmVudHMiLCJoYW5kbGVyIiwiX3RoaXMyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImluY2x1ZGVzIiwiX3NhdmVFdmVudExpc3RlbmVyIiwicHJlZGljYXRlIiwibGlzdGVuZXIiLCJlbGVtSWQiLCJkYXRhc2V0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNwbGljZSIsImdlbmVyYXRlSWQiLCJfdHlwZW9mIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJvYmoiLCJjb25zdHJ1Y3RvciIsImlzRnVuYyIsInZhbCIsInByb3AiLCJfbGVuIiwiYXJndW1lbnRzIiwiYXJncyIsIl9rZXkiLCJhcHBseSIsInN0ciIsInJlcGxhY2UiLCJyIiwiTWF0aCIsInJhbmRvbSIsImFkZFN0eWxlc1RvRG9tIiwic3R5bGVzIiwib3B0aW9ucyIsImRvbVN0eWxlIiwic3R5bGVzSW5Eb20iLCJyZWZzIiwiaiIsInBhcnRzIiwiYWRkU3R5bGUiLCJsaXN0VG9TdHlsZXMiLCJuZXdTdHlsZXMiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInBhcnQiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZUVsZW1lbnQiLCJoZWFkIiwiZ2V0SGVhZEVsZW1lbnQiLCJsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCIsInN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wIiwiaW5zZXJ0QXQiLCJuZXh0U2libGluZyIsImluc2VydEJlZm9yZSIsImFwcGVuZENoaWxkIiwiZmlyc3RDaGlsZCIsIkVycm9yIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsImNyZWF0ZVN0eWxlRWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVMaW5rRWxlbWVudCIsImxpbmtFbGVtZW50IiwicmVsIiwidXBkYXRlIiwicmVtb3ZlIiwic2luZ2xldG9uIiwic3R5bGVJbmRleCIsInNpbmdsZXRvbkNvdW50ZXIiLCJzaW5nbGV0b25FbGVtZW50IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsImJpbmQiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJCbG9iIiwiYnRvYSIsInVwZGF0ZUxpbmsiLCJocmVmIiwiYXBwbHlUb1RhZyIsIm5ld09iaiIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwicmVwbGFjZVRleHQiLCJjc3NOb2RlIiwiY3JlYXRlVGV4dE5vZGUiLCJjaGlsZE5vZGVzIiwic2V0QXR0cmlidXRlIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiYmxvYiIsIm9sZFNyYyIsIm1lbW9pemUiLCJpc09sZElFIiwidGVzdCIsInNlbGYiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInRleHRTdG9yZSIs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ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9qUXVlcnlNb2NrID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHR2YXIgb25FdmVuSXRlbUNsaWNrID0gZnVuY3Rpb24gb25FdmVuSXRlbUNsaWNrKGV2ZW50KSB7XG5cdCAgcmV0dXJuICgwLCBfalF1ZXJ5TW9jay4kKShldmVudC50YXJnZXQpLnRvZ2dsZUNsYXNzKGZ1bmN0aW9uIChpbmRleCkge1xuXHQgICAgcmV0dXJuICdldmVuXycgKyBpbmRleDtcblx0ICB9KTtcblx0fTtcblx0dmFyIG9uRXZlbkl0ZW1DbGlja18xID0gZnVuY3Rpb24gb25FdmVuSXRlbUNsaWNrXzEoZXZlbnQpIHtcblx0ICByZXR1cm4gY29uc29sZS5sb2coJ0V2ZW4gaXRlbXMgY2xpY2tlZCcpO1xuXHR9O1xuXHRcblx0dmFyIG9uSXRlbUNsaWNrID0gZnVuY3Rpb24gb25JdGVtQ2xpY2soZXZlbnQpIHtcblx0ICAoMCwgX2pRdWVyeU1vY2suJCkoZXZlbnQudGFyZ2V0KS50b2dnbGVDbGFzcygnaXMtY2xpY2tlZCcpO1xuXHQgICgwLCBfalF1ZXJ5TW9jay4kKSgnI2V2ZW4nKS5vbignY2xpY2snLCBvbkV2ZW5JdGVtQ2xpY2tfMSk7XG5cdCAgKDAsIF9qUXVlcnlNb2NrLiQpKCcuYnRuLS1yZW1vdmUnKS5hdHRyKCdkaXNhYmxlZCcsIG51bGwpLmF0dHIoe1xuXHQgICAgJ3R5cGUnOiAnYnV0dG9uJyxcblx0ICAgICd0ZXh0Q29udGVudCc6IGV2ZW50LmRhdGEubmFtZVxuXHQgIH0pLm9uKCdjbGljaycsIG9uQnRuQ2xpY2spO1xuXHR9O1xuXHRcblx0dmFyIG9uQnRuQ2xpY2sgPSBmdW5jdGlvbiBvbkJ0bkNsaWNrKGV2ZW50KSB7XG5cdCAgKDAsIF9qUXVlcnlNb2NrLiQpKGV2ZW50LnRhcmdldCkuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcblx0ICAoMCwgX2pRdWVyeU1vY2suJCkoJ2xpJykucmVtb3ZlQ2xhc3MoJ2lzLWNsaWNrZWQnKTtcblx0ICAoMCwgX2pRdWVyeU1vY2suJCkoJyNldmVuJykub2ZmKCdjbGljaycsIG9uRXZlbkl0ZW1DbGljayk7XG5cdCAgLy8gJCgnI2V2ZW4nKS5vZmYoJ2NsaWNrJyk7XG5cdCAgLy8gJCgnI2V2ZW4nKS5vZmYoKTtcblx0ICAvLyAkKCd1bCcpLm9mZignY2xpY2snKTtcblx0fTtcblx0XG5cdCgwLCBfalF1ZXJ5TW9jay4kKSgndWwnKS5vbignY2xpY2snLCAnbGknLCB7IG5hbWU6ICdSZW1vdmUgbGlzdGVuZXJzJyB9LCBvbkl0ZW1DbGljaykuZmluZCgnLmxpc3RfX2l0ZW0nKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbSkge1xuXHQgIHJldHVybiBlbGVtLnRleHRDb250ZW50ID0gZWxlbS50ZXh0Q29udGVudCArICdfJyArIGluZGV4O1xuXHR9KS5hdHRyKCdpZCcsIGZ1bmN0aW9uIChpbmRleCkge1xuXHQgIHJldHVybiBpbmRleCAlIDIgPyAnb2RkJyA6ICdldmVuJztcblx0fSkuZmluZCgoMCwgX2pRdWVyeU1vY2suJCkoJyNldmVuJykpLm9uKCdjbGljaycsIG9uRXZlbkl0ZW1DbGljayk7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKlxuXHRcdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdFx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuXHQqL1xuXHQvLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBsaXN0ID0gW107XG5cdFxuXHRcdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblx0XHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdFx0XHR2YXIgcmVzdWx0ID0gW107XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgaXRlbSA9IHRoaXNbaV07XG5cdFx0XHRcdGlmKGl0ZW1bMl0pIHtcblx0XHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmVzdWx0LnB1c2goaXRlbVsxXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcblx0XHR9O1xuXHRcblx0XHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxuXHRcdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcblx0XHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxuXHRcdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XG5cdFx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcblx0XHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxuXHRcdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xuXHRcdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXG5cdFx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXG5cdFx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXG5cdFx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cdFx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG5cdFx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xuXHRcdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcblx0XHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRyZXR1cm4gbGlzdDtcblx0fTtcblxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuJCA9IHVuZGVmaW5lZDtcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHR2YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdGZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciAkID0gZXhwb3J0cy4kID0gZnVuY3Rpb24gJChzZWxlY3Rvcikge1xuXHQgIHJldHVybiBuZXcgalF1ZXJ5TW9jayhzZWxlY3Rvcik7XG5cdH07XG5cdCQubGlzdGVuZXJzID0gW107XG5cdFxuXHR2YXIgalF1ZXJ5TW9jayA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBqUXVlcnlNb2NrKHNlbGVjdG9yKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgalF1ZXJ5TW9jayk7XG5cdFxuXHQgICAgaWYgKCgwLCBfdXRpbHMuaXNTdHJpbmcpKHNlbGVjdG9yKSkge1xuXHQgICAgICB0aGlzLl9jdHggPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuX2N0eCA9IFtzZWxlY3Rvcl07XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoalF1ZXJ5TW9jaywgW3tcblx0ICAgIGtleTogJ2ZpbmQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGZpbmQoc2VsZWN0b3IpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgIGlmICgoMCwgX3V0aWxzLmlzU3RyaW5nKShzZWxlY3RvcikpIHtcblx0ICAgICAgICB0aGlzLl9jdHggPSB0aGlzLl9jdHgucmVkdWNlKGZ1bmN0aW9uIChhcnIsIGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFyciksIF90b0NvbnN1bWFibGVBcnJheShBcnJheS5mcm9tKGl0ZW0ucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpKSk7XG5cdCAgICAgICAgfSwgW10pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX2N0eCA9IHNlbGVjdG9yLl9jdHguZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICByZXR1cm4gX3RoaXMuX2N0eC5zb21lKGZ1bmN0aW9uIChwYXJlbnQpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHBhcmVudC5jb250YWlucyhpdGVtKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdlYWNoJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBlYWNoKGZuKSB7XG5cdCAgICAgIHRoaXMuX2N0eC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xuXHQgICAgICAgIHJldHVybiBmbihpbmRleCwgaXRlbSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdhdHRyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBhdHRyKGF0dHJpYnV0ZU5hbWUsIHZhbHVlKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9jdHgucmVkdWNlKGZ1bmN0aW9uIChtZW1vLCBpdGVtLCBpbmRleCkge1xuXHQgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICBpZiAoKDAsIF91dGlscy5pc09iamVjdCkoYXR0cmlidXRlTmFtZSkpIHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBhdHRyaWJ1dGVOYW1lKSB7XG5cdCAgICAgICAgICAgICAgaXRlbVthdHRyXSA9IGF0dHJpYnV0ZU5hbWVbYXR0cl07XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJldHVybiBtZW1vIHx8IGl0ZW0uZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IG51bGwpIHtcblx0ICAgICAgICAgIGl0ZW0ucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBpdGVtW2F0dHJpYnV0ZU5hbWVdID0gKDAsIF91dGlscy5yZXN1bHQpKHZhbHVlLCBpbmRleCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCBudWxsKSB8fCB0aGlzO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2hhc0NsYXNzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBoYXNDbGFzcyhjbGFzc05hbWUpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2N0eFswXS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICd0b2dnbGVDbGFzcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoY2xhc3NOYW1lLCBzdGF0ZSkge1xuXHQgICAgICB2YXIgdG9nZ2xlID0gZnVuY3Rpb24gdG9nZ2xlKGl0ZW0sIGNsYXNzZXMpIHtcblx0ICAgICAgICByZXR1cm4gaXRlbS5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzZXMsIHN0YXRlKTtcblx0ICAgICAgfTtcblx0ICAgICAgdGhpcy5fY3R4LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4LCBhcnIpIHtcblx0ICAgICAgICByZXR1cm4gdG9nZ2xlKGl0ZW0sICgwLCBfdXRpbHMucmVzdWx0KShjbGFzc05hbWUsIGluZGV4LCBpbmRleCwgYXJyKSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdhZGRDbGFzcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gYWRkQ2xhc3MoY2xhc3NOYW1lKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSwgdHJ1ZSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVtb3ZlQ2xhc3MnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGNsYXNzTmFtZSkge1xuXHQgICAgICByZXR1cm4gdGhpcy50b2dnbGVDbGFzcyhjbGFzc05hbWUsIGZhbHNlKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBOb3QgaW1wbGVtZW50ZWQgaWYgKCFzZWxlY3RvciAmJiBkYXRhKVxuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdvbicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnRzLCBzZWxlY3RvciwgZGF0YSwgaGFuZGxlcikge1xuXHQgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblx0XG5cdCAgICAgIGlmIChoYW5kbGVyID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBoYW5kbGVyID0gc2VsZWN0b3I7XG5cdCAgICAgICAgc2VsZWN0b3IgPSBudWxsO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoc2VsZWN0b3IpIHtcblx0ICAgICAgICB0aGlzLl9jdHguZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKGV2ZW50cywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIHZhciBpdGVtcyA9IEFycmF5LmZyb20oaXRlbS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG5cdCAgICAgICAgICAgIGlmIChpdGVtcy5pbmNsdWRlcyhldmVudC50YXJnZXQpKSB7XG5cdCAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcblx0ICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEgPSBkYXRhO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICBoYW5kbGVyKGV2ZW50KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgX3RoaXMyLl9zYXZlRXZlbnRMaXN0ZW5lcihpdGVtLCBldmVudHMsIGhhbmRsZXIpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX2N0eC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLCBoYW5kbGVyKTtcblx0ICAgICAgICAgIF90aGlzMi5fc2F2ZUV2ZW50TGlzdGVuZXIoaXRlbSwgZXZlbnRzLCBoYW5kbGVyKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gTm90IGltcGxlbWVudGVkIGlmIChzZWxlY3Rvcilcblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnb2ZmJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBvZmYoZXZlbnRzLCBoYW5kbGVyKSB7XG5cdCAgICAgIHZhciBwcmVkaWNhdGUgPSB2b2lkIDA7XG5cdFxuXHQgICAgICBpZiAoIWV2ZW50cykge1xuXHQgICAgICAgIHByZWRpY2F0ZSA9IGZ1bmN0aW9uIHByZWRpY2F0ZShsaXN0ZW5lciwgaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyLmVsZW1JZCA9PT0gaXRlbS5kYXRhc2V0LmlkO1xuXHQgICAgICAgIH07XG5cdCAgICAgIH0gZWxzZSBpZiAoaGFuZGxlcikge1xuXHQgICAgICAgIHByZWRpY2F0ZSA9IGZ1bmN0aW9uIHByZWRpY2F0ZShsaXN0ZW5lciwgaXRlbSkge1xuXHQgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyLmVsZW1JZCA9PT0gaXRlbS5kYXRhc2V0LmlkICYmIGxpc3RlbmVyLmV2ZW50cyA9PT0gZXZlbnRzICYmIGxpc3RlbmVyLmhhbmRsZXIgPT09IGhhbmRsZXI7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcmVkaWNhdGUgPSBmdW5jdGlvbiBwcmVkaWNhdGUobGlzdGVuZXIsIGl0ZW0pIHtcblx0ICAgICAgICAgIHJldHVybiBsaXN0ZW5lci5lbGVtSWQgPT09IGl0ZW0uZGF0YXNldC5pZCAmJiBsaXN0ZW5lci5ldmVudHMgPT09IGV2ZW50cztcblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLl9jdHguZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAkLmxpc3RlbmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAgICAgICAgaWYgKHByZWRpY2F0ZSgkLmxpc3RlbmVyc1tpXSwgaXRlbSkpIHtcblx0ICAgICAgICAgICAgaXRlbS5yZW1vdmVFdmVudExpc3RlbmVyKCQubGlzdGVuZXJzW2ldLmV2ZW50cywgJC5saXN0ZW5lcnNbaV0uaGFuZGxlcik7XG5cdCAgICAgICAgICAgICQubGlzdGVuZXJzLnNwbGljZShpLCAxKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnX3NhdmVFdmVudExpc3RlbmVyJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBfc2F2ZUV2ZW50TGlzdGVuZXIoZWxlbSwgZXZlbnRzLCBoYW5kbGVyKSB7XG5cdCAgICAgIHZhciBlbGVtSWQgPSBlbGVtLmRhdGFzZXQuaWQ7XG5cdCAgICAgIGlmICghZWxlbUlkKSB7XG5cdCAgICAgICAgZWxlbUlkID0gKDAsIF91dGlscy5nZW5lcmF0ZUlkKSgneHh4eHh4Jyk7XG5cdCAgICAgICAgZWxlbS5kYXRhc2V0LmlkID0gZWxlbUlkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgZWxlbUhhc0xpc3RlbmVyID0gJC5saXN0ZW5lcnMuc29tZShmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgIHJldHVybiBpdGVtLmVsZW1JZCA9PT0gZWxlbUlkICYmIGl0ZW0uZXZlbnRzID09PSBldmVudHMgJiYgaXRlbS5oYW5kbGVyID09PSBoYW5kbGVyO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGlmICghZWxlbUhhc0xpc3RlbmVyKSB7XG5cdCAgICAgICAgJC5saXN0ZW5lcnMucHVzaCh7IGVsZW1JZDogZWxlbUlkLCBldmVudHM6IGV2ZW50cywgaGFuZGxlcjogaGFuZGxlciB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1dKTtcblxuXHQgIHJldHVybiBqUXVlcnlNb2NrO1xuXHR9KCk7XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblx0XG5cdHZhciBpc1N0cmluZyA9IGV4cG9ydHMuaXNTdHJpbmcgPSBmdW5jdGlvbiBpc1N0cmluZyh2YWwpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XG5cdH07XG5cdFxuXHR2YXIgaXNGdW5jID0gZXhwb3J0cy5pc0Z1bmMgPSBmdW5jdGlvbiBpc0Z1bmModmFsKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbic7XG5cdH07XG5cdFxuXHR2YXIgaXNPYmplY3QgPSBleHBvcnRzLmlzT2JqZWN0ID0gZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XG5cdCAgcmV0dXJuICh0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZih2YWwpKSA9PT0gJ29iamVjdCc7XG5cdH07XG5cdFxuXHR2YXIgcmVzdWx0ID0gZXhwb3J0cy5yZXN1bHQgPSBmdW5jdGlvbiByZXN1bHQocHJvcCkge1xuXHQgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gaXNGdW5jKHByb3ApID8gcHJvcC5hcHBseShudWxsLCBhcmdzKSA6IHByb3A7XG5cdH07XG5cdFxuXHR2YXIgZ2VuZXJhdGVJZCA9IGV4cG9ydHMuZ2VuZXJhdGVJZCA9IGZ1bmN0aW9uIGdlbmVyYXRlSWQoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG5cdCAgICB2YXIgciA9IE1hdGgucmFuZG9tKCkgKiAxNiB8IDA7XG5cdCAgICByZXR1cm4gKGMgPT09ICd4JyA/IHIgOiByICYgMHgzIHwgMHg4KS50b1N0cmluZygxNik7XG5cdCAgfSk7XG5cdH07XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLyohIG5vcm1hbGl6ZS5jc3MgdjUuMC4wIHwgTUlUIExpY2Vuc2UgfCBnaXRodWIuY29tL25lY29sYXMvbm9ybWFsaXplLmNzcyAqL2h0bWx7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjtsaW5lLWhlaWdodDoxLjE1Oy1tcy10ZXh0LXNpemUtYWRqdXN0OjEwMCU7LXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OjEwMCV9Ym9keXttYXJnaW46MH1hcnRpY2xlLGFzaWRlLGZvb3RlcixoZWFkZXIsbmF2LHNlY3Rpb257ZGlzcGxheTpibG9ja31oMXtmb250LXNpemU6MmVtO21hcmdpbjouNjdlbSAwfWZpZ2NhcHRpb24sZmlndXJlLG1haW57ZGlzcGxheTpibG9ja31maWd1cmV7bWFyZ2luOjFlbSA0MHB4fWhye2JveC1zaXppbmc6Y29udGVudC1ib3g7aGVpZ2h0OjA7b3ZlcmZsb3c6dmlzaWJsZX1wcmV7Zm9udC1mYW1pbHk6bW9ub3NwYWNlLG1vbm9zcGFjZTtmb250LXNpemU6MWVtfWF7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDstd2Via2l0LXRleHQtZGVjb3JhdGlvbi1za2lwOm9iamVjdHN9YTphY3RpdmUsYTpob3ZlcntvdXRsaW5lLXdpZHRoOjB9YWJiclt0aXRsZV17Ym9yZGVyLWJvdHRvbTpub25lO3RleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZSBkb3R0ZWR9YixzdHJvbmd7Zm9udC13ZWlnaHQ6aW5oZXJpdDtmb250LXdlaWdodDpib2xkZXJ9Y29kZSxrYmQsc2FtcHtmb250LWZhbWlseTptb25vc3BhY2UsbW9ub3NwYWNlO2ZvbnQtc2l6ZToxZW19ZGZue2ZvbnQtc3R5bGU6aXRhbGljfW1hcmt7YmFja2dyb3VuZC1jb2xvcjojZmYwO2NvbG9yOiMwMDB9c21hbGx7Zm9udC1zaXplOjgwJX1zdWIsc3Vwe2ZvbnQtc2l6ZTo3NSU7bGluZS1oZWlnaHQ6MDtwb3NpdGlvbjpyZWxhdGl2ZTt2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZX1zdWJ7Ym90dG9tOi0uMjVlbX1zdXB7dG9wOi0uNWVtfWF1ZGlvLHZpZGVve2Rpc3BsYXk6aW5saW5lLWJsb2NrfWF1ZGlvOm5vdChbY29udHJvbHNdKXtkaXNwbGF5Om5vbmU7aGVpZ2h0OjB9aW1ne2JvcmRlci1zdHlsZTpub25lfXN2Zzpub3QoOnJvb3Qpe292ZXJmbG93OmhpZGRlbn1idXR0b24saW5wdXQsb3B0Z3JvdXAsc2VsZWN0LHRleHRhcmVhe2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7Zm9udC1zaXplOjEwMCU7bGluZS1oZWlnaHQ6MS4xNTttYXJnaW46MH1idXR0b24saW5wdXR7b3ZlcmZsb3c6dmlzaWJsZX1idXR0b24sc2VsZWN0e3RleHQtdHJhbnNmb3JtOm5vbmV9W3R5cGU9cmVzZXRdLFt0eXBlPXN1Ym1pdF0sYnV0dG9uLGh0bWwgW3R5cGU9YnV0dG9uXXstd2Via2l0LWFwcGVhcmFuY2U6YnV0dG9ufVt0eXBlPWJ1dHRvbl06Oi1tb3otZm9jdXMtaW5uZXIsW3R5cGU9cmVzZXRdOjotbW96LWZvY3VzLWlubmVyLFt0eXBlPXN1Ym1pdF06Oi1tb3otZm9jdXMtaW5uZXIsYnV0dG9uOjotbW96LWZvY3VzLWlubmVye2JvcmRlci1zdHlsZTpub25lO3BhZGRpbmc6MH1bdHlwZT1idXR0b25dOi1tb3otZm9jdXNyaW5nLFt0eXBlPXJlc2V0XTotbW96LWZvY3VzcmluZyxbdHlwZT1zdWJtaXRdOi1tb3otZm9jdXNyaW5nLGJ1dHRvbjotbW96LWZvY3VzcmluZ3tvdXRsaW5lOjFweCBkb3R0ZWQgQnV0dG9uVGV4dH1maWVsZHNldHtib3JkZXI6MXB4IHNvbGlkIHNpbHZlcjttYXJnaW46MCAycHg7cGFkZGluZzouMzVlbSAuNjI1ZW0gLjc1ZW19bGVnZW5ke2JveC1zaXppbmc6Ym9yZGVyLWJveDtjb2xvcjppbmhlcml0O2Rpc3BsYXk6dGFibGU7bWF4LXdpZHRoOjEwMCU7cGFkZGluZzowO3doaXRlLXNwYWNlOm5vcm1hbH1wcm9ncmVzc3tkaXNwbGF5OmlubGluZS1ibG9jazt2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZX10ZXh0YXJlYXtvdmVyZmxvdzphdXRvfVt0eXBlPWNoZWNrYm94XSxbdHlwZT1yYWRpb117Ym94LXNpemluZzpib3JkZXItYm94O3BhZGRpbmc6MH1bdHlwZT1udW1iZXJdOjotd2Via2l0LWlubmVyLXNwaW4tYnV0dG9uLFt0eXBlPW51bWJlcl06Oi13ZWJraXQtb3V0ZXItc3Bpbi1idXR0b257aGVpZ2h0OmF1dG99W3R5cGU9c2VhcmNoXXstd2Via2l0LWFwcGVhcmFuY2U6dGV4dGZpZWxkO291dGxpbmUtb2Zmc2V0Oi0ycHh9W3R5cGU9c2VhcmNoXTo6LXdlYmtpdC1zZWFyY2gtY2FuY2VsLWJ1dHRvbixbdHlwZT1zZWFyY2hdOjotd2Via2l0LXNlYXJjaC1kZWNvcmF0aW9uey13ZWJraXQtYXBwZWFyYW5jZTpub25lfTo6LXdlYmtpdC1maWxlLXVwbG9hZC1idXR0b257LXdlYmtpdC1hcHBlYXJhbmNlOmJ1dHRvbjtmb250OmluaGVyaXR9ZGV0YWlscyxtZW51e2Rpc3BsYXk6YmxvY2t9c3VtbWFyeXtkaXNwbGF5Omxpc3QtaXRlbX1jYW52YXN7ZGlzcGxheTppbmxpbmUtYmxvY2t9W2hpZGRlbl0sdGVtcGxhdGV7ZGlzcGxheTpub25lfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRleHBvcnRzLmkoX193ZWJwYWNrX3JlcXVpcmVfXyg0KSwgXCJcIik7XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiYm9keXtwYWRkaW5nOjIwcHh9dWx7cGFkZGluZy1sZWZ0OjIwcHg7bWFyZ2luLWJvdHRvbToyMHB4fWxpe2ZvbnQtc2l6ZToxNnB4O3BhZGRpbmc6NXB4IDA7Y3Vyc29yOnBvaW50ZXJ9bGkuaXMtY2xpY2tlZHtjb2xvcjpncmVlbjtmb250LXNpemU6MThweH1saS5pcy1jbGlja2VkI2V2ZW57Y29sb3I6Ymx1ZX1saVtjbGFzcyo9ZXZlbl17dGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlfS5idG57cGFkZGluZzo2cHggMTBweH0uYnRuOm5vdChbZGlzYWJsZWRdKXtjdXJzb3I6cG9pbnRlcn0uYnRuW2Rpc2FibGVkXXtvcGFjaXR5Oi41fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdFx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0XHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG5cdCovXG5cdHZhciBzdHlsZXNJbkRvbSA9IHt9LFxuXHRcdG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xuXHRcdFx0dmFyIG1lbW87XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0XHRyZXR1cm4gbWVtbztcblx0XHRcdH07XG5cdFx0fSxcblx0XHRpc09sZElFID0gbWVtb2l6ZShmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAvbXNpZSBbNi05XVxcYi8udGVzdChzZWxmLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG5cdFx0fSksXG5cdFx0Z2V0SGVhZEVsZW1lbnQgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcblx0XHR9KSxcblx0XHRzaW5nbGV0b25FbGVtZW50ID0gbnVsbCxcblx0XHRzaW5nbGV0b25Db3VudGVyID0gMCxcblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdFx0aWYoZmFsc2UpIHtcblx0XHRcdGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHRcdH1cblx0XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFx0Ly8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG5cdFx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXHRcblx0XHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgPGhlYWQ+LlxuXHRcdGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cdFxuXHRcdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCk7XG5cdFx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG5cdFx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblx0XHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0XHR9XG5cdFx0XHRpZihuZXdMaXN0KSB7XG5cdFx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCk7XG5cdFx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0XHR9XG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblx0XHRcdFx0aWYoZG9tU3R5bGUucmVmcyA9PT0gMCkge1xuXHRcdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKylcblx0XHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cdFx0XHRcdFx0ZGVsZXRlIHN0eWxlc0luRG9tW2RvbVN0eWxlLmlkXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucykge1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZvcig7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QpIHtcblx0XHR2YXIgc3R5bGVzID0gW107XG5cdFx0dmFyIG5ld1N0eWxlcyA9IHt9O1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0XHR2YXIgaWQgPSBpdGVtWzBdO1xuXHRcdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdFx0dmFyIHNvdXJjZU1hcCA9IGl0ZW1bM107XG5cdFx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cdFx0XHRpZighbmV3U3R5bGVzW2lkXSlcblx0XHRcdFx0c3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0bmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHRcdH1cblx0XHRyZXR1cm4gc3R5bGVzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KSB7XG5cdFx0dmFyIGhlYWQgPSBnZXRIZWFkRWxlbWVudCgpO1xuXHRcdHZhciBsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wW3N0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmxlbmd0aCAtIDFdO1xuXHRcdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0XHRpZighbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdFx0aGVhZC5pbnNlcnRCZWZvcmUoc3R5bGVFbGVtZW50LCBoZWFkLmZpcnN0Q2hpbGQpO1xuXHRcdFx0fSBlbHNlIGlmKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0fVxuXHRcdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AucHVzaChzdHlsZUVsZW1lbnQpO1xuXHRcdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0Jy4gTXVzdCBiZSAndG9wJyBvciAnYm90dG9tJy5cIik7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XG5cdFx0c3R5bGVFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHR2YXIgaWR4ID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZUVsZW1lbnQpO1xuXHRcdGlmKGlkeCA+PSAwKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5zcGxpY2UoaWR4LCAxKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSB7XG5cdFx0dmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblx0XHRzdHlsZUVsZW1lbnQudHlwZSA9IFwidGV4dC9jc3NcIjtcblx0XHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KTtcblx0XHRyZXR1cm4gc3R5bGVFbGVtZW50O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKSB7XG5cdFx0dmFyIGxpbmtFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cdFx0bGlua0VsZW1lbnQucmVsID0gXCJzdHlsZXNoZWV0XCI7XG5cdFx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmtFbGVtZW50KTtcblx0XHRyZXR1cm4gbGlua0VsZW1lbnQ7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuXHRcdHZhciBzdHlsZUVsZW1lbnQsIHVwZGF0ZSwgcmVtb3ZlO1xuXHRcblx0XHRpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcblx0XHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXHRcdFx0c3R5bGVFbGVtZW50ID0gc2luZ2xldG9uRWxlbWVudCB8fCAoc2luZ2xldG9uRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cdFx0XHR1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCBmYWxzZSk7XG5cdFx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCB0cnVlKTtcblx0XHR9IGVsc2UgaWYob2JqLnNvdXJjZU1hcCAmJlxuXHRcdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgVVJMLmNyZWF0ZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0XHR0eXBlb2YgYnRvYSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0XHRpZihzdHlsZUVsZW1lbnQuaHJlZilcblx0XHRcdFx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKHN0eWxlRWxlbWVudC5ocmVmKTtcblx0XHRcdH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKTtcblx0XHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0fTtcblx0XHR9XG5cdFxuXHRcdHVwZGF0ZShvYmopO1xuXHRcblx0XHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlU3R5bGUobmV3T2JqKSB7XG5cdFx0XHRpZihuZXdPYmopIHtcblx0XHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZW1vdmUoKTtcblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdFxuXHR2YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHRcdHZhciB0ZXh0U3RvcmUgPSBbXTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHRcdHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcblx0XHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHRcdH07XG5cdH0pKCk7XG5cdFxuXHRmdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdFx0dmFyIGNzcyA9IHJlbW92ZSA/IFwiXCIgOiBvYmouY3NzO1xuXHRcblx0XHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdFx0dmFyIGNoaWxkTm9kZXMgPSBzdHlsZUVsZW1lbnQuY2hpbGROb2Rlcztcblx0XHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0XHRzdHlsZUVsZW1lbnQuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcblx0XHR2YXIgY3NzID0gb2JqLmNzcztcblx0XHR2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG5cdFxuXHRcdGlmKG1lZGlhKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpXG5cdFx0fVxuXHRcblx0XHRpZihzdHlsZUVsZW1lbnQuc3R5bGVTaGVldCkge1xuXHRcdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0XHR9IGVsc2Uge1xuXHRcdFx0d2hpbGUoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcblx0XHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcblx0XHRcdH1cblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZUxpbmsobGlua0VsZW1lbnQsIG9iaikge1xuXHRcdHZhciBjc3MgPSBvYmouY3NzO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXHRcblx0XHRpZihzb3VyY2VNYXApIHtcblx0XHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdFx0fVxuXHRcblx0XHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblx0XG5cdFx0dmFyIG9sZFNyYyA9IGxpbmtFbGVtZW50LmhyZWY7XG5cdFxuXHRcdGxpbmtFbGVtZW50LmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcblx0XHRpZihvbGRTcmMpXG5cdFx0XHRVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG5cdH1cblxuXG4vKioqLyB9LFxuLyogNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzP21pbmltaXplIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcz9yZXNvbHZlIHVybCEuL3N0eWxlLnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanM/bWluaW1pemUhLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzP3Jlc29sdmUgdXJsIS4vc3R5bGUuc2Nzc1wiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNjcmlwdC5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGRjYWE1M2RkNDAwYjYzZTFhMGE2IiwiaW1wb3J0IHsgJCB9IGZyb20gJy4vanMvalF1ZXJ5TW9jayc7XG5pbXBvcnQgJy4vc3R5bGUuc2Nzcyc7XG5cbmNvbnN0IG9uRXZlbkl0ZW1DbGljayA9IGV2ZW50ID0+ICQoZXZlbnQudGFyZ2V0KS50b2dnbGVDbGFzcygoaW5kZXgpID0+IGBldmVuXyR7aW5kZXh9YCk7XG5jb25zdCBvbkV2ZW5JdGVtQ2xpY2tfMSA9IGV2ZW50ID0+IGNvbnNvbGUubG9nKCdFdmVuIGl0ZW1zIGNsaWNrZWQnKTtcblxuY29uc3Qgb25JdGVtQ2xpY2sgPSBldmVudCA9PiB7XG4gICQoZXZlbnQudGFyZ2V0KS50b2dnbGVDbGFzcygnaXMtY2xpY2tlZCcpO1xuICAkKCcjZXZlbicpLm9uKCdjbGljaycsIG9uRXZlbkl0ZW1DbGlja18xKTtcbiAgJCgnLmJ0bi0tcmVtb3ZlJylcbiAgICAuYXR0cignZGlzYWJsZWQnLCBudWxsKVxuICAgIC5hdHRyKHtcbiAgICAgICd0eXBlJzogJ2J1dHRvbicsXG4gICAgICAndGV4dENvbnRlbnQnOiBldmVudC5kYXRhLm5hbWVcbiAgICB9KVxuICAgIC5vbignY2xpY2snLCBvbkJ0bkNsaWNrKTtcbn1cblxuY29uc3Qgb25CdG5DbGljayA9IGV2ZW50ID0+IHtcbiAgJChldmVudC50YXJnZXQpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICQoJ2xpJykucmVtb3ZlQ2xhc3MoJ2lzLWNsaWNrZWQnKVxuICAkKCcjZXZlbicpLm9mZignY2xpY2snLCBvbkV2ZW5JdGVtQ2xpY2spO1xuICAvLyAkKCcjZXZlbicpLm9mZignY2xpY2snKTtcbiAgLy8gJCgnI2V2ZW4nKS5vZmYoKTtcbiAgLy8gJCgndWwnKS5vZmYoJ2NsaWNrJyk7XG59XG5cbiQoJ3VsJylcbiAgLm9uKCdjbGljaycsICdsaScsIHtuYW1lOiAnUmVtb3ZlIGxpc3RlbmVycyd9LCBvbkl0ZW1DbGljaylcbiAgLmZpbmQoJy5saXN0X19pdGVtJylcbiAgLmVhY2goKGluZGV4LCBlbGVtKSA9PiBlbGVtLnRleHRDb250ZW50ID0gYCR7ZWxlbS50ZXh0Q29udGVudH1fJHtpbmRleH1gKVxuICAuYXR0cignaWQnLCAoaW5kZXgpID0+IGluZGV4ICUgMiA/ICdvZGQnIDogJ2V2ZW4nKVxuICAuZmluZCggJCgnI2V2ZW4nKSApXG4gIC5vbignY2xpY2snLCBvbkV2ZW5JdGVtQ2xpY2spO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc2NyaXB0LmpzIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgbGlzdCA9IFtdO1xuXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblx0bGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuXHRcdHZhciByZXN1bHQgPSBbXTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSB0aGlzW2ldO1xuXHRcdFx0aWYoaXRlbVsyXSkge1xuXHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXN1bHQucHVzaChpdGVtWzFdKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHJlc3VsdC5qb2luKFwiXCIpO1xuXHR9O1xuXG5cdC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG5cdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcblx0XHRpZih0eXBlb2YgbW9kdWxlcyA9PT0gXCJzdHJpbmdcIilcblx0XHRcdG1vZHVsZXMgPSBbW251bGwsIG1vZHVsZXMsIFwiXCJdXTtcblx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaWQgPSB0aGlzW2ldWzBdO1xuXHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxuXHRcdFx0XHRhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG5cdFx0fVxuXHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gbW9kdWxlc1tpXTtcblx0XHRcdC8vIHNraXAgYWxyZWFkeSBpbXBvcnRlZCBtb2R1bGVcblx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXG5cdFx0XHQvLyAgd2hlbiBhIG1vZHVsZSBpcyBpbXBvcnRlZCBtdWx0aXBsZSB0aW1lcyB3aXRoIGRpZmZlcmVudCBtZWRpYSBxdWVyaWVzLlxuXHRcdFx0Ly8gIEkgaG9wZSB0aGlzIHdpbGwgbmV2ZXIgb2NjdXIgKEhleSB0aGlzIHdheSB3ZSBoYXZlIHNtYWxsZXIgYnVuZGxlcylcblx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XG5cdFx0XHRcdGlmKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcblx0XHRcdFx0XHRpdGVtWzJdID0gbWVkaWFRdWVyeTtcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcblx0XHRcdFx0XHRpdGVtWzJdID0gXCIoXCIgKyBpdGVtWzJdICsgXCIpIGFuZCAoXCIgKyBtZWRpYVF1ZXJ5ICsgXCIpXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0cmV0dXJuIGxpc3Q7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgeyBpc1N0cmluZywgaXNGdW5jLCBpc09iamVjdCwgcmVzdWx0LCBnZW5lcmF0ZUlkIH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBjb25zdCAkID0gKHNlbGVjdG9yKSA9PiBuZXcgalF1ZXJ5TW9jayhzZWxlY3Rvcik7XG4kLmxpc3RlbmVycyA9IFtdO1xuXG5jbGFzcyBqUXVlcnlNb2NrIHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcbiAgICBpZiAoIGlzU3RyaW5nKHNlbGVjdG9yKSApIHtcbiAgICAgIHRoaXMuX2N0eCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jdHggPSBbc2VsZWN0b3JdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZmluZChzZWxlY3Rvcikge1xuICAgIGlmICggaXNTdHJpbmcoc2VsZWN0b3IpICkge1xuICAgICAgdGhpcy5fY3R4ID0gdGhpcy5fY3R4LnJlZHVjZSgoYXJyLCBpdGVtKSA9PlxuICAgICAgICBbLi4uYXJyLCAuLi5BcnJheS5mcm9tKGl0ZW0ucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpXSwgW11cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2N0eCA9IHNlbGVjdG9yLl9jdHguZmlsdGVyKGl0ZW0gPT5cbiAgICAgICAgdGhpcy5fY3R4LnNvbWUocGFyZW50ID0+IHBhcmVudC5jb250YWlucyhpdGVtKSlcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBlYWNoKGZuKSB7XG4gICAgdGhpcy5fY3R4LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiBmbihpbmRleCwgaXRlbSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYXR0cihhdHRyaWJ1dGVOYW1lLCB2YWx1ZSkge1xuICAgIHJldHVybiB0aGlzLl9jdHgucmVkdWNlKChtZW1vLCBpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKCBpc09iamVjdChhdHRyaWJ1dGVOYW1lKSApIHtcbiAgICAgICAgICBmb3IgKGxldCBhdHRyIGluIGF0dHJpYnV0ZU5hbWUpIHtcbiAgICAgICAgICAgIGl0ZW1bYXR0cl0gPSBhdHRyaWJ1dGVOYW1lW2F0dHJdO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWVtbyB8fCBpdGVtLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICBpdGVtLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW1bYXR0cmlidXRlTmFtZV0gPSByZXN1bHQodmFsdWUsIGluZGV4KTtcbiAgICAgIH1cbiAgICB9LCBudWxsKSB8fCB0aGlzO1xuICB9XG5cbiAgaGFzQ2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N0eFswXS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbiAgfVxuXG4gIHRvZ2dsZUNsYXNzKGNsYXNzTmFtZSwgc3RhdGUpIHtcbiAgICBjb25zdCB0b2dnbGUgPSAoaXRlbSwgY2xhc3NlcykgPT4gaXRlbS5jbGFzc0xpc3QudG9nZ2xlKGNsYXNzZXMsIHN0YXRlKTtcbiAgICB0aGlzLl9jdHguZm9yRWFjaCgoaXRlbSwgaW5kZXgsIGFycikgPT4gdG9nZ2xlKGl0ZW0sIHJlc3VsdChjbGFzc05hbWUsIGluZGV4LCBpbmRleCwgYXJyKSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYWRkQ2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMudG9nZ2xlQ2xhc3MoY2xhc3NOYW1lLCB0cnVlKTtcbiAgfVxuXG4gIHJlbW92ZUNsYXNzKGNsYXNzTmFtZSkge1xuICAgIHJldHVybiB0aGlzLnRvZ2dsZUNsYXNzKGNsYXNzTmFtZSwgZmFsc2UpO1xuICB9XG5cbiAgLy8gTm90IGltcGxlbWVudGVkIGlmICghc2VsZWN0b3IgJiYgZGF0YSlcbiAgb24oZXZlbnRzLCBzZWxlY3RvciwgZGF0YSwgaGFuZGxlcikge1xuICAgIGlmIChoYW5kbGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGhhbmRsZXIgPSBzZWxlY3RvcjtcbiAgICAgIHNlbGVjdG9yID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgIHRoaXMuX2N0eC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICBjb25zdCBpdGVtcyA9IEFycmF5LmZyb20oaXRlbS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKSk7XG4gICAgICAgICAgaWYgKGl0ZW1zLmluY2x1ZGVzKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICAgIGV2ZW50LmRhdGEgPSBkYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGFuZGxlcihldmVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9zYXZlRXZlbnRMaXN0ZW5lcihpdGVtLCBldmVudHMsIGhhbmRsZXIpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2N0eC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRzLCBoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5fc2F2ZUV2ZW50TGlzdGVuZXIoaXRlbSwgZXZlbnRzLCBoYW5kbGVyKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gTm90IGltcGxlbWVudGVkIGlmIChzZWxlY3RvcilcbiAgb2ZmKGV2ZW50cywgaGFuZGxlcikge1xuICAgIGxldCBwcmVkaWNhdGU7XG5cbiAgICBpZiAoIWV2ZW50cykge1xuICAgICAgcHJlZGljYXRlID0gKGxpc3RlbmVyLCBpdGVtKSA9PlxuICAgICAgICBsaXN0ZW5lci5lbGVtSWQgPT09IGl0ZW0uZGF0YXNldC5pZDtcbiAgICB9IGVsc2UgaWYgKGhhbmRsZXIpIHtcbiAgICAgIHByZWRpY2F0ZSA9IChsaXN0ZW5lciwgaXRlbSkgPT5cbiAgICAgICAgbGlzdGVuZXIuZWxlbUlkID09PSBpdGVtLmRhdGFzZXQuaWQgJiYgbGlzdGVuZXIuZXZlbnRzID09PSBldmVudHMgJiYgbGlzdGVuZXIuaGFuZGxlciA9PT0gaGFuZGxlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJlZGljYXRlID0gKGxpc3RlbmVyLCBpdGVtKSA9PlxuICAgICAgICBsaXN0ZW5lci5lbGVtSWQgPT09IGl0ZW0uZGF0YXNldC5pZCAmJiBsaXN0ZW5lci5ldmVudHMgPT09IGV2ZW50cztcbiAgICB9XG5cbiAgICB0aGlzLl9jdHguZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9ICQubGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmIChwcmVkaWNhdGUoJC5saXN0ZW5lcnNbaV0sIGl0ZW0pKSB7XG4gICAgICAgICAgaXRlbS5yZW1vdmVFdmVudExpc3RlbmVyKCQubGlzdGVuZXJzW2ldLmV2ZW50cywgJC5saXN0ZW5lcnNbaV0uaGFuZGxlcik7XG4gICAgICAgICAgJC5saXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIF9zYXZlRXZlbnRMaXN0ZW5lcihlbGVtLCBldmVudHMsIGhhbmRsZXIpIHtcbiAgICBsZXQgZWxlbUlkID0gZWxlbS5kYXRhc2V0LmlkO1xuICAgIGlmICghZWxlbUlkKSB7XG4gICAgICBlbGVtSWQgPSBnZW5lcmF0ZUlkKCd4eHh4eHgnKTtcbiAgICAgIGVsZW0uZGF0YXNldC5pZCA9IGVsZW1JZDtcbiAgICB9XG5cbiAgICBjb25zdCBlbGVtSGFzTGlzdGVuZXIgPSAkLmxpc3RlbmVycy5zb21lKGl0ZW0gPT5cbiAgICAgIGl0ZW0uZWxlbUlkID09PSBlbGVtSWQgJiYgaXRlbS5ldmVudHMgPT09IGV2ZW50cyAmJiBpdGVtLmhhbmRsZXIgPT09IGhhbmRsZXJcbiAgICApO1xuXG4gICAgaWYgKCFlbGVtSGFzTGlzdGVuZXIpIHtcbiAgICAgICQubGlzdGVuZXJzLnB1c2goeyBlbGVtSWQsIGV2ZW50cywgaGFuZGxlciB9KTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL2pRdWVyeU1vY2suanMiLCJleHBvcnQgY29uc3QgaXNTdHJpbmcgPSB2YWwgPT4gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZyc7XG5cbmV4cG9ydCBjb25zdCBpc0Z1bmMgPSB2YWwgPT4gdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNvbnN0IGlzT2JqZWN0ID0gdmFsID0+IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xuXG5leHBvcnQgY29uc3QgcmVzdWx0ID0gKHByb3AsIC4uLmFyZ3MpID0+IGlzRnVuYyhwcm9wKSA/IHByb3AuYXBwbHkobnVsbCwgYXJncykgOiBwcm9wO1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVJZCA9IHN0ciA9PiBzdHIucmVwbGFjZSgvW3h5XS9nLCBjID0+IHtcbiAgbGV0IHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwO1xuICByZXR1cm4gKGMgPT09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCApKS50b1N0cmluZygxNik7XG59KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2pzL3V0aWxzLmpzIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiEgbm9ybWFsaXplLmNzcyB2NS4wLjAgfCBNSVQgTGljZW5zZSB8IGdpdGh1Yi5jb20vbmVjb2xhcy9ub3JtYWxpemUuY3NzICovaHRtbHtmb250LWZhbWlseTpzYW5zLXNlcmlmO2xpbmUtaGVpZ2h0OjEuMTU7LW1zLXRleHQtc2l6ZS1hZGp1c3Q6MTAwJTstd2Via2l0LXRleHQtc2l6ZS1hZGp1c3Q6MTAwJX1ib2R5e21hcmdpbjowfWFydGljbGUsYXNpZGUsZm9vdGVyLGhlYWRlcixuYXYsc2VjdGlvbntkaXNwbGF5OmJsb2NrfWgxe2ZvbnQtc2l6ZToyZW07bWFyZ2luOi42N2VtIDB9ZmlnY2FwdGlvbixmaWd1cmUsbWFpbntkaXNwbGF5OmJsb2NrfWZpZ3VyZXttYXJnaW46MWVtIDQwcHh9aHJ7Ym94LXNpemluZzpjb250ZW50LWJveDtoZWlnaHQ6MDtvdmVyZmxvdzp2aXNpYmxlfXByZXtmb250LWZhbWlseTptb25vc3BhY2UsbW9ub3NwYWNlO2ZvbnQtc2l6ZToxZW19YXtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50Oy13ZWJraXQtdGV4dC1kZWNvcmF0aW9uLXNraXA6b2JqZWN0c31hOmFjdGl2ZSxhOmhvdmVye291dGxpbmUtd2lkdGg6MH1hYmJyW3RpdGxlXXtib3JkZXItYm90dG9tOm5vbmU7dGV4dC1kZWNvcmF0aW9uOnVuZGVybGluZTt0ZXh0LWRlY29yYXRpb246dW5kZXJsaW5lIGRvdHRlZH1iLHN0cm9uZ3tmb250LXdlaWdodDppbmhlcml0O2ZvbnQtd2VpZ2h0OmJvbGRlcn1jb2RlLGtiZCxzYW1we2ZvbnQtZmFtaWx5Om1vbm9zcGFjZSxtb25vc3BhY2U7Zm9udC1zaXplOjFlbX1kZm57Zm9udC1zdHlsZTppdGFsaWN9bWFya3tiYWNrZ3JvdW5kLWNvbG9yOiNmZjA7Y29sb3I6IzAwMH1zbWFsbHtmb250LXNpemU6ODAlfXN1YixzdXB7Zm9udC1zaXplOjc1JTtsaW5lLWhlaWdodDowO3Bvc2l0aW9uOnJlbGF0aXZlO3ZlcnRpY2FsLWFsaWduOmJhc2VsaW5lfXN1Yntib3R0b206LS4yNWVtfXN1cHt0b3A6LS41ZW19YXVkaW8sdmlkZW97ZGlzcGxheTppbmxpbmUtYmxvY2t9YXVkaW86bm90KFtjb250cm9sc10pe2Rpc3BsYXk6bm9uZTtoZWlnaHQ6MH1pbWd7Ym9yZGVyLXN0eWxlOm5vbmV9c3ZnOm5vdCg6cm9vdCl7b3ZlcmZsb3c6aGlkZGVufWJ1dHRvbixpbnB1dCxvcHRncm91cCxzZWxlY3QsdGV4dGFyZWF7Zm9udC1mYW1pbHk6c2Fucy1zZXJpZjtmb250LXNpemU6MTAwJTtsaW5lLWhlaWdodDoxLjE1O21hcmdpbjowfWJ1dHRvbixpbnB1dHtvdmVyZmxvdzp2aXNpYmxlfWJ1dHRvbixzZWxlY3R7dGV4dC10cmFuc2Zvcm06bm9uZX1bdHlwZT1yZXNldF0sW3R5cGU9c3VibWl0XSxidXR0b24saHRtbCBbdHlwZT1idXR0b25dey13ZWJraXQtYXBwZWFyYW5jZTpidXR0b259W3R5cGU9YnV0dG9uXTo6LW1vei1mb2N1cy1pbm5lcixbdHlwZT1yZXNldF06Oi1tb3otZm9jdXMtaW5uZXIsW3R5cGU9c3VibWl0XTo6LW1vei1mb2N1cy1pbm5lcixidXR0b246Oi1tb3otZm9jdXMtaW5uZXJ7Ym9yZGVyLXN0eWxlOm5vbmU7cGFkZGluZzowfVt0eXBlPWJ1dHRvbl06LW1vei1mb2N1c3JpbmcsW3R5cGU9cmVzZXRdOi1tb3otZm9jdXNyaW5nLFt0eXBlPXN1Ym1pdF06LW1vei1mb2N1c3JpbmcsYnV0dG9uOi1tb3otZm9jdXNyaW5ne291dGxpbmU6MXB4IGRvdHRlZCBCdXR0b25UZXh0fWZpZWxkc2V0e2JvcmRlcjoxcHggc29saWQgc2lsdmVyO21hcmdpbjowIDJweDtwYWRkaW5nOi4zNWVtIC42MjVlbSAuNzVlbX1sZWdlbmR7Ym94LXNpemluZzpib3JkZXItYm94O2NvbG9yOmluaGVyaXQ7ZGlzcGxheTp0YWJsZTttYXgtd2lkdGg6MTAwJTtwYWRkaW5nOjA7d2hpdGUtc3BhY2U6bm9ybWFsfXByb2dyZXNze2Rpc3BsYXk6aW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOmJhc2VsaW5lfXRleHRhcmVhe292ZXJmbG93OmF1dG99W3R5cGU9Y2hlY2tib3hdLFt0eXBlPXJhZGlvXXtib3gtc2l6aW5nOmJvcmRlci1ib3g7cGFkZGluZzowfVt0eXBlPW51bWJlcl06Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b24sW3R5cGU9bnVtYmVyXTo6LXdlYmtpdC1vdXRlci1zcGluLWJ1dHRvbntoZWlnaHQ6YXV0b31bdHlwZT1zZWFyY2hdey13ZWJraXQtYXBwZWFyYW5jZTp0ZXh0ZmllbGQ7b3V0bGluZS1vZmZzZXQ6LTJweH1bdHlwZT1zZWFyY2hdOjotd2Via2l0LXNlYXJjaC1jYW5jZWwtYnV0dG9uLFt0eXBlPXNlYXJjaF06Oi13ZWJraXQtc2VhcmNoLWRlY29yYXRpb257LXdlYmtpdC1hcHBlYXJhbmNlOm5vbmV9Ojotd2Via2l0LWZpbGUtdXBsb2FkLWJ1dHRvbnstd2Via2l0LWFwcGVhcmFuY2U6YnV0dG9uO2ZvbnQ6aW5oZXJpdH1kZXRhaWxzLG1lbnV7ZGlzcGxheTpibG9ja31zdW1tYXJ5e2Rpc3BsYXk6bGlzdC1pdGVtfWNhbnZhc3tkaXNwbGF5OmlubGluZS1ibG9ja31baGlkZGVuXSx0ZW1wbGF0ZXtkaXNwbGF5Om5vbmV9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9jc3MtbG9hZGVyP21pbmltaXplIS4uL34vbm9ybWFsaXplLmNzcy9ub3JtYWxpemUuY3NzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcbmV4cG9ydHMuaShyZXF1aXJlKFwiLSEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9taW5pbWl6ZSFub3JtYWxpemUuY3NzL25vcm1hbGl6ZS5jc3NcIiksIFwiXCIpO1xuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImJvZHl7cGFkZGluZzoyMHB4fXVse3BhZGRpbmctbGVmdDoyMHB4O21hcmdpbi1ib3R0b206MjBweH1saXtmb250LXNpemU6MTZweDtwYWRkaW5nOjVweCAwO2N1cnNvcjpwb2ludGVyfWxpLmlzLWNsaWNrZWR7Y29sb3I6Z3JlZW47Zm9udC1zaXplOjE4cHh9bGkuaXMtY2xpY2tlZCNldmVue2NvbG9yOmJsdWV9bGlbY2xhc3MqPWV2ZW5de3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZX0uYnRue3BhZGRpbmc6NnB4IDEwcHh9LmJ0bjpub3QoW2Rpc2FibGVkXSl7Y3Vyc29yOnBvaW50ZXJ9LmJ0bltkaXNhYmxlZF17b3BhY2l0eTouNX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuLi9+L2Nzcy1sb2FkZXI/bWluaW1pemUhLi4vfi9zYXNzLWxvYWRlcj9yZXNvbHZlIHVybCEuL3N0eWxlLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbnZhciBzdHlsZXNJbkRvbSA9IHt9LFxuXHRtZW1vaXplID0gZnVuY3Rpb24oZm4pIHtcblx0XHR2YXIgbWVtbztcblx0XHRyZXR1cm4gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHRcdHJldHVybiBtZW1vO1xuXHRcdH07XG5cdH0sXG5cdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAvbXNpZSBbNi05XVxcYi8udGVzdChzZWxmLm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XG5cdH0pLFxuXHRnZXRIZWFkRWxlbWVudCA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcblx0fSksXG5cdHNpbmdsZXRvbkVsZW1lbnQgPSBudWxsLFxuXHRzaW5nbGV0b25Db3VudGVyID0gMCxcblx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AgPSBbXTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XG5cdGlmKHR5cGVvZiBERUJVRyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBERUJVRykge1xuXHRcdGlmKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHR9XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGV0b24gPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuc2luZ2xldG9uID0gaXNPbGRJRSgpO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiA8aGVhZD4uXG5cdGlmICh0eXBlb2Ygb3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ1bmRlZmluZWRcIikgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0KTtcblx0YWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKTtcblxuXHRyZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdG1heVJlbW92ZS5wdXNoKGRvbVN0eWxlKTtcblx0XHR9XG5cdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0dmFyIG5ld1N0eWxlcyA9IGxpc3RUb1N0eWxlcyhuZXdMaXN0KTtcblx0XHRcdGFkZFN0eWxlc1RvRG9tKG5ld1N0eWxlcywgb3B0aW9ucyk7XG5cdFx0fVxuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtYXlSZW1vdmUubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBkb21TdHlsZSA9IG1heVJlbW92ZVtpXTtcblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKVxuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKCk7XG5cdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHNbal0oaXRlbS5wYXJ0c1tqXSk7XG5cdFx0XHR9XG5cdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFyIHBhcnRzID0gW107XG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblx0XHRcdHN0eWxlc0luRG9tW2l0ZW0uaWRdID0ge2lkOiBpdGVtLmlkLCByZWZzOiAxLCBwYXJ0czogcGFydHN9O1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBsaXN0VG9TdHlsZXMobGlzdCkge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gaXRlbVswXTtcblx0XHR2YXIgY3NzID0gaXRlbVsxXTtcblx0XHR2YXIgbWVkaWEgPSBpdGVtWzJdO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdHZhciBwYXJ0ID0ge2NzczogY3NzLCBtZWRpYTogbWVkaWEsIHNvdXJjZU1hcDogc291cmNlTWFwfTtcblx0XHRpZighbmV3U3R5bGVzW2lkXSlcblx0XHRcdHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0ZWxzZVxuXHRcdFx0bmV3U3R5bGVzW2lkXS5wYXJ0cy5wdXNoKHBhcnQpO1xuXHR9XG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpIHtcblx0dmFyIGhlYWQgPSBnZXRIZWFkRWxlbWVudCgpO1xuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcFtzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZighbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3ApIHtcblx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgaGVhZC5maXJzdENoaWxkKTtcblx0XHR9IGVsc2UgaWYobGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpIHtcblx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRoZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG5cdFx0fVxuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGVFbGVtZW50KTtcblx0fSBlbHNlIGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcImJvdHRvbVwiKSB7XG5cdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHR9IGVsc2Uge1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciAnaW5zZXJ0QXQnLiBNdXN0IGJlICd0b3AnIG9yICdib3R0b20nLlwiKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KSB7XG5cdHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG5cdHZhciBpZHggPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlRWxlbWVudCk7XG5cdGlmKGlkeCA+PSAwKSB7XG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcblx0c3R5bGVFbGVtZW50LnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBzdHlsZUVsZW1lbnQpO1xuXHRyZXR1cm4gc3R5bGVFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKSB7XG5cdHZhciBsaW5rRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuXHRsaW5rRWxlbWVudC5yZWwgPSBcInN0eWxlc2hlZXRcIjtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmtFbGVtZW50KTtcblx0cmV0dXJuIGxpbmtFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcblx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XG5cblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cdFx0c3R5bGVFbGVtZW50ID0gc2luZ2xldG9uRWxlbWVudCB8fCAoc2luZ2xldG9uRWxlbWVudCA9IGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xuXHR9IGVsc2UgaWYob2JqLnNvdXJjZU1hcCAmJlxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwuY3JlYXRlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgVVJMLnJldm9rZU9iamVjdFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBidG9hID09PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVMaW5rRWxlbWVudChvcHRpb25zKTtcblx0XHR1cGRhdGUgPSB1cGRhdGVMaW5rLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KTtcblx0XHRyZW1vdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpO1xuXHRcdFx0aWYoc3R5bGVFbGVtZW50LmhyZWYpXG5cdFx0XHRcdFVSTC5yZXZva2VPYmplY3RVUkwoc3R5bGVFbGVtZW50LmhyZWYpO1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQpO1xuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG5cdFx0fTtcblx0fVxuXG5cdHVwZGF0ZShvYmopO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcblx0XHRpZihuZXdPYmopIHtcblx0XHRcdGlmKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcClcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXHRcdHJldHVybiB0ZXh0U3RvcmUuZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcbicpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZUVsZW1lbnQsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHR2YXIgY3NzID0gcmVtb3ZlID8gXCJcIiA6IG9iai5jc3M7XG5cblx0aWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlRWxlbWVudC5jaGlsZE5vZGVzO1xuXHRcdGlmIChjaGlsZE5vZGVzW2luZGV4XSkgc3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGVFbGVtZW50LCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblxuXHRpZihtZWRpYSkge1xuXHRcdHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSlcblx0fVxuXG5cdGlmKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0c3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuXHRcdFx0c3R5bGVFbGVtZW50LnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKTtcblx0XHR9XG5cdFx0c3R5bGVFbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmsobGlua0VsZW1lbnQsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIHNvdXJjZU1hcCA9IG9iai5zb3VyY2VNYXA7XG5cblx0aWYoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGlua0VsZW1lbnQuaHJlZjtcblxuXHRsaW5rRWxlbWVudC5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcblxuXHRpZihvbGRTcmMpXG5cdFx0VVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi4vfi9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcz9taW5pbWl6ZSEuLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanM/cmVzb2x2ZSB1cmwhLi9zdHlsZS5zY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzP21pbmltaXplIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcz9yZXNvbHZlIHVybCEuL3N0eWxlLnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzP21pbmltaXplIS4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcz9yZXNvbHZlIHVybCEuL3N0eWxlLnNjc3NcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3R5bGUuc2Nzc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9