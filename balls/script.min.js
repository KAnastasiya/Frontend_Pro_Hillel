/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = __webpack_require__(1);


/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	
	var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();
	
	var _utils = __webpack_require__(2);
	
	function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }
	
	/**
	 * DOM-элементы, к которым выполняется обращение
	 * @constant
	 * @type {Object}
	 */
	var ELEMENTS = {
	  canvas: document.querySelector('.balls-container--canvas'),
	  svg: document.querySelector('.balls-container--svg'),
	  modes: document.querySelector('.modes'),
	  modeCanvas: document.querySelector('input.modes-canvas'),
	  modeSvg: document.querySelector('input.modes-svg')
	};
	
	/**
	 * Настройки шаров
	 * @type {Object}
	 * @constant
	 */
	var BALLS_SETTINGS = {
	  minRadius: 10,
	  maxRadius: 30,
	  minDx: -10,
	  maxDx: 10,
	  minDy: -10,
	  maxDy: 10,
	  colors: ['#f44336', '#e91e63', '#9c27b0', '#2196f3', '#00bcd4', '#009688', '#4caf50', '#ff9800']
	};
	
	/**
	 * Скорость смены кадров (в миллисекундах).
	 * Для человеческого глаза оптимальная скорость - 60 кадров в секунду
	 * @type {Number}
	 * @constant
	 */
	var FRAMES_SPEED = 1000 / 60;
	
	/**
	 * Реализация оскока шара от границ контейнера. При этом скорость шара несколько замедляется
	 * @param  {Number} coord    Текущая координата шара
	 * @param  {Number} step     Шаг изменения координаты шара
	 * @param  {Number} radius   Радиус шара
	 * @param  {Number} maxCoord Максимальная допустимая координата шара
	 * @return {Number}
	 */
	var setBoundaries = function setBoundaries(coord, step, radius, maxCoord) {
	  return coord + step > maxCoord - radius || coord + step < radius ? -(0.95 * step) : step;
	};
	
	/**
	 * Контекст canvas, чрез который получается доступ к canvas
	 */
	var canvasContext = void 0;
	
	/**
	 * Идентификатор таймера запуска отрисовки новых кадров анимации
	 */
	var timerId = void 0;
	
	/**
	 * Список всех отрисованных шаров
	 * @type {Array}
	 * @constant
	 */
	var balls = [];
	
	/**
	 * Класс типа 'Шар'
	 * @type {Object}
	 * @constructor
	 */
	
	var Ball = function () {
	  function Ball(x, y) {
	    _classCallCheck(this, Ball);
	
	    this.x = x;
	    this.y = y;
	    this.id = 'circle_' + balls.length;
	    this.radius = (0, _utils.getRandomParam)(BALLS_SETTINGS.minRadius, BALLS_SETTINGS.maxRadius);
	    this.color = BALLS_SETTINGS.colors[(0, _utils.getRandomParam)(0, BALLS_SETTINGS.colors.length)];
	    this.dx = (0, _utils.getRandomParam)(BALLS_SETTINGS.minDx, BALLS_SETTINGS.maxDx);
	    this.dy = (0, _utils.getRandomParam)(BALLS_SETTINGS.minDy, BALLS_SETTINGS.maxDy);
	  }
	
	  _createClass(Ball, [{
	    key: 'drawOnCanvas',
	    value: function drawOnCanvas() {
	      canvasContext.beginPath();
	      canvasContext.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);
	      canvasContext.fillStyle = this.color;
	      canvasContext.fill();
	      canvasContext.closePath();
	    }
	  }, {
	    key: 'drawOnSvg',
	    value: function drawOnSvg() {
	      this.element = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
	      ELEMENTS.svg.appendChild(this.element);
	      this.element.setAttribute('id', this.id);
	      this.element.setAttribute('r', this.radius);
	      this.element.setAttribute('cx', this.x);
	      this.element.setAttribute('cy', this.y);
	      this.element.setAttribute('fill', this.color);
	    }
	  }, {
	    key: 'refreshPosOnSvg',
	    value: function refreshPosOnSvg() {
	      this.element.setAttribute('cx', this.x);
	      this.element.setAttribute('cy', this.y);
	    }
	  }]);
	
	  return Ball;
	}();
	
	/**
	 * Перебор шариков. Пересчет для каждого шарика новой позиции
	 * @param  {Number} maxWidth  Ширина контейнера, в котором перемещаются шарики
	 * @param  {Number} maxHeight Высота контейнера, в котором перемещаются шарики
	 * @param  {String} funcName  Название метода, который нужно вызвать для каждого шарика
	 */
	
	
	var repositionBalls = function repositionBalls(maxWidth, maxHeight, funcName) {
	  balls.forEach(function (ball) {
	    ball.x += ball.dx;
	    ball.y += ball.dy;
	    ball.dx = setBoundaries(ball.x, ball.dx, ball.radius, maxWidth);
	    ball.dy = setBoundaries(ball.y, ball.dy, ball.radius, maxHeight);
	    ball[funcName]();
	  });
	};
	
	/**
	 * Отрисовка кадра на canvas
	 */
	var drawOnCanvasFrame = function drawOnCanvasFrame() {
	  if (balls.length) {
	    (0, _utils.clearCanvas)(ELEMENTS.canvas, canvasContext);
	    canvasContext.globalCompositeOperation = 'lighten';
	    repositionBalls((0, _utils.getCanvasSize)(ELEMENTS.canvas).width, (0, _utils.getCanvasSize)(ELEMENTS.canvas).height, 'drawOnCanvas');
	  }
	  timerId = requestAnimationFrame(drawOnCanvasFrame, FRAMES_SPEED);
	};
	
	/**
	 * Отрисовка кадра на svg
	 */
	var drawOnSvgFrame = function drawOnSvgFrame() {
	  if (balls.length) {
	    var svgSize = ELEMENTS.svg.getBoundingClientRect();
	    var svgWidth = svgSize.width || svgSize.right - svgSize.left;
	    var svgHeight = svgSize.height || svgSize.bottom - svgSize.top;
	    repositionBalls(svgWidth, svgHeight, 'refreshPosOnSvg');
	  }
	  timerId = requestAnimationFrame(drawOnSvgFrame, FRAMES_SPEED);
	};
	
	/**
	 * Установка режима 'Canvas'
	 */
	var setCanvasMode = function setCanvasMode() {
	  ELEMENTS.modeCanvas.checked = true;
	  ELEMENTS.svg.style.display = 'none';
	  ELEMENTS.canvas.style.display = 'block';
	  canvasContext = ELEMENTS.canvas.getContext('2d');
	  drawOnCanvasFrame();
	  ELEMENTS.svg.innerHTML = '';
	};
	
	/**
	 * Установка режима 'Svg'
	 */
	var setSvgMode = function setSvgMode() {
	  ELEMENTS.modeSvg.checked = true;
	  ELEMENTS.canvas.style.display = 'none';
	  ELEMENTS.svg.style.display = 'block';
	  drawOnSvgFrame();
	  if (canvasContext) {
	    (0, _utils.clearCanvas)(ELEMENTS.canvas, canvasContext);
	  }
	};
	
	/**
	 * Создание экземпляра типа 'Шарик'
	 * @param  {Object} event
	 * @return {Array}         Созданный экземпляр шарика
	 */
	var createBallByEvent = function createBallByEvent(event) {
	  var mousePos = (0, _utils.getMousePosition)(event);
	  var ball = new Ball(mousePos.x, mousePos.y);
	  balls.push(ball);
	  return ball;
	};
	
	/**
	 * Обработчик события нажатия по области canvas
	 * @param  {Object} event
	 */
	var onCanvasClick = function onCanvasClick(event) {
	  createBallByEvent(event);
	};
	
	/**
	 * Обработчик события нажатия по области svg
	 * @param  {Object} event
	 */
	var onSvgClick = function onSvgClick(event) {
	  var ball = createBallByEvent(event);
	  ball.drawOnSvg();
	};
	
	/**
	 * Обработчик события нажатия на переключатель режимов
	 * @param  {Object} event
	 */
	var onModeClick = function onModeClick(event) {
	  // Очистка списка ранее созданных шариков. Сброс таймера отрисовки кадров анимации
	  balls = [];
	  cancelAnimationFrame(timerId);
	
	  // Переключение режима
	  if (event.target.classList.contains('modes-canvas')) {
	    setCanvasMode();
	  } else {
	    setSvgMode();
	  }
	};
	
	// Навешивание обработчиков событий
	ELEMENTS.modes.addEventListener('click', onModeClick);
	ELEMENTS.canvas.addEventListener('click', onCanvasClick);
	ELEMENTS.svg.addEventListener('click', onSvgClick);
	
	// Инициализация приложения
	setCanvasMode();

/***/ },
/* 2 */
/***/ function(module, exports) {

	"use strict";
	
	Object.defineProperty(exports, "__esModule", {
	  value: true
	});
	/**
	 * Получение случайного целого неравномерно распределенного числа между min (включительно) и max (не включая max)
	 * @param  {Number} min Минимальное значение параметра
	 * @param  {Number} max Максимальное значение параметра
	 * @return {Number}
	 */
	var getRandomParam = exports.getRandomParam = function getRandomParam(min, max) {
	  var res = void 0;
	  // Цикл do while исключает получение нуля
	  do {
	    res = Math.floor(Math.random() * (max - min) + min);
	  } while (!res);
	  return res;
	};
	
	/**
	 * Определение координат мыши
	 * @param  {Object} event Событие, вызвавшее данную функцию
	 * @return {Object}
	 */
	var getMousePosition = exports.getMousePosition = function getMousePosition(event) {
	  var rect = event.target.getBoundingClientRect();
	  return {
	    x: event.clientX - rect.left,
	    y: event.clientY - rect.top
	  };
	};
	
	/**
	 * Получение размеров canvas
	 * @param  {Element} canvas DOM-элемент для canvas
	 * @return {Object}
	 */
	var getCanvasSize = exports.getCanvasSize = function getCanvasSize(canvas) {
	  return {
	    width: canvas.width,
	    height: canvas.height
	  };
	};
	
	/**
	 * Очистка canvas
	 * @param  {Element} canvas        DOM-элемент для canvas
	 * @param  {Object}  canvasContext Контекст canvas
	 */
	var clearCanvas = exports.clearCanvas = function clearCanvas(canvas, canvasContext) {
	  canvasContext.clearRect(0, 0, getCanvasSize(canvas).width, getCanvasSize(canvas).height);
	};

/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMWM4ZDU1ZTZjNWI5ZDIwN2NmZjgiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdXRpbHMuanMiXSwibmFtZXMiOlsiRUxFTUVOVFMiLCJjYW52YXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdmciLCJtb2RlcyIsIm1vZGVDYW52YXMiLCJtb2RlU3ZnIiwiQkFMTFNfU0VUVElOR1MiLCJtaW5SYWRpdXMiLCJtYXhSYWRpdXMiLCJtaW5EeCIsIm1heER4IiwibWluRHkiLCJtYXhEeSIsImNvbG9ycyIsIkZSQU1FU19TUEVFRCIsInNldEJvdW5kYXJpZXMiLCJjb29yZCIsInN0ZXAiLCJyYWRpdXMiLCJtYXhDb29yZCIsImNhbnZhc0NvbnRleHQiLCJ0aW1lcklkIiwiYmFsbHMiLCJCYWxsIiwieCIsInkiLCJpZCIsImxlbmd0aCIsImNvbG9yIiwiZHgiLCJkeSIsImJlZ2luUGF0aCIsImFyYyIsIk1hdGgiLCJQSSIsImZpbGxTdHlsZSIsImZpbGwiLCJjbG9zZVBhdGgiLCJlbGVtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiYXBwZW5kQ2hpbGQiLCJzZXRBdHRyaWJ1dGUiLCJyZXBvc2l0aW9uQmFsbHMiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImZ1bmNOYW1lIiwiZm9yRWFjaCIsImJhbGwiLCJkcmF3T25DYW52YXNGcmFtZSIsImdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZHJhd09uU3ZnRnJhbWUiLCJzdmdTaXplIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwic3ZnV2lkdGgiLCJyaWdodCIsImxlZnQiLCJzdmdIZWlnaHQiLCJib3R0b20iLCJ0b3AiLCJzZXRDYW52YXNNb2RlIiwiY2hlY2tlZCIsInN0eWxlIiwiZGlzcGxheSIsImdldENvbnRleHQiLCJpbm5lckhUTUwiLCJzZXRTdmdNb2RlIiwiY3JlYXRlQmFsbEJ5RXZlbnQiLCJldmVudCIsIm1vdXNlUG9zIiwicHVzaCIsIm9uQ2FudmFzQ2xpY2siLCJvblN2Z0NsaWNrIiwiZHJhd09uU3ZnIiwib25Nb2RlQ2xpY2siLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldFJhbmRvbVBhcmFtIiwibWluIiwibWF4IiwicmVzIiwiZmxvb3IiLCJyYW5kb20iLCJnZXRNb3VzZVBvc2l0aW9uIiwicmVjdCIsImNsaWVudFgiLCJjbGllbnRZIiwiZ2V0Q2FudmFzU2l6ZSIsImNsZWFyQ2FudmFzIiwiY2xlYXJSZWN0Il0sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdENBOzs7O0FBRUE7Ozs7O0FBS0EsS0FBTUEsV0FBVztBQUNmQyxXQUFRQyxTQUFTQyxhQUFULENBQXVCLDBCQUF2QixDQURPO0FBRWZDLFFBQUtGLFNBQVNDLGFBQVQsQ0FBdUIsdUJBQXZCLENBRlU7QUFHZkUsVUFBT0gsU0FBU0MsYUFBVCxDQUF1QixRQUF2QixDQUhRO0FBSWZHLGVBQVlKLFNBQVNDLGFBQVQsQ0FBdUIsb0JBQXZCLENBSkc7QUFLZkksWUFBU0wsU0FBU0MsYUFBVCxDQUF1QixpQkFBdkI7QUFMTSxFQUFqQjs7QUFRQTs7Ozs7QUFLQSxLQUFNSyxpQkFBaUI7QUFDckJDLGNBQVcsRUFEVTtBQUVyQkMsY0FBVyxFQUZVO0FBR3JCQyxVQUFPLENBQUMsRUFIYTtBQUlyQkMsVUFBTyxFQUpjO0FBS3JCQyxVQUFPLENBQUMsRUFMYTtBQU1yQkMsVUFB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Ryw4Q0FBbUIsU0FBbkJBLGdCQUFtQixDQUFDbEIsS0FBRCxFQUFXO0FBQ3pDLE9BQU1tQixPQUFPbkIsTUFBTVEsTUFBTixDQUFhdkIscUJBQWIsRUFBYjtBQUNBLFVBQU87QUFDTC9CLFFBQUc4QyxNQUFNb0IsT0FBTixHQUFnQkQsS0FBSy9CLElBRG5CO0FBRUxqQyxRQUFHNkMsTUFBTXFCLE9BQU4sR0FBZ0JGLEtBQUs1QjtBQUZuQixJQUFQO0FBSUQsRUFOTTs7QUFRUDs7Ozs7QUFLTyxLQUFNK0Isd0NBQWdCLFNBQWhCQSxhQUFnQjtBQUFBLFVBQVc7QUFDdEMxQyxZQUFPbkQsT0FBT21ELEtBRHdCO0FBRXRDQyxhQUFRcEQsT0FBT29EO0FBRnVCLElBQVg7QUFBQSxFQUF0Qjs7QUFLUDs7Ozs7QUFLTyxLQUFNMEMsb0NBQWMsU0FBZEEsV0FBYyxDQUFDOUYsTUFBRCxFQUFTcUIsYUFBVCxFQUEyQjtBQUNwREEsaUJBQWMwRSxTQUFkLENBQXdCLENBQXhCLEVBQTJCLENBQTNCLEVBQThCRixjQUFjN0YsTUFBZCxFQUFzQm1ELEtBQXBELEVBQTJEMEMsY0FBYzdGLE1BQWQsRUFBc0JvRCxNQUFqRjtBQUNELEVBRk0sQyIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAxYzhkNTVlNmM1YjlkMjA3Y2ZmOCIsImltcG9ydCB7IGdldFJhbmRvbVBhcmFtLCBnZXRNb3VzZVBvc2l0aW9uLCBnZXRDYW52YXNTaXplLCBjbGVhckNhbnZhcyB9IGZyb20gJy4vanMvdXRpbHMnO1xuXG4vKipcbiAqIERPTS3RjdC70LXQvNC10L3RgtGLLCDQuiDQutC+0YLQvtGA0YvQvCDQstGL0L/QvtC70L3Rj9C10YLRgdGPINC+0LHRgNCw0YnQtdC90LjQtVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5jb25zdCBFTEVNRU5UUyA9IHtcbiAgY2FudmFzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFsbHMtY29udGFpbmVyLS1jYW52YXMnKSxcbiAgc3ZnOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFsbHMtY29udGFpbmVyLS1zdmcnKSxcbiAgbW9kZXM6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlcycpLFxuICBtb2RlQ2FudmFzOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dC5tb2Rlcy1jYW52YXMnKSxcbiAgbW9kZVN2ZzogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXQubW9kZXMtc3ZnJyksXG59O1xuXG4vKipcbiAqINCd0LDRgdGC0YDQvtC50LrQuCDRiNCw0YDQvtCyXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQGNvbnN0YW50XG4gKi9cbmNvbnN0IEJBTExTX1NFVFRJTkdTID0ge1xuICBtaW5SYWRpdXM6IDEwLFxuICBtYXhSYWRpdXM6IDMwLFxuICBtaW5EeDogLTEwLFxuICBtYXhEeDogMTAsXG4gIG1pbkR5OiAtMTAsXG4gIG1heER5OiAxMCxcbiAgY29sb3JzOiBbJyNmNDQzMzYnLCAnI2U5MWU2MycsICcjOWMyN2IwJywgJyMyMTk2ZjMnLCAnIzAwYmNkNCcsICcjMDA5Njg4JywgJyM0Y2FmNTAnLCAnI2ZmOTgwMCddLFxufTtcblxuLyoqXG4gKiDQodC60L7RgNC+0YHRgtGMINGB0LzQtdC90Ysg0LrQsNC00YDQvtCyICjQsiDQvNC40LvQu9C40YHQtdC60YPQvdC00LDRhSkuXG4gKiDQlNC70Y8g0YfQtdC70L7QstC10YfQtdGB0LrQvtCz0L4g0LPQu9Cw0LfQsCDQvtC/0YLQuNC80LDQu9GM0L3QsNGPINGB0LrQvtGA0L7RgdGC0YwgLSA2MCDQutCw0LTRgNC+0LIg0LIg0YHQtdC60YPQvdC00YNcbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKiBAY29uc3RhbnRcbiAqL1xuY29uc3QgRlJBTUVTX1NQRUVEID0gMTAwMCAvIDYwO1xuXG4vKipcbiAqINCg0LXQsNC70LjQt9Cw0YbQuNGPINC+0YHQutC+0LrQsCDRiNCw0YDQsCDQvtGCINCz0YDQsNC90LjRhiDQutC+0L3RgtC10LnQvdC10YDQsC4g0J/RgNC4INGN0YLQvtC8INGB0LrQvtGA0L7RgdGC0Ywg0YjQsNGA0LAg0L3QtdGB0LrQvtC70YzQutC+INC30LDQvNC10LTQu9GP0LXRgtGB0Y9cbiAqIEBwYXJhbSAge051bWJlcn0gY29vcmQgICAg0KLQtdC60YPRidCw0Y8g0LrQvtC+0YDQtNC40L3QsNGC0LAg0YjQsNGA0LBcbiAqIEBwYXJhbSAge051bWJlcn0gc3RlcCAgICAg0KjQsNCzINC40LfQvNC10L3QtdC90LjRjyDQutC+0L7RgNC00LjQvdCw0YLRiyDRiNCw0YDQsFxuICogQHBhcmFtICB7TnVtYmVyfSByYWRpdXMgICDQoNCw0LTQuNGD0YEg0YjQsNGA0LBcbiAqIEBwYXJhbSAge051bWJlcn0gbWF4Q29vcmQg0JzQsNC60YHQuNC80LDQu9GM0L3QsNGPINC00L7Qv9GD0YHRgtC40LzQsNGPINC60L7QvtGA0LTQuNC90LDRgtCwINGI0LDRgNCwXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cbmNvbnN0IHNldEJvdW5kYXJpZXMgPSAoY29vcmQsIHN0ZXAsIHJhZGl1cywgbWF4Q29vcmQpID0+XG4gICgoY29vcmQgKyBzdGVwID4gbWF4Q29vcmQgLSByYWRpdXMpIHx8IChjb29yZCArIHN0ZXAgPCByYWRpdXMpKSA/IC0oMC45NSAqIHN0ZXApIDogc3RlcDtcblxuLyoqXG4gKiDQmtC+0L3RgtC10LrRgdGCIGNhbnZhcywg0YfRgNC10Lcg0LrQvtGC0L7RgNGL0Lkg0L/QvtC70YPRh9Cw0LXRgtGB0Y8g0LTQvtGB0YLRg9C/INC6IGNhbnZhc1xuICovXG5sZXQgY2FudmFzQ29udGV4dDtcblxuLyoqXG4gKiDQmNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgCDRgtCw0LnQvNC10YDQsCDQt9Cw0L/Rg9GB0LrQsCDQvtGC0YDQuNGB0L7QstC60Lgg0L3QvtCy0YvRhSDQutCw0LTRgNC+0LIg0LDQvdC40LzQsNGG0LjQuFxuICovXG5sZXQgdGltZXJJZDtcblxuLyoqXG4gKiDQodC/0LjRgdC+0Log0LLRgdC10YUg0L7RgtGA0LjRgdC+0LLQsNC90L3Ri9GFINGI0LDRgNC+0LJcbiAqIEB0eXBlIHtBcnJheX1cbiAqIEBjb25zdGFudFxuICovXG5sZXQgYmFsbHMgPSBbXTtcblxuLyoqXG4gKiDQmtC70LDRgdGBINGC0LjQv9CwICfQqNCw0YAnXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmNsYXNzIEJhbGwge1xuICBjb25zdHJ1Y3Rvcih4LCB5KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMuaWQgPSBgY2lyY2xlXyR7YmFsbHMubGVuZ3RofWA7XG4gICAgdGhpcy5yYWRpdXMgPSBnZXRSYW5kb21QYXJhbShCQUxMU19TRVRUSU5HUy5taW5SYWRpdXMsIEJBTExTX1NFVFRJTkdTLm1heFJhZGl1cyk7XG4gICAgdGhpcy5jb2xvciA9IEJBTExTX1NFVFRJTkdTLmNvbG9yc1tnZXRSYW5kb21QYXJhbSgwLCBCQUxMU19TRVRUSU5HUy5jb2xvcnMubGVuZ3RoKV07XG4gICAgdGhpcy5keCA9IGdldFJhbmRvbVBhcmFtKEJBTExTX1NFVFRJTkdTLm1pbkR4LCBCQUxMU19TRVRUSU5HUy5tYXhEeCk7XG4gICAgdGhpcy5keSA9IGdldFJhbmRvbVBhcmFtKEJBTExTX1NFVFRJTkdTLm1pbkR5LCBCQUxMU19TRVRUSU5HUy5tYXhEeSk7XG4gIH1cblxuICBkcmF3T25DYW52YXMoKSB7XG4gICAgY2FudmFzQ29udGV4dC5iZWdpblBhdGgoKTtcbiAgICBjYW52YXNDb250ZXh0LmFyYyh0aGlzLngsIHRoaXMueSwgdGhpcy5yYWRpdXMsIDAsIDIgKiBNYXRoLlBJKTtcbiAgICBjYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7XG4gICAgY2FudmFzQ29udGV4dC5maWxsKCk7XG4gICAgY2FudmFzQ29udGV4dC5jbG9zZVBhdGgoKTtcbiAgfVxuXG4gIGRyYXdPblN2ZygpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2NpcmNsZScpO1xuICAgIEVMRU1FTlRTLnN2Zy5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2lkJywgdGhpcy5pZCk7XG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgncicsIHRoaXMucmFkaXVzKTtcbiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdjeCcsIHRoaXMueCk7XG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnY3knLCB0aGlzLnkpO1xuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2ZpbGwnLCB0aGlzLmNvbG9yKTtcbiAgfVxuXG4gIHJlZnJlc2hQb3NPblN2ZygpIHtcbiAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdjeCcsIHRoaXMueCk7XG4gICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgnY3knLCB0aGlzLnkpO1xuICB9XG59XG5cbi8qKlxuICog0J/QtdGA0LXQsdC+0YAg0YjQsNGA0LjQutC+0LIuINCf0LXRgNC10YHRh9C10YIg0LTQu9GPINC60LDQttC00L7Qs9C+INGI0LDRgNC40LrQsCDQvdC+0LLQvtC5INC/0L7Qt9C40YbQuNC4XG4gKiBAcGFyYW0gIHtOdW1iZXJ9IG1heFdpZHRoICDQqNC40YDQuNC90LAg0LrQvtC90YLQtdC50L3QtdGA0LAsINCyINC60L7RgtC+0YDQvtC8INC/0LXRgNC10LzQtdGJ0LDRjtGC0YHRjyDRiNCw0YDQuNC60LhcbiAqIEBwYXJhbSAge051bWJlcn0gbWF4SGVpZ2h0INCS0YvRgdC+0YLQsCDQutC+0L3RgtC10LnQvdC10YDQsCwg0LIg0LrQvtGC0L7RgNC+0Lwg0L/QtdGA0LXQvNC10YnQsNGO0YLRgdGPINGI0LDRgNC40LrQuFxuICogQHBhcmFtICB7U3RyaW5nfSBmdW5jTmFtZSAg0J3QsNC30LLQsNC90LjQtSDQvNC10YLQvtC00LAsINC60L7RgtC+0YDRi9C5INC90YPQttC90L4g0LLRi9C30LLQsNGC0Ywg0LTQu9GPINC60LDQttC00L7Qs9C+INGI0LDRgNC40LrQsFxuICovXG5jb25zdCByZXBvc2l0aW9uQmFsbHMgPSAobWF4V2lkdGgsIG1heEhlaWdodCwgZnVuY05hbWUpID0+IHtcbiAgYmFsbHMuZm9yRWFjaCgoYmFsbCkgPT4ge1xuICAgIGJhbGwueCArPSBiYWxsLmR4O1xuICAgIGJhbGwueSArPSBiYWxsLmR5O1xuICAgIGJhbGwuZHggPSBzZXRCb3VuZGFyaWVzKGJhbGwueCwgYmFsbC5keCwgYmFsbC5yYWRpdXMsIG1heFdpZHRoKTtcbiAgICBiYWxsLmR5ID0gc2V0Qm91bmRhcmllcyhiYWxsLnksIGJhbGwuZHksIGJhbGwucmFkaXVzLCBtYXhIZWlnaHQpO1xuICAgIGJhbGxbZnVuY05hbWVdKCk7XG4gIH0pO1xufTtcblxuLyoqXG4gKiDQntGC0YDQuNGB0L7QstC60LAg0LrQsNC00YDQsCDQvdCwIGNhbnZhc1xuICovXG5jb25zdCBkcmF3T25DYW52YXNGcmFtZSA9ICgpID0+IHtcbiAgaWYgKGJhbGxzLmxlbmd0aCkge1xuICAgIGNsZWFyQ2FudmFzKEVMRU1FTlRTLmNhbnZhcywgY2FudmFzQ29udGV4dCk7XG4gICAgY2FudmFzQ29udGV4dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnbGlnaHRlbic7XG4gICAgcmVwb3NpdGlvbkJhbGxzKGdldENhbnZhc1NpemUoRUxFTUVOVFMuY2FudmFzKS53aWR0aCwgZ2V0Q2FudmFzU2l6ZShFTEVNRU5UUy5jYW52YXMpLmhlaWdodCwgJ2RyYXdPbkNhbnZhcycpO1xuICB9XG4gIHRpbWVySWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd09uQ2FudmFzRnJhbWUsIEZSQU1FU19TUEVFRCk7XG59O1xuXG4vKipcbiAqINCe0YLRgNC40YHQvtCy0LrQsCDQutCw0LTRgNCwINC90LAgc3ZnXG4gKi9cbmNvbnN0IGRyYXdPblN2Z0ZyYW1lID0gKCkgPT4ge1xuICBpZiAoYmFsbHMubGVuZ3RoKSB7XG4gICAgY29uc3Qgc3ZnU2l6ZSA9IEVMRU1FTlRTLnN2Zy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBzdmdXaWR0aCA9IHN2Z1NpemUud2lkdGggfHwgc3ZnU2l6ZS5yaWdodCAtIHN2Z1NpemUubGVmdDtcbiAgICBjb25zdCBzdmdIZWlnaHQgPSBzdmdTaXplLmhlaWdodCB8fCBzdmdTaXplLmJvdHRvbSAtIHN2Z1NpemUudG9wO1xuICAgIHJlcG9zaXRpb25CYWxscyhzdmdXaWR0aCwgc3ZnSGVpZ2h0LCAncmVmcmVzaFBvc09uU3ZnJyk7XG4gIH1cbiAgdGltZXJJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3T25TdmdGcmFtZSwgRlJBTUVTX1NQRUVEKTtcbn07XG5cbi8qKlxuICog0KPRgdGC0LDQvdC+0LLQutCwINGA0LXQttC40LzQsCAnQ2FudmFzJ1xuICovXG5jb25zdCBzZXRDYW52YXNNb2RlID0gKCkgPT4ge1xuICBFTEVNRU5UUy5tb2RlQ2FudmFzLmNoZWNrZWQgPSB0cnVlO1xuICBFTEVNRU5UUy5zdmcuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgRUxFTUVOVFMuY2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICBjYW52YXNDb250ZXh0ID0gRUxFTUVOVFMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gIGRyYXdPbkNhbnZhc0ZyYW1lKCk7XG4gIEVMRU1FTlRTLnN2Zy5pbm5lckhUTUwgPSAnJztcbn07XG5cbi8qKlxuICog0KPRgdGC0LDQvdC+0LLQutCwINGA0LXQttC40LzQsCAnU3ZnJ1xuICovXG5jb25zdCBzZXRTdmdNb2RlID0gKCkgPT4ge1xuICBFTEVNRU5UUy5tb2RlU3ZnLmNoZWNrZWQgPSB0cnVlO1xuICBFTEVNRU5UUy5jYW52YXMuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgRUxFTUVOVFMuc3ZnLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICBkcmF3T25TdmdGcmFtZSgpO1xuICBpZiAoY2FudmFzQ29udGV4dCkge1xuICAgIGNsZWFyQ2FudmFzKEVMRU1FTlRTLmNhbnZhcywgY2FudmFzQ29udGV4dCk7XG4gIH1cbn07XG5cbi8qKlxuICog0KHQvtC30LTQsNC90LjQtSDRjdC60LfQtdC80L/Qu9GP0YDQsCDRgtC40L/QsCAn0KjQsNGA0LjQuidcbiAqIEBwYXJhbSAge09iamVjdH0gZXZlbnRcbiAqIEByZXR1cm4ge0FycmF5fSAgICAgICAgINCh0L7Qt9C00LDQvdC90YvQuSDRjdC60LfQtdC80L/Qu9GP0YAg0YjQsNGA0LjQutCwXG4gKi9cbmNvbnN0IGNyZWF0ZUJhbGxCeUV2ZW50ID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IG1vdXNlUG9zID0gZ2V0TW91c2VQb3NpdGlvbihldmVudCk7XG4gIGNvbnN0IGJhbGwgPSBuZXcgQmFsbChtb3VzZVBvcy54LCBtb3VzZVBvcy55KTtcbiAgYmFsbHMucHVzaChiYWxsKTtcbiAgcmV0dXJuIGJhbGw7XG59O1xuXG4vKipcbiAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC90LDQttCw0YLQuNGPINC/0L4g0L7QsdC70LDRgdGC0LggY2FudmFzXG4gKiBAcGFyYW0gIHtPYmplY3R9IGV2ZW50XG4gKi9cbmNvbnN0IG9uQ2FudmFzQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgY3JlYXRlQmFsbEJ5RXZlbnQoZXZlbnQpO1xufTtcblxuLyoqXG4gKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQvdCw0LbQsNGC0LjRjyDQv9C+INC+0LHQu9Cw0YHRgtC4IHN2Z1xuICogQHBhcmFtICB7T2JqZWN0fSBldmVudFxuICovXG5jb25zdCBvblN2Z0NsaWNrID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IGJhbGwgPSBjcmVhdGVCYWxsQnlFdmVudChldmVudCk7XG4gIGJhbGwuZHJhd09uU3ZnKCk7XG59O1xuXG4vKipcbiAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC90LDQttCw0YLQuNGPINC90LAg0L/QtdGA0LXQutC70Y7Rh9Cw0YLQtdC70Ywg0YDQtdC20LjQvNC+0LJcbiAqIEBwYXJhbSAge09iamVjdH0gZXZlbnRcbiAqL1xuY29uc3Qgb25Nb2RlQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgLy8g0J7Rh9C40YHRgtC60LAg0YHQv9C40YHQutCwINGA0LDQvdC10LUg0YHQvtC30LTQsNC90L3Ri9GFINGI0LDRgNC40LrQvtCyLiDQodCx0YDQvtGBINGC0LDQudC80LXRgNCwINC+0YLRgNC40YHQvtCy0LrQuCDQutCw0LTRgNC+0LIg0LDQvdC40LzQsNGG0LjQuFxuICBiYWxscyA9IFtdO1xuICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aW1lcklkKTtcblxuICAvLyDQn9C10YDQtdC60LvRjtGH0LXQvdC40LUg0YDQtdC20LjQvNCwXG4gIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2Rlcy1jYW52YXMnKSkge1xuICAgIHNldENhbnZhc01vZGUoKTtcbiAgfSBlbHNlIHtcbiAgICBzZXRTdmdNb2RlKCk7XG4gIH1cbn07XG5cbi8vINCd0LDQstC10YjQuNCy0LDQvdC40LUg0L7QsdGA0LDQsdC+0YLRh9C40LrQvtCyINGB0L7QsdGL0YLQuNC5XG5FTEVNRU5UUy5tb2Rlcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uTW9kZUNsaWNrKTtcbkVMRU1FTlRTLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2FudmFzQ2xpY2spO1xuRUxFTUVOVFMuc3ZnLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25TdmdDbGljayk7XG5cbi8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC/0YDQuNC70L7QttC10L3QuNGPXG5zZXRDYW52YXNNb2RlKCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2NyaXB0LmpzIiwiLyoqXG4gKiDQn9C+0LvRg9GH0LXQvdC40LUg0YHQu9GD0YfQsNC50L3QvtCz0L4g0YbQtdC70L7Qs9C+INC90LXRgNCw0LLQvdC+0LzQtdGA0L3QviDRgNCw0YHQv9GA0LXQtNC10LvQtdC90L3QvtCz0L4g0YfQuNGB0LvQsCDQvNC10LbQtNGDIG1pbiAo0LLQutC70Y7Rh9C40YLQtdC70YzQvdC+KSDQuCBtYXggKNC90LUg0LLQutC70Y7Rh9Cw0Y8gbWF4KVxuICogQHBhcmFtICB7TnVtYmVyfSBtaW4g0JzQuNC90LjQvNCw0LvRjNC90L7QtSDQt9C90LDRh9C10L3QuNC1INC/0LDRgNCw0LzQtdGC0YDQsFxuICogQHBhcmFtICB7TnVtYmVyfSBtYXgg0JzQsNC60YHQuNC80LDQu9GM0L3QvtC1INC30L3QsNGH0LXQvdC40LUg0L/QsNGA0LDQvNC10YLRgNCwXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRSYW5kb21QYXJhbSA9IChtaW4sIG1heCkgPT4ge1xuICBsZXQgcmVzO1xuICAvLyDQptC40LrQuyBkbyB3aGlsZSDQuNGB0LrQu9GO0YfQsNC10YIg0L/QvtC70YPRh9C10L3QuNC1INC90YPQu9GPXG4gIGRvIHtcbiAgICByZXMgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikpICsgbWluKTtcbiAgfSB3aGlsZSAoIXJlcyk7XG4gIHJldHVybiByZXM7XG59O1xuXG4vKipcbiAqINCe0L/RgNC10LTQtdC70LXQvdC40LUg0LrQvtC+0YDQtNC40L3QsNGCINC80YvRiNC4XG4gKiBAcGFyYW0gIHtPYmplY3R9IGV2ZW50INCh0L7QsdGL0YLQuNC1LCDQstGL0LfQstCw0LLRiNC10LUg0LTQsNC90L3Rg9GOINGE0YPQvdC60YbQuNGOXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRNb3VzZVBvc2l0aW9uID0gKGV2ZW50KSA9PiB7XG4gIGNvbnN0IHJlY3QgPSBldmVudC50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiB7XG4gICAgeDogZXZlbnQuY2xpZW50WCAtIHJlY3QubGVmdCxcbiAgICB5OiBldmVudC5jbGllbnRZIC0gcmVjdC50b3AsXG4gIH07XG59O1xuXG4vKipcbiAqINCf0L7Qu9GD0YfQtdC90LjQtSDRgNCw0LfQvNC10YDQvtCyIGNhbnZhc1xuICogQHBhcmFtICB7RWxlbWVudH0gY2FudmFzIERPTS3RjdC70LXQvNC10L3RgiDQtNC70Y8gY2FudmFzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmV4cG9ydCBjb25zdCBnZXRDYW52YXNTaXplID0gY2FudmFzID0+ICh7XG4gIHdpZHRoOiBjYW52YXMud2lkdGgsXG4gIGhlaWdodDogY2FudmFzLmhlaWdodCxcbn0pO1xuXG4vKipcbiAqINCe0YfQuNGB0YLQutCwIGNhbnZhc1xuICogQHBhcmFtICB7RWxlbWVudH0gY2FudmFzICAgICAgICBET00t0Y3Qu9C10LzQtdC90YIg0LTQu9GPIGNhbnZhc1xuICogQHBhcmFtICB7T2JqZWN0fSAgY2FudmFzQ29udGV4dCDQmtC+0L3RgtC10LrRgdGCIGNhbnZhc1xuICovXG5leHBvcnQgY29uc3QgY2xlYXJDYW52YXMgPSAoY2FudmFzLCBjYW52YXNDb250ZXh0KSA9PiB7XG4gIGNhbnZhc0NvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGdldENhbnZhc1NpemUoY2FudmFzKS53aWR0aCwgZ2V0Q2FudmFzU2l6ZShjYW52YXMpLmhlaWdodCk7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL3V0aWxzLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==