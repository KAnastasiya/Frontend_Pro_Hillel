!function(e){function t(a){if(r[a])return r[a].exports;var o=r[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var o=r(2),i=a(o),s={playlist:document.querySelector(".playlist"),tracksList:document.querySelectorAll("li.track"),video:document.querySelector("video"),videoMp4:document.querySelector(".video__src--mp4"),videoOgg:document.querySelector(".video__src--ogg"),videoWebm:document.querySelector(".video__src--webm"),videoOverlay:document.querySelector(".video-overlay")},n={currentTrack:"track--current",playTrack:"video-overlay--play",pauseTrack:"video-overlay--pause",showOverlayBtn:"show",showOverlayBtnAlways:"show--always"},d="data-id",c=4,l=10,v=5e3,u=1e3,y=c,p=l,m=void 0,k=void 0,_=function(){for(var e=0;e<s.tracksList.length;e++)s.tracksList[e].classList.remove(n.currentTrack);s.playlist.children[y].classList.add(n.currentTrack),h()},h=function(){var e=i.default.tracks[y];s.video.poster="server/"+e.poster;var t="server/"+e.src;s.videoMp4.src=t+".mp4",s.videoOgg.src=t+".ogg",s.videoWebm.src=t+".webm",s.video.load()},g=function(e){"pause"===e?(s.videoOverlay.classList.remove(n.playTrack),s.videoOverlay.classList.add(n.pauseTrack)):(s.videoOverlay.classList.remove(n.pauseTrack),s.videoOverlay.classList.add(n.playTrack))},f=function(){s.video.play(),g("pause")},L=function(){s.video.pause(),g("play")},O=function(){s.video.paused?f():L()},T=function(e){var t=i.default.tracks[e],r=document.createElement("p");r.className="video-overlay__text video-overlay__text--next-song",r.innerText=t.song,s.videoOverlay.appendChild(r);var a=document.createElement("span");a.innerText=t.artist,r.appendChild(a);var o=document.createElement("p");o.className="video-overlay__text video-overlay__text--timeout",o.innerText="Next track",s.videoOverlay.appendChild(o);var n=document.createElement("span");o.appendChild(n)},x=function(e){e.target.classList.contains("track")&&(y=e.target.getAttribute(d)||e.target.parentElement.getAttribute(d),_())},S=function(){var e=document.querySelectorAll(".video-overlay__text");if(e.length>0)for(var t=0;t<e.length;t++)s.videoOverlay.removeChild(e[t]);g("pause"),s.videoOverlay.classList.remove(n.showOverlayBtnAlways),s.video.addEventListener("click",E)},w=function(){var e=+y+1<s.tracksList.length?+y+1:0;y=e,g("play"),T(e),s.videoOverlay.classList.add(n.showOverlayBtnAlways),s.video.removeEventListener("click",E),k=setInterval(function(){p>0?(document.querySelector(".video-overlay__text--timeout span").innerText=" ("+p+" сек)",p-=1):(clearInterval(k),p=l,_())},u)},E=function(){O()},b=function(){document.querySelector(".video-overlay__text")?(clearInterval(k),_()):O()},q=function(){s.videoOverlay.classList.add(n.showOverlayBtn),clearTimeout(m),m=setTimeout(function(){s.videoOverlay.classList.remove(n.showOverlayBtn)},v)};_(),s.video.volume=.2,s.playlist.addEventListener("click",x),s.videoOverlay.addEventListener("click",b),s.video.addEventListener("click",E),s.video.addEventListener("mousemove",q),s.video.addEventListener("playing",S),s.video.addEventListener("ended",w)},function(e,t){e.exports={tracks:[{id:"0",artist:"Loboda",song:"Твои глаза",poster:"Loboda/your_eyes.jpg",src:"Loboda/your_eyes"},{id:"1",artist:"Shakira",song:"Chantaje",poster:"Shakira/chantaje.jpg",src:"Shakira/chantaje"},{id:"2",artist:"Shakira ft. Rihanna",song:"Can't Remember to Forget You",poster:"Shakira/can't_remember_to_forget_you.jpg",src:"Shakira/can't_remember_to_forget_you"},{id:"3",artist:"The Hardkiss",song:"Rain",poster:"The_Hardkiss/rain.jpg",src:"The_Hardkiss/rain"},{id:"4",artist:"The Hardkiss",song:"Stones",poster:"The_Hardkiss/stones.jpg",src:"The_Hardkiss/stones"}]}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2NyaXB0LmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA1MTNlMWU1MjgwNWY0MWU3MzQyZiIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0LmpzIiwid2VicGFjazovLy8uL3NlcnZlci90cmFja3MuanNvbiJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfdHJhY2tzIiwiX3RyYWNrczIiLCJFTEVNRU5UUyIsInBsYXlsaXN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidHJhY2tzTGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ2aWRlbyIsInZpZGVvTXA0IiwidmlkZW9PZ2ciLCJ2aWRlb1dlYm0iLCJ2aWRlb092ZXJsYXkiLCJDTEFTU0VTIiwiY3VycmVudFRyYWNrIiwicGxheVRyYWNrIiwicGF1c2VUcmFjayIsInNob3dPdmVybGF5QnRuIiwic2hvd092ZXJsYXlCdG5BbHdheXMiLCJUUkFDS19JRF9BVFRSIiwiREVGQVVMVF9UUkFDS19JRCIsIlRJTUVPVVRfTkVYVF9UUkFDS19BVVRPUExBWSIsIlRJTUVPVVRfU0hPV19PVkVSTEFZX0JUTiIsIklOVEVSVkFMX1VQREFURV9USU1FX1RPX1NUQVJUX05FWFRfVFJBQ0siLCJjdXJyZW50VHJhY2tJZCIsInRpbWVUb1N0YXJ0TmV4dFRyYWNrIiwidGltZW91dFNob3dCdG4iLCJ0aW1lb3V0TmV4dFRyYWNrQXV0b3BsYXkiLCJjaG9zZVRyYWNrSW5MaXN0IiwiaSIsImxlbmd0aCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImNoaWxkcmVuIiwiYWRkIiwic2V0VHJhY2tEYXRhSW5WaWRlbyIsInRyYWNrSW5mbyIsInRyYWNrcyIsInBvc3RlciIsInBhdGgiLCJzcmMiLCJsb2FkIiwic2V0T3ZlcmxheUJ0biIsImJ0blR5cGUiLCJwbGF5VmlkZW8iLCJwbGF5IiwicGF1c2VWaWRlbyIsInBhdXNlIiwiY2hhbmdlVmlkZW9TdGF0ZSIsInBhdXNlZCIsInNob3dJbmZvQWJvdXROZXh0VHJhY2siLCJ0cmFja0lkIiwic29uZyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJpbm5lclRleHQiLCJhcHBlbmRDaGlsZCIsImFydGlzdCIsInRpbWVvdXQiLCJ0aW1lIiwib25QbGF5TGlzdENsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjb250YWlucyIsImdldEF0dHJpYnV0ZSIsInBhcmVudEVsZW1lbnQiLCJvblZpZGVvU3RhcnRQbGF5aW5nIiwidGV4dExpc3QiLCJyZW1vdmVDaGlsZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvblZpZGVvQ2xpY2siLCJvblZpZGVvRW5kZWQiLCJuZXh0VHJhY2tJZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJvblZpZGVvT3ZlcmxheUNsaWNrIiwib25WaWRlb01vdXNlTW92ZSIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJ2b2x1bWUiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBcUNBLE9BVEFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVB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QzdDM0UsRUFBU00sTUFBTTZELGlCQUFpQixVQUFXSCxHQUMzQ2hFLEVBQVNNLE1BQU02RCxpQkFBaUIsUUFBU0UsSUYrRG5DLFNBQVNsRixFQUFRRCxHR25WdkJDLEVBQUFELFNBQ0FpRCxTQUVBL0MsR0FBQSxJQUNBbUUsT0FBQSxTQUNBTCxLQUFBLGFBQ0FkLE9BQUEsdUJBQ0FFLElBQUEscUJBR0FsRCxHQUFBLElBQ0FtRSxPQUFBLFVBQ0FMLEtBQUEsV0FDQWQsT0FBQSx1QkFDQUUsSUFBQSxxQkFHQWxELEdBQUEsSUFDQW1FLE9BQUEsc0JBQ0FMLEtBQUEsK0JBQ0FkLE9BQUEsMkNBQ0FFLElBQUEseUNBR0FsRCxHQUFBLElBQ0FtRSxPQUFBLGVBQ0FMLEtBQUEsT0FDQWQsT0FBQSx3QkFDQUUsSUFBQSxzQkFHQWxELEdBQUEsSUFDQW1FLE9BQUEsZUFDQUwsS0FBQSxTQUNBZCxPQUFBLDBCQUNBRSxJQUFBIiwiZmlsZSI6InNjcmlwdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3RyYWNrcyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgX3RyYWNrczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFja3MpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdC8qKlxuXHQgKiBET00t0Y3Qu9C10LzQtdC90YLRiywg0Log0LrQvtGC0L7RgNGL0Lwg0LLRi9C/0L7Qu9C90Y/QtdGC0YHRjyDQvtCx0YDQsNGJ0LXQvdC40LVcblx0ICogQHR5cGUge09iamVjdH1cblx0ICogQGNvbnN0YW50XG5cdCAqL1xuXHR2YXIgRUxFTUVOVFMgPSB7XG5cdCAgcGxheWxpc3Q6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5bGlzdCcpLFxuXHQgIHRyYWNrc0xpc3Q6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpLnRyYWNrJyksXG5cdCAgdmlkZW86IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3ZpZGVvJyksXG5cdCAgdmlkZW9NcDQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fc3JjLS1tcDQnKSxcblx0ICB2aWRlb09nZzogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX19zcmMtLW9nZycpLFxuXHQgIHZpZGVvV2VibTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX19zcmMtLXdlYm0nKSxcblx0ICB2aWRlb092ZXJsYXk6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlby1vdmVybGF5Jylcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDQndCw0LfQstCw0L3QuNGPINC60LvQsNGB0YHQvtCyLCDQutC+0YLQvtGA0YvQtSDQv9GA0LjRgdCy0LDQuNCy0LDRjtGC0YHRjyDRjdC70LXQvNC10L3RgtCw0Lxcblx0ICogQHR5cGUge09iamVjdH1cblx0ICogQGNvbnN0YW50XG5cdCAqL1xuXHR2YXIgQ0xBU1NFUyA9IHtcblx0ICBjdXJyZW50VHJhY2s6ICd0cmFjay0tY3VycmVudCcsXG5cdCAgcGxheVRyYWNrOiAndmlkZW8tb3ZlcmxheS0tcGxheScsXG5cdCAgcGF1c2VUcmFjazogJ3ZpZGVvLW92ZXJsYXktLXBhdXNlJyxcblx0ICBzaG93T3ZlcmxheUJ0bjogJ3Nob3cnLFxuXHQgIHNob3dPdmVybGF5QnRuQWx3YXlzOiAnc2hvdy0tYWx3YXlzJ1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqINCd0LDQt9Cy0LDQvdC40LUg0LDRgtGA0LjQsdGD0YLQsCwg0L3QsCDQvtGB0L3QvtCy0LDQvdC40Lgg0LfQvdCw0YfQtdC90LjRjyDQutC+0YLQvtGA0L7Qs9C+INC30LDQv9GA0LDRiNC40LLQsNGO0YLRgdGPINC00LDQvdC90YvQtSDQv9C+INGC0YDQtdC60YMg0YEg0YHQtdGA0LLQtdGA0LBcblx0ICogQHR5cGUge1N0cmluZ31cblx0ICogQGNvbnN0YW50XG5cdCAqL1xuXHR2YXIgVFJBQ0tfSURfQVRUUiA9ICdkYXRhLWlkJztcblx0XG5cdC8qKlxuXHQgKiDQmNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgCDRgtGA0LXQutCwINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOXG5cdCAqIEB0eXBlIHtOdW1iZXJ9XG5cdCAqIEBjb25zdGFudFxuXHQgKi9cblx0dmFyIERFRkFVTFRfVFJBQ0tfSUQgPSA0O1xuXHRcblx0LyoqXG5cdCAqINCj0YDQvtCy0LXQvdGMINC30LLRg9C60LAg0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNGPINCy0LjQtNC10L4g0L/QviDRg9C80L7Qu9GH0LDQvdC40Y5cblx0ICogQHR5cGUge051bWJlcn1cblx0ICogQGNvbnN0YW50XG5cdCAqL1xuXHR2YXIgREVGQVVMVF9WT0xVTUVfTEVWRUwgPSAwLjI7XG5cdFxuXHQvKipcblx0ICog0JLRgNC10LzRjywg0YfQtdGA0LXQtyDQutC+0YLQvtGA0L7QtSDQsdGD0LTQtdGCINC30LDQv9GD0YnQtdC9INGB0LvQtdC00YPRjtGJ0LjQuSDRgtGA0LXQuiDQuNC3INC/0LvQtdC50LvQuNGB0YLQsCAo0LIg0YHQtdC60YPQvdC00LDRhSlcblx0ICogQHR5cGUge051bWJlcn1cblx0ICogQGNvbnN0YW50XG5cdCAqL1xuXHR2YXIgVElNRU9VVF9ORVhUX1RSQUNLX0FVVE9QTEFZID0gMTA7XG5cdFxuXHQvKipcblx0ICog0JLRgNC10LzRjywg0YfQtdGA0LXQtyDQutC+0YLQvtGA0L7QtSDQutC90L7Qv9C60LAg0YPQv9GA0LDQstC70LXQvdC40Y8g0LLQuNC00LXQviDQsdGD0LTQtdGCINGB0LrRgNGL0YLQsCAo0LIg0LzQuNC70LvQuNGB0LXQutGD0L3QtNCw0YUpXG5cdCAqIEB0eXBlIHtOdW1iZXJ9XG5cdCAqIEBjb25zdGFudFxuXHQgKi9cblx0dmFyIFRJTUVPVVRfU0hPV19PVkVSTEFZX0JUTiA9IDUwMDA7XG5cdFxuXHQvKipcblx0ICog0KfQsNGB0YLQvtGC0LAg0L7QsdC90L7QstC70LXQvdC40Y8g0LLRgNC10LzQtdC90LgsINC+0YHRgtCw0LLRiNC10LPQvtGB0Y8g0LTQviDQsNCy0YLQvtC30LDQv9GD0YHQutCwINGB0LvQtdC00YPRjtGJ0LXQs9C+INGC0YDQtdC60LAgKNCyINC80LjQu9C70LjRgdC10LrRg9C90LTQsNGFKVxuXHQgKiBAdHlwZSB7TnVtYmVyfVxuXHQgKiBAY29uc3RhbnRcblx0ICovXG5cdHZhciBJTlRFUlZBTF9VUERBVEVfVElNRV9UT19TVEFSVF9ORVhUX1RSQUNLID0gMTAwMDtcblx0XG5cdC8qKlxuXHQgKiBJRCDRgtC10LrRg9GJ0LXQs9C+INGC0YDQtdC60LBcblx0ICogQHR5cGUge051bWJlcn1cblx0ICovXG5cdHZhciBjdXJyZW50VHJhY2tJZCA9IERFRkFVTFRfVFJBQ0tfSUQ7XG5cdFxuXHQvKipcblx0ICog0KHRh9C10YLRh9C40Log0L7RgdGC0LDQstGI0LXQs9C+0YHRjyDQstGA0LXQvNC10L3QuCDQtNC+INCw0LLRgtC+0LfQsNC/0YPRgdC60LAg0YHQu9C10LTRg9GO0YnQtdCz0L4g0YLRgNC10LrQsFxuXHQgKiBAdHlwZSB7TnVtYmVyfVxuXHQgKi9cblx0dmFyIHRpbWVUb1N0YXJ0TmV4dFRyYWNrID0gVElNRU9VVF9ORVhUX1RSQUNLX0FVVE9QTEFZO1xuXHRcblx0LyoqXG5cdCAqINCY0LTQtdC90YLQuNGE0LjQutCw0YLQvtGAINGC0LDQudC80LDRg9GC0LAg0YHQutGA0YvRgtC40Y8g0LrQvdC+0L/QutC4INGD0L/RgNCw0LLQu9C10L3QuNGPINCy0LjQtNC10L4sINGA0LDRgdC/0L7Qu9C+0LbQtdC90L3QvtC5INC90LAg0LLQuNC00LXQvlxuXHQgKiDQmNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0LTQu9GPINC+0YfQuNGB0YLQutC4INGB0L7QvtGC0LLQtdGC0YHRgtCy0YPRjtGJ0LXQs9C+INGC0LDQudC80LDRg9GC0LBcblx0ICogQHR5cGUge051bWJlcn1cblx0ICovXG5cdHZhciB0aW1lb3V0U2hvd0J0biA9IHZvaWQgMDtcblx0XG5cdC8qKlxuXHQgKiDQmNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgCDRgtCw0LnQvNCw0YPRgtCwINCw0LLRgtC+0LfQsNC/0YPRgdC60LAg0YHQu9C10LTRg9GO0YnQtdCz0L4g0YLRgNC10LrQsFxuXHQgKiDQmNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0LTQu9GPINC+0YfQuNGB0YLQutC4INGB0L7QvtGC0LLQtdGC0YHRgtCy0YPRjtGJ0LXQs9C+INGC0LDQudC80LDRg9GC0LBcblx0ICogQHR5cGUge051bWJlcn1cblx0ICovXG5cdHZhciB0aW1lb3V0TmV4dFRyYWNrQXV0b3BsYXkgPSB2b2lkIDA7XG5cdFxuXHQvKipcblx0ICog0JLRi9Cx0L7RgCDRgtGA0LXQutCwINCyINC/0LvQtdC50LvQuNGB0YLQtVxuXHQgKi9cblx0dmFyIGNob3NlVHJhY2tJbkxpc3QgPSBmdW5jdGlvbiBjaG9zZVRyYWNrSW5MaXN0KCkge1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgRUxFTUVOVFMudHJhY2tzTGlzdC5sZW5ndGg7IGkrKykge1xuXHQgICAgRUxFTUVOVFMudHJhY2tzTGlzdFtpXS5jbGFzc0xpc3QucmVtb3ZlKENMQVNTRVMuY3VycmVudFRyYWNrKTtcblx0ICB9XG5cdCAgRUxFTUVOVFMucGxheWxpc3QuY2hpbGRyZW5bY3VycmVudFRyYWNrSWRdLmNsYXNzTGlzdC5hZGQoQ0xBU1NFUy5jdXJyZW50VHJhY2spO1xuXHQgIHNldFRyYWNrRGF0YUluVmlkZW8oKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDQl9Cw0LPRgNGD0LfQutCwINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INGC0YDQtdC60LUg0LIg0YLQtdCzIHZpZGVvXG5cdCAqL1xuXHR2YXIgc2V0VHJhY2tEYXRhSW5WaWRlbyA9IGZ1bmN0aW9uIHNldFRyYWNrRGF0YUluVmlkZW8oKSB7XG5cdCAgdmFyIHRyYWNrSW5mbyA9IF90cmFja3MyLmRlZmF1bHQudHJhY2tzW2N1cnJlbnRUcmFja0lkXTtcblx0ICBFTEVNRU5UUy52aWRlby5wb3N0ZXIgPSAnc2VydmVyLycgKyB0cmFja0luZm8ucG9zdGVyO1xuXHRcblx0ICB2YXIgcGF0aCA9ICdzZXJ2ZXIvJyArIHRyYWNrSW5mby5zcmM7XG5cdCAgRUxFTUVOVFMudmlkZW9NcDQuc3JjID0gcGF0aCArICcubXA0Jztcblx0ICBFTEVNRU5UUy52aWRlb09nZy5zcmMgPSBwYXRoICsgJy5vZ2cnO1xuXHQgIEVMRU1FTlRTLnZpZGVvV2VibS5zcmMgPSBwYXRoICsgJy53ZWJtJztcblx0ICBFTEVNRU5UUy52aWRlby5sb2FkKCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICog0JjQt9C80LXQvdC10L3QuNC1INC60L3QvtC/0LrQuCwg0L7RgtC+0LHRgNCw0LbQsNC10LzQvtC5INC90LAg0LLQuNC00LXQvlxuXHQgKiBAcGFyYW0gIHtTdHJpbmd9IGJ0blR5cGUg0KLQuNC/INC60L3QvtC/0LrQuFxuXHQgKi9cblx0dmFyIHNldE92ZXJsYXlCdG4gPSBmdW5jdGlvbiBzZXRPdmVybGF5QnRuKGJ0blR5cGUpIHtcblx0ICBpZiAoYnRuVHlwZSA9PT0gJ3BhdXNlJykge1xuXHQgICAgRUxFTUVOVFMudmlkZW9PdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NFUy5wbGF5VHJhY2spO1xuXHQgICAgRUxFTUVOVFMudmlkZW9PdmVybGF5LmNsYXNzTGlzdC5hZGQoQ0xBU1NFUy5wYXVzZVRyYWNrKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgRUxFTUVOVFMudmlkZW9PdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NFUy5wYXVzZVRyYWNrKTtcblx0ICAgIEVMRU1FTlRTLnZpZGVvT3ZlcmxheS5jbGFzc0xpc3QuYWRkKENMQVNTRVMucGxheVRyYWNrKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICog0JfQsNC/0YPRgdC6INCy0L7RgdC/0YDQvtC40LfQstC10LTQtdC90LjRjyDQstC40LTQtdC+XG5cdCAqL1xuXHR2YXIgcGxheVZpZGVvID0gZnVuY3Rpb24gcGxheVZpZGVvKCkge1xuXHQgIEVMRU1FTlRTLnZpZGVvLnBsYXkoKTtcblx0ICBzZXRPdmVybGF5QnRuKCdwYXVzZScpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqINCf0YDQuNC+0YHRgtCw0L3QvtCy0LrQsCDQstC40LTQtdC+ICjQv9Cw0YPQt9CwKVxuXHQgKi9cblx0dmFyIHBhdXNlVmlkZW8gPSBmdW5jdGlvbiBwYXVzZVZpZGVvKCkge1xuXHQgIEVMRU1FTlRTLnZpZGVvLnBhdXNlKCk7XG5cdCAgc2V0T3ZlcmxheUJ0bigncGxheScpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqINCj0L/RgNCw0LLQu9C10L3QuNC1INCy0L7RgdC/0YDQvtC40LfQstC10LTQtdC90LjQtdC8INCy0LjQtNC10L5cblx0ICovXG5cdHZhciBjaGFuZ2VWaWRlb1N0YXRlID0gZnVuY3Rpb24gY2hhbmdlVmlkZW9TdGF0ZSgpIHtcblx0ICBpZiAoRUxFTUVOVFMudmlkZW8ucGF1c2VkKSB7XG5cdCAgICBwbGF5VmlkZW8oKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcGF1c2VWaWRlbygpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiDQntGC0YDQuNGB0L7QstC60LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0YHQu9C10LTRg9GO0YnQtdC8INGC0YDQtdC60LVcblx0ICogQHBhcmFtICB7TnVtYmVyfSB0cmFja0lkINCY0LTQtdC90YLQuNGE0LjQutCw0YLQvtGAINGC0YDQtdC60LBcblx0ICovXG5cdHZhciBzaG93SW5mb0Fib3V0TmV4dFRyYWNrID0gZnVuY3Rpb24gc2hvd0luZm9BYm91dE5leHRUcmFjayh0cmFja0lkKSB7XG5cdCAgdmFyIHRyYWNrSW5mbyA9IF90cmFja3MyLmRlZmF1bHQudHJhY2tzW3RyYWNrSWRdO1xuXHRcblx0ICB2YXIgc29uZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcblx0ICBzb25nLmNsYXNzTmFtZSA9ICd2aWRlby1vdmVybGF5X190ZXh0IHZpZGVvLW92ZXJsYXlfX3RleHQtLW5leHQtc29uZyc7XG5cdCAgc29uZy5pbm5lclRleHQgPSB0cmFja0luZm8uc29uZztcblx0ICBFTEVNRU5UUy52aWRlb092ZXJsYXkuYXBwZW5kQ2hpbGQoc29uZyk7XG5cdFxuXHQgIHZhciBhcnRpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdCAgYXJ0aXN0LmlubmVyVGV4dCA9IHRyYWNrSW5mby5hcnRpc3Q7XG5cdCAgc29uZy5hcHBlbmRDaGlsZChhcnRpc3QpO1xuXHRcblx0ICB2YXIgdGltZW91dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcblx0ICB0aW1lb3V0LmNsYXNzTmFtZSA9ICd2aWRlby1vdmVybGF5X190ZXh0IHZpZGVvLW92ZXJsYXlfX3RleHQtLXRpbWVvdXQnO1xuXHQgIHRpbWVvdXQuaW5uZXJUZXh0ID0gJ05leHQgdHJhY2snO1xuXHQgIEVMRU1FTlRTLnZpZGVvT3ZlcmxheS5hcHBlbmRDaGlsZCh0aW1lb3V0KTtcblx0XG5cdCAgdmFyIHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cdCAgdGltZW91dC5hcHBlbmRDaGlsZCh0aW1lKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQstGL0LHQvtGA0LAg0L3QvtCy0L7Qs9C+INGC0YDQtdC60LBcblx0ICogQHBhcmFtICB7T2JqZWN0fSBldmVudFxuXHQgKi9cblx0dmFyIG9uUGxheUxpc3RDbGljayA9IGZ1bmN0aW9uIG9uUGxheUxpc3RDbGljayhldmVudCkge1xuXHQgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0cmFjaycpKSB7XG5cdCAgICBjdXJyZW50VHJhY2tJZCA9IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoVFJBQ0tfSURfQVRUUikgfHwgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFRSQUNLX0lEX0FUVFIpO1xuXHQgICAgY2hvc2VUcmFja0luTGlzdCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQt9Cw0L/Rg9GB0LrQsCDQstC+0YHQv9GA0L7QuNC30LLQtdC00LXQvdC40Y8g0LLQuNC00LXQvlxuXHQgKi9cblx0dmFyIG9uVmlkZW9TdGFydFBsYXlpbmcgPSBmdW5jdGlvbiBvblZpZGVvU3RhcnRQbGF5aW5nKCkge1xuXHQgIHZhciB0ZXh0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy52aWRlby1vdmVybGF5X190ZXh0Jyk7XG5cdCAgaWYgKHRleHRMaXN0Lmxlbmd0aCA+IDApIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGV4dExpc3QubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgRUxFTUVOVFMudmlkZW9PdmVybGF5LnJlbW92ZUNoaWxkKHRleHRMaXN0W2ldKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgc2V0T3ZlcmxheUJ0bigncGF1c2UnKTtcblx0ICBFTEVNRU5UUy52aWRlb092ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShDTEFTU0VTLnNob3dPdmVybGF5QnRuQWx3YXlzKTtcblx0ICBFTEVNRU5UUy52aWRlby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVmlkZW9DbGljayk7XG5cdH07XG5cdFxuXHQvKipcblx0ICog0J7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8g0LfQsNCy0LXRgNGI0LXQvdC40Y8g0L/RgNC+0LjQs9GA0YvQstCw0L3QuNGPINCy0LjQtNC10L5cblx0ICovXG5cdHZhciBvblZpZGVvRW5kZWQgPSBmdW5jdGlvbiBvblZpZGVvRW5kZWQoKSB7XG5cdCAgdmFyIG5leHRUcmFja0lkID0gK2N1cnJlbnRUcmFja0lkICsgMSA8IEVMRU1FTlRTLnRyYWNrc0xpc3QubGVuZ3RoID8gK2N1cnJlbnRUcmFja0lkICsgMSA6IDA7XG5cdCAgY3VycmVudFRyYWNrSWQgPSBuZXh0VHJhY2tJZDtcblx0ICBzZXRPdmVybGF5QnRuKCdwbGF5Jyk7XG5cdCAgc2hvd0luZm9BYm91dE5leHRUcmFjayhuZXh0VHJhY2tJZCk7XG5cdCAgRUxFTUVOVFMudmlkZW9PdmVybGF5LmNsYXNzTGlzdC5hZGQoQ0xBU1NFUy5zaG93T3ZlcmxheUJ0bkFsd2F5cyk7XG5cdCAgRUxFTUVOVFMudmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblZpZGVvQ2xpY2spO1xuXHRcblx0ICB0aW1lb3V0TmV4dFRyYWNrQXV0b3BsYXkgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAodGltZVRvU3RhcnROZXh0VHJhY2sgPiAwKSB7XG5cdCAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlby1vdmVybGF5X190ZXh0LS10aW1lb3V0IHNwYW4nKS5pbm5lclRleHQgPSAnICgnICsgdGltZVRvU3RhcnROZXh0VHJhY2sgKyAnIFxcdTA0NDFcXHUwNDM1XFx1MDQzQSknO1xuXHQgICAgICB0aW1lVG9TdGFydE5leHRUcmFjayAtPSAxO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lb3V0TmV4dFRyYWNrQXV0b3BsYXkpO1xuXHQgICAgICB0aW1lVG9TdGFydE5leHRUcmFjayA9IFRJTUVPVVRfTkVYVF9UUkFDS19BVVRPUExBWTtcblx0ICAgICAgY2hvc2VUcmFja0luTGlzdCgpO1xuXHQgICAgfVxuXHQgIH0sIElOVEVSVkFMX1VQREFURV9USU1FX1RPX1NUQVJUX05FWFRfVFJBQ0spO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC90LDQttCw0YLQuNGPINC90LAg0LLQuNC00LXQvlxuXHQgKi9cblx0dmFyIG9uVmlkZW9DbGljayA9IGZ1bmN0aW9uIG9uVmlkZW9DbGljaygpIHtcblx0ICBjaGFuZ2VWaWRlb1N0YXRlKCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICog0J7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8g0L3QsNC20LDRgtC40Y8g0L3QsCDQutC90L7Qv9C60YMsINGA0LDQt9C80LXRidC10L3QvdGD0Y4g0L3QsCDQstC40LTQtdC+XG5cdCAqL1xuXHR2YXIgb25WaWRlb092ZXJsYXlDbGljayA9IGZ1bmN0aW9uIG9uVmlkZW9PdmVybGF5Q2xpY2soKSB7XG5cdCAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlby1vdmVybGF5X190ZXh0JykpIHtcblx0ICAgIGNsZWFySW50ZXJ2YWwodGltZW91dE5leHRUcmFja0F1dG9wbGF5KTtcblx0ICAgIGNob3NlVHJhY2tJbkxpc3QoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgY2hhbmdlVmlkZW9TdGF0ZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQuNC30LzQtdC90LXQvdC40Y8g0L/QvtC70L7QttC10L3QuNGPINC60YPRgNGB0L7RgNCwINC80YvRiNC4INC90LAgdmlkZW9cblx0ICovXG5cdHZhciBvblZpZGVvTW91c2VNb3ZlID0gZnVuY3Rpb24gb25WaWRlb01vdXNlTW92ZSgpIHtcblx0ICBFTEVNRU5UUy52aWRlb092ZXJsYXkuY2xhc3NMaXN0LmFkZChDTEFTU0VTLnNob3dPdmVybGF5QnRuKTtcblx0ICBjbGVhclRpbWVvdXQodGltZW91dFNob3dCdG4pO1xuXHQgIHRpbWVvdXRTaG93QnRuID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICBFTEVNRU5UUy52aWRlb092ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShDTEFTU0VTLnNob3dPdmVybGF5QnRuKTtcblx0ICB9LCBUSU1FT1VUX1NIT1dfT1ZFUkxBWV9CVE4pO1xuXHR9O1xuXHRcblx0Ly8g0JjQvdC40YbQuNCw0LvQuNC30LDRhtC40Y8g0L/RgNC40LvQvtC20LXQvdC40Y9cblx0Y2hvc2VUcmFja0luTGlzdCgpO1xuXHRFTEVNRU5UUy52aWRlby52b2x1bWUgPSBERUZBVUxUX1ZPTFVNRV9MRVZFTDtcblx0RUxFTUVOVFMucGxheWxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblBsYXlMaXN0Q2xpY2spO1xuXHRFTEVNRU5UUy52aWRlb092ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblZpZGVvT3ZlcmxheUNsaWNrKTtcblx0RUxFTUVOVFMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblZpZGVvQ2xpY2spO1xuXHRFTEVNRU5UUy52aWRlby5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvblZpZGVvTW91c2VNb3ZlKTtcblx0RUxFTUVOVFMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcigncGxheWluZycsIG9uVmlkZW9TdGFydFBsYXlpbmcpO1xuXHRFTEVNRU5UUy52aWRlby5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIG9uVmlkZW9FbmRlZCk7XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0XHRcInRyYWNrc1wiOiBbXG5cdFx0XHR7XG5cdFx0XHRcdFwiaWRcIjogXCIwXCIsXG5cdFx0XHRcdFwiYXJ0aXN0XCI6IFwiTG9ib2RhXCIsXG5cdFx0XHRcdFwic29uZ1wiOiBcItCi0LLQvtC4INCz0LvQsNC30LBcIixcblx0XHRcdFx0XCJwb3N0ZXJcIjogXCJMb2JvZGEveW91cl9leWVzLmpwZ1wiLFxuXHRcdFx0XHRcInNyY1wiOiBcIkxvYm9kYS95b3VyX2V5ZXNcIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0XCJpZFwiOiBcIjFcIixcblx0XHRcdFx0XCJhcnRpc3RcIjogXCJTaGFraXJhXCIsXG5cdFx0XHRcdFwic29uZ1wiOiBcIkNoYW50YWplXCIsXG5cdFx0XHRcdFwicG9zdGVyXCI6IFwiU2hha2lyYS9jaGFudGFqZS5qcGdcIixcblx0XHRcdFx0XCJzcmNcIjogXCJTaGFraXJhL2NoYW50YWplXCJcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdFwiaWRcIjogXCIyXCIsXG5cdFx0XHRcdFwiYXJ0aXN0XCI6IFwiU2hha2lyYSBmdC4gUmloYW5uYVwiLFxuXHRcdFx0XHRcInNvbmdcIjogXCJDYW4ndCBSZW1lbWJlciB0byBGb3JnZXQgWW91XCIsXG5cdFx0XHRcdFwicG9zdGVyXCI6IFwiU2hha2lyYS9jYW4ndF9yZW1lbWJlcl90b19mb3JnZXRfeW91LmpwZ1wiLFxuXHRcdFx0XHRcInNyY1wiOiBcIlNoYWtpcmEvY2FuJ3RfcmVtZW1iZXJfdG9fZm9yZ2V0X3lvdVwiXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRcImlkXCI6IFwiM1wiLFxuXHRcdFx0XHRcImFydGlzdFwiOiBcIlRoZSBIYXJka2lzc1wiLFxuXHRcdFx0XHRcInNvbmdcIjogXCJSYWluXCIsXG5cdFx0XHRcdFwicG9zdGVyXCI6IFwiVGhlX0hhcmRraXNzL3JhaW4uanBnXCIsXG5cdFx0XHRcdFwic3JjXCI6IFwiVGhlX0hhcmRraXNzL3JhaW5cIlxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0XCJpZFwiOiBcIjRcIixcblx0XHRcdFx0XCJhcnRpc3RcIjogXCJUaGUgSGFyZGtpc3NcIixcblx0XHRcdFx0XCJzb25nXCI6IFwiU3RvbmVzXCIsXG5cdFx0XHRcdFwicG9zdGVyXCI6IFwiVGhlX0hhcmRraXNzL3N0b25lcy5qcGdcIixcblx0XHRcdFx0XCJzcmNcIjogXCJUaGVfSGFyZGtpc3Mvc3RvbmVzXCJcblx0XHRcdH1cblx0XHRdXG5cdH07XG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzY3JpcHQuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA1MTNlMWU1MjgwNWY0MWU3MzQyZiIsImltcG9ydCB0cmFja3MgZnJvbSAnLi8uLi9zZXJ2ZXIvdHJhY2tzLmpzb24nO1xuXG4vKipcbiAqIERPTS3RjdC70LXQvNC10L3RgtGLLCDQuiDQutC+0YLQvtGA0YvQvCDQstGL0L/QvtC70L3Rj9C10YLRgdGPINC+0LHRgNCw0YnQtdC90LjQtVxuICogQHR5cGUge09iamVjdH1cbiAqIEBjb25zdGFudFxuICovXG5jb25zdCBFTEVNRU5UUyA9IHtcbiAgcGxheWxpc3Q6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wbGF5bGlzdCcpLFxuICB0cmFja3NMaXN0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdsaS50cmFjaycpLFxuICB2aWRlbzogZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndmlkZW8nKSxcbiAgdmlkZW9NcDQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fc3JjLS1tcDQnKSxcbiAgdmlkZW9PZ2c6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlb19fc3JjLS1vZ2cnKSxcbiAgdmlkZW9XZWJtOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW9fX3NyYy0td2VibScpLFxuICB2aWRlb092ZXJsYXk6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWRlby1vdmVybGF5JyksXG59O1xuXG4vKipcbiAqINCd0LDQt9Cy0LDQvdC40Y8g0LrQu9Cw0YHRgdC+0LIsINC60L7RgtC+0YDRi9C1INC/0YDQuNGB0LLQsNC40LLQsNGO0YLRgdGPINGN0LvQtdC80LXQvdGC0LDQvFxuICogQHR5cGUge09iamVjdH1cbiAqIEBjb25zdGFudFxuICovXG5jb25zdCBDTEFTU0VTID0ge1xuICBjdXJyZW50VHJhY2s6ICd0cmFjay0tY3VycmVudCcsXG4gIHBsYXlUcmFjazogJ3ZpZGVvLW92ZXJsYXktLXBsYXknLFxuICBwYXVzZVRyYWNrOiAndmlkZW8tb3ZlcmxheS0tcGF1c2UnLFxuICBzaG93T3ZlcmxheUJ0bjogJ3Nob3cnLFxuICBzaG93T3ZlcmxheUJ0bkFsd2F5czogJ3Nob3ctLWFsd2F5cycsXG59O1xuXG4vKipcbiAqINCd0LDQt9Cy0LDQvdC40LUg0LDRgtGA0LjQsdGD0YLQsCwg0L3QsCDQvtGB0L3QvtCy0LDQvdC40Lgg0LfQvdCw0YfQtdC90LjRjyDQutC+0YLQvtGA0L7Qs9C+INC30LDQv9GA0LDRiNC40LLQsNGO0YLRgdGPINC00LDQvdC90YvQtSDQv9C+INGC0YDQtdC60YMg0YEg0YHQtdGA0LLQtdGA0LBcbiAqIEB0eXBlIHtTdHJpbmd9XG4gKiBAY29uc3RhbnRcbiAqL1xuY29uc3QgVFJBQ0tfSURfQVRUUiA9ICdkYXRhLWlkJztcblxuLyoqXG4gKiDQmNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgCDRgtGA0LXQutCwINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGOXG4gKiBAdHlwZSB7TnVtYmVyfVxuICogQGNvbnN0YW50XG4gKi9cbmNvbnN0IERFRkFVTFRfVFJBQ0tfSUQgPSA0O1xuXG4vKipcbiAqINCj0YDQvtCy0LXQvdGMINC30LLRg9C60LAg0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNGPINCy0LjQtNC10L4g0L/QviDRg9C80L7Qu9GH0LDQvdC40Y5cbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKiBAY29uc3RhbnRcbiAqL1xuY29uc3QgREVGQVVMVF9WT0xVTUVfTEVWRUwgPSAwLjI7XG5cbi8qKlxuICog0JLRgNC10LzRjywg0YfQtdGA0LXQtyDQutC+0YLQvtGA0L7QtSDQsdGD0LTQtdGCINC30LDQv9GD0YnQtdC9INGB0LvQtdC00YPRjtGJ0LjQuSDRgtGA0LXQuiDQuNC3INC/0LvQtdC50LvQuNGB0YLQsCAo0LIg0YHQtdC60YPQvdC00LDRhSlcbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKiBAY29uc3RhbnRcbiAqL1xuY29uc3QgVElNRU9VVF9ORVhUX1RSQUNLX0FVVE9QTEFZID0gMTA7XG5cbi8qKlxuICog0JLRgNC10LzRjywg0YfQtdGA0LXQtyDQutC+0YLQvtGA0L7QtSDQutC90L7Qv9C60LAg0YPQv9GA0LDQstC70LXQvdC40Y8g0LLQuNC00LXQviDQsdGD0LTQtdGCINGB0LrRgNGL0YLQsCAo0LIg0LzQuNC70LvQuNGB0LXQutGD0L3QtNCw0YUpXG4gKiBAdHlwZSB7TnVtYmVyfVxuICogQGNvbnN0YW50XG4gKi9cbmNvbnN0IFRJTUVPVVRfU0hPV19PVkVSTEFZX0JUTiA9IDUwMDA7XG5cbi8qKlxuICog0KfQsNGB0YLQvtGC0LAg0L7QsdC90L7QstC70LXQvdC40Y8g0LLRgNC10LzQtdC90LgsINC+0YHRgtCw0LLRiNC10LPQvtGB0Y8g0LTQviDQsNCy0YLQvtC30LDQv9GD0YHQutCwINGB0LvQtdC00YPRjtGJ0LXQs9C+INGC0YDQtdC60LAgKNCyINC80LjQu9C70LjRgdC10LrRg9C90LTQsNGFKVxuICogQHR5cGUge051bWJlcn1cbiAqIEBjb25zdGFudFxuICovXG5jb25zdCBJTlRFUlZBTF9VUERBVEVfVElNRV9UT19TVEFSVF9ORVhUX1RSQUNLID0gMTAwMDtcblxuLyoqXG4gKiBJRCDRgtC10LrRg9GJ0LXQs9C+INGC0YDQtdC60LBcbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKi9cbmxldCBjdXJyZW50VHJhY2tJZCA9IERFRkFVTFRfVFJBQ0tfSUQ7XG5cbi8qKlxuICog0KHRh9C10YLRh9C40Log0L7RgdGC0LDQstGI0LXQs9C+0YHRjyDQstGA0LXQvNC10L3QuCDQtNC+INCw0LLRgtC+0LfQsNC/0YPRgdC60LAg0YHQu9C10LTRg9GO0YnQtdCz0L4g0YLRgNC10LrQsFxuICogQHR5cGUge051bWJlcn1cbiAqL1xubGV0IHRpbWVUb1N0YXJ0TmV4dFRyYWNrID0gVElNRU9VVF9ORVhUX1RSQUNLX0FVVE9QTEFZO1xuXG4vKipcbiAqINCY0LTQtdC90YLQuNGE0LjQutCw0YLQvtGAINGC0LDQudC80LDRg9GC0LAg0YHQutGA0YvRgtC40Y8g0LrQvdC+0L/QutC4INGD0L/RgNCw0LLQu9C10L3QuNGPINCy0LjQtNC10L4sINGA0LDRgdC/0L7Qu9C+0LbQtdC90L3QvtC5INC90LAg0LLQuNC00LXQvlxuICog0JjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINC00LvRjyDQvtGH0LjRgdGC0LrQuCDRgdC+0L7RgtCy0LXRgtGB0YLQstGD0Y7RidC10LPQviDRgtCw0LnQvNCw0YPRgtCwXG4gKiBAdHlwZSB7TnVtYmVyfVxuICovXG5sZXQgdGltZW91dFNob3dCdG47XG5cbi8qKlxuICog0JjQtNC10L3RgtC40YTQuNC60LDRgtC+0YAg0YLQsNC50LzQsNGD0YLQsCDQsNCy0YLQvtC30LDQv9GD0YHQutCwINGB0LvQtdC00YPRjtGJ0LXQs9C+INGC0YDQtdC60LBcbiAqINCY0YHQv9C+0LvRjNC30YPQtdGC0YHRjyDQtNC70Y8g0L7Rh9C40YHRgtC60Lgg0YHQvtC+0YLQstC10YLRgdGC0LLRg9GO0YnQtdCz0L4g0YLQsNC50LzQsNGD0YLQsFxuICogQHR5cGUge051bWJlcn1cbiAqL1xubGV0IHRpbWVvdXROZXh0VHJhY2tBdXRvcGxheTtcblxuLyoqXG4gKiDQktGL0LHQvtGAINGC0YDQtdC60LAg0LIg0L/Qu9C10LnQu9C40YHRgtC1XG4gKi9cbmNvbnN0IGNob3NlVHJhY2tJbkxpc3QgPSAoKSA9PiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgRUxFTUVOVFMudHJhY2tzTGlzdC5sZW5ndGg7IGkrKykge1xuICAgIEVMRU1FTlRTLnRyYWNrc0xpc3RbaV0uY2xhc3NMaXN0LnJlbW92ZShDTEFTU0VTLmN1cnJlbnRUcmFjayk7XG4gIH1cbiAgRUxFTUVOVFMucGxheWxpc3QuY2hpbGRyZW5bY3VycmVudFRyYWNrSWRdLmNsYXNzTGlzdC5hZGQoQ0xBU1NFUy5jdXJyZW50VHJhY2spO1xuICBzZXRUcmFja0RhdGFJblZpZGVvKCk7XG59O1xuXG4vKipcbiAqINCX0LDQs9GA0YPQt9C60LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0YLRgNC10LrQtSDQsiDRgtC10LMgdmlkZW9cbiAqL1xuY29uc3Qgc2V0VHJhY2tEYXRhSW5WaWRlbyA9ICgpID0+IHtcbiAgY29uc3QgdHJhY2tJbmZvID0gdHJhY2tzLnRyYWNrc1tjdXJyZW50VHJhY2tJZF07XG4gIEVMRU1FTlRTLnZpZGVvLnBvc3RlciA9IGBzZXJ2ZXIvJHt0cmFja0luZm8ucG9zdGVyfWA7XG5cbiAgY29uc3QgcGF0aCA9IGBzZXJ2ZXIvJHt0cmFja0luZm8uc3JjfWA7XG4gIEVMRU1FTlRTLnZpZGVvTXA0LnNyYyA9IGAke3BhdGh9Lm1wNGA7XG4gIEVMRU1FTlRTLnZpZGVvT2dnLnNyYyA9IGAke3BhdGh9Lm9nZ2A7XG4gIEVMRU1FTlRTLnZpZGVvV2VibS5zcmMgPSBgJHtwYXRofS53ZWJtYDtcbiAgRUxFTUVOVFMudmlkZW8ubG9hZCgpO1xufTtcblxuLyoqXG4gKiDQmNC30LzQtdC90LXQvdC40LUg0LrQvdC+0L/QutC4LCDQvtGC0L7QsdGA0LDQttCw0LXQvNC+0Lkg0L3QsCDQstC40LTQtdC+XG4gKiBAcGFyYW0gIHtTdHJpbmd9IGJ0blR5cGUg0KLQuNC/INC60L3QvtC/0LrQuFxuICovXG5jb25zdCBzZXRPdmVybGF5QnRuID0gKGJ0blR5cGUpID0+IHtcbiAgaWYgKGJ0blR5cGUgPT09ICdwYXVzZScpIHtcbiAgICBFTEVNRU5UUy52aWRlb092ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShDTEFTU0VTLnBsYXlUcmFjayk7XG4gICAgRUxFTUVOVFMudmlkZW9PdmVybGF5LmNsYXNzTGlzdC5hZGQoQ0xBU1NFUy5wYXVzZVRyYWNrKTtcbiAgfSBlbHNlIHtcbiAgICBFTEVNRU5UUy52aWRlb092ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShDTEFTU0VTLnBhdXNlVHJhY2spO1xuICAgIEVMRU1FTlRTLnZpZGVvT3ZlcmxheS5jbGFzc0xpc3QuYWRkKENMQVNTRVMucGxheVRyYWNrKTtcbiAgfVxufTtcblxuLyoqXG4gKiDQl9Cw0L/Rg9GB0Log0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNGPINCy0LjQtNC10L5cbiAqL1xuY29uc3QgcGxheVZpZGVvID0gKCkgPT4ge1xuICBFTEVNRU5UUy52aWRlby5wbGF5KCk7XG4gIHNldE92ZXJsYXlCdG4oJ3BhdXNlJyk7XG59O1xuXG4vKipcbiAqINCf0YDQuNC+0YHRgtCw0L3QvtCy0LrQsCDQstC40LTQtdC+ICjQv9Cw0YPQt9CwKVxuICovXG5jb25zdCBwYXVzZVZpZGVvID0gKCkgPT4ge1xuICBFTEVNRU5UUy52aWRlby5wYXVzZSgpO1xuICBzZXRPdmVybGF5QnRuKCdwbGF5Jyk7XG59O1xuXG4vKipcbiAqINCj0L/RgNCw0LLQu9C10L3QuNC1INCy0L7RgdC/0YDQvtC40LfQstC10LTQtdC90LjQtdC8INCy0LjQtNC10L5cbiAqL1xuY29uc3QgY2hhbmdlVmlkZW9TdGF0ZSA9ICgpID0+IHtcbiAgaWYgKEVMRU1FTlRTLnZpZGVvLnBhdXNlZCkge1xuICAgIHBsYXlWaWRlbygpO1xuICB9IGVsc2Uge1xuICAgIHBhdXNlVmlkZW8oKTtcbiAgfVxufTtcblxuLyoqXG4gKiDQntGC0YDQuNGB0L7QstC60LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0YHQu9C10LTRg9GO0YnQtdC8INGC0YDQtdC60LVcbiAqIEBwYXJhbSAge051bWJlcn0gdHJhY2tJZCDQmNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgCDRgtGA0LXQutCwXG4gKi9cbmNvbnN0IHNob3dJbmZvQWJvdXROZXh0VHJhY2sgPSAodHJhY2tJZCkgPT4ge1xuICBjb25zdCB0cmFja0luZm8gPSB0cmFja3MudHJhY2tzW3RyYWNrSWRdO1xuXG4gIGNvbnN0IHNvbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gIHNvbmcuY2xhc3NOYW1lID0gJ3ZpZGVvLW92ZXJsYXlfX3RleHQgdmlkZW8tb3ZlcmxheV9fdGV4dC0tbmV4dC1zb25nJztcbiAgc29uZy5pbm5lclRleHQgPSB0cmFja0luZm8uc29uZztcbiAgRUxFTUVOVFMudmlkZW9PdmVybGF5LmFwcGVuZENoaWxkKHNvbmcpO1xuXG4gIGNvbnN0IGFydGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgYXJ0aXN0LmlubmVyVGV4dCA9IHRyYWNrSW5mby5hcnRpc3Q7XG4gIHNvbmcuYXBwZW5kQ2hpbGQoYXJ0aXN0KTtcblxuICBjb25zdCB0aW1lb3V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICB0aW1lb3V0LmNsYXNzTmFtZSA9ICd2aWRlby1vdmVybGF5X190ZXh0IHZpZGVvLW92ZXJsYXlfX3RleHQtLXRpbWVvdXQnO1xuICB0aW1lb3V0LmlubmVyVGV4dCA9ICdOZXh0IHRyYWNrJztcbiAgRUxFTUVOVFMudmlkZW9PdmVybGF5LmFwcGVuZENoaWxkKHRpbWVvdXQpO1xuXG4gIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIHRpbWVvdXQuYXBwZW5kQ2hpbGQodGltZSk7XG59O1xuXG4vKipcbiAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINCy0YvQsdC+0YDQsCDQvdC+0LLQvtCz0L4g0YLRgNC10LrQsFxuICogQHBhcmFtICB7T2JqZWN0fSBldmVudFxuICovXG5jb25zdCBvblBsYXlMaXN0Q2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RyYWNrJykpIHtcbiAgICBjdXJyZW50VHJhY2tJZCA9IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoVFJBQ0tfSURfQVRUUikgfHwgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFRSQUNLX0lEX0FUVFIpO1xuICAgIGNob3NlVHJhY2tJbkxpc3QoKTtcbiAgfVxufTtcblxuLyoqXG4gKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQt9Cw0L/Rg9GB0LrQsCDQstC+0YHQv9GA0L7QuNC30LLQtdC00LXQvdC40Y8g0LLQuNC00LXQvlxuICovXG5jb25zdCBvblZpZGVvU3RhcnRQbGF5aW5nID0gKCkgPT4ge1xuICBjb25zdCB0ZXh0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy52aWRlby1vdmVybGF5X190ZXh0Jyk7XG4gIGlmICh0ZXh0TGlzdC5sZW5ndGggPiAwKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZXh0TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgRUxFTUVOVFMudmlkZW9PdmVybGF5LnJlbW92ZUNoaWxkKHRleHRMaXN0W2ldKTtcbiAgICB9XG4gIH1cbiAgc2V0T3ZlcmxheUJ0bigncGF1c2UnKTtcbiAgRUxFTUVOVFMudmlkZW9PdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoQ0xBU1NFUy5zaG93T3ZlcmxheUJ0bkFsd2F5cyk7XG4gIEVMRU1FTlRTLnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25WaWRlb0NsaWNrKTtcbn07XG5cbi8qKlxuICog0J7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8g0LfQsNCy0LXRgNGI0LXQvdC40Y8g0L/RgNC+0LjQs9GA0YvQstCw0L3QuNGPINCy0LjQtNC10L5cbiAqL1xuY29uc3Qgb25WaWRlb0VuZGVkID0gKCkgPT4ge1xuICBjb25zdCBuZXh0VHJhY2tJZCA9ICgoK2N1cnJlbnRUcmFja0lkICsgMSkgPCBFTEVNRU5UUy50cmFja3NMaXN0Lmxlbmd0aCkgPyAoK2N1cnJlbnRUcmFja0lkICsgMSkgOiAwO1xuICBjdXJyZW50VHJhY2tJZCA9IG5leHRUcmFja0lkO1xuICBzZXRPdmVybGF5QnRuKCdwbGF5Jyk7XG4gIHNob3dJbmZvQWJvdXROZXh0VHJhY2sobmV4dFRyYWNrSWQpO1xuICBFTEVNRU5UUy52aWRlb092ZXJsYXkuY2xhc3NMaXN0LmFkZChDTEFTU0VTLnNob3dPdmVybGF5QnRuQWx3YXlzKTtcbiAgRUxFTUVOVFMudmlkZW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblZpZGVvQ2xpY2spO1xuXG4gIHRpbWVvdXROZXh0VHJhY2tBdXRvcGxheSA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBpZiAodGltZVRvU3RhcnROZXh0VHJhY2sgPiAwKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmlkZW8tb3ZlcmxheV9fdGV4dC0tdGltZW91dCBzcGFuJykuaW5uZXJUZXh0ID0gYCAoJHt0aW1lVG9TdGFydE5leHRUcmFja30g0YHQtdC6KWA7XG4gICAgICB0aW1lVG9TdGFydE5leHRUcmFjayAtPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBjbGVhckludGVydmFsKHRpbWVvdXROZXh0VHJhY2tBdXRvcGxheSk7XG4gICAgICB0aW1lVG9TdGFydE5leHRUcmFjayA9IFRJTUVPVVRfTkVYVF9UUkFDS19BVVRPUExBWTtcbiAgICAgIGNob3NlVHJhY2tJbkxpc3QoKTtcbiAgICB9XG4gIH0sIElOVEVSVkFMX1VQREFURV9USU1FX1RPX1NUQVJUX05FWFRfVFJBQ0spO1xufTtcblxuLyoqXG4gKiDQntCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQvdCw0LbQsNGC0LjRjyDQvdCwINCy0LjQtNC10L5cbiAqL1xuY29uc3Qgb25WaWRlb0NsaWNrID0gKCkgPT4ge1xuICBjaGFuZ2VWaWRlb1N0YXRlKCk7XG59O1xuXG4vKipcbiAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC90LDQttCw0YLQuNGPINC90LAg0LrQvdC+0L/QutGDLCDRgNCw0LfQvNC10YnQtdC90L3Rg9GOINC90LAg0LLQuNC00LXQvlxuICovXG5jb25zdCBvblZpZGVvT3ZlcmxheUNsaWNrID0gKCkgPT4ge1xuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvLW92ZXJsYXlfX3RleHQnKSkge1xuICAgIGNsZWFySW50ZXJ2YWwodGltZW91dE5leHRUcmFja0F1dG9wbGF5KTtcbiAgICBjaG9zZVRyYWNrSW5MaXN0KCk7XG4gIH0gZWxzZSB7XG4gICAgY2hhbmdlVmlkZW9TdGF0ZSgpO1xuICB9XG59O1xuXG4vKipcbiAqINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC40LfQvNC10L3QtdC90LjRjyDQv9C+0LvQvtC20LXQvdC40Y8g0LrRg9GA0YHQvtGA0LAg0LzRi9GI0Lgg0L3QsCB2aWRlb1xuICovXG5jb25zdCBvblZpZGVvTW91c2VNb3ZlID0gKCkgPT4ge1xuICBFTEVNRU5UUy52aWRlb092ZXJsYXkuY2xhc3NMaXN0LmFkZChDTEFTU0VTLnNob3dPdmVybGF5QnRuKTtcbiAgY2xlYXJUaW1lb3V0KHRpbWVvdXRTaG93QnRuKTtcbiAgdGltZW91dFNob3dCdG4gPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBFTEVNRU5UUy52aWRlb092ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShDTEFTU0VTLnNob3dPdmVybGF5QnRuKTtcbiAgfSwgVElNRU9VVF9TSE9XX09WRVJMQVlfQlROKTtcbn07XG5cbi8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC/0YDQuNC70L7QttC10L3QuNGPXG5jaG9zZVRyYWNrSW5MaXN0KCk7XG5FTEVNRU5UUy52aWRlby52b2x1bWUgPSBERUZBVUxUX1ZPTFVNRV9MRVZFTDtcbkVMRU1FTlRTLnBsYXlsaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25QbGF5TGlzdENsaWNrKTtcbkVMRU1FTlRTLnZpZGVvT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uVmlkZW9PdmVybGF5Q2xpY2spO1xuRUxFTUVOVFMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblZpZGVvQ2xpY2spO1xuRUxFTUVOVFMudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25WaWRlb01vdXNlTW92ZSk7XG5FTEVNRU5UUy52aWRlby5hZGRFdmVudExpc3RlbmVyKCdwbGF5aW5nJywgb25WaWRlb1N0YXJ0UGxheWluZyk7XG5FTEVNRU5UUy52aWRlby5hZGRFdmVudExpc3RlbmVyKCdlbmRlZCcsIG9uVmlkZW9FbmRlZCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc2NyaXB0LmpzIiwibW9kdWxlLmV4cG9ydHMgPSB7XG5cdFwidHJhY2tzXCI6IFtcblx0XHR7XG5cdFx0XHRcImlkXCI6IFwiMFwiLFxuXHRcdFx0XCJhcnRpc3RcIjogXCJMb2JvZGFcIixcblx0XHRcdFwic29uZ1wiOiBcItCi0LLQvtC4INCz0LvQsNC30LBcIixcblx0XHRcdFwicG9zdGVyXCI6IFwiTG9ib2RhL3lvdXJfZXllcy5qcGdcIixcblx0XHRcdFwic3JjXCI6IFwiTG9ib2RhL3lvdXJfZXllc1wiXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRcImlkXCI6IFwiMVwiLFxuXHRcdFx0XCJhcnRpc3RcIjogXCJTaGFraXJhXCIsXG5cdFx0XHRcInNvbmdcIjogXCJDaGFudGFqZVwiLFxuXHRcdFx0XCJwb3N0ZXJcIjogXCJTaGFraXJhL2NoYW50YWplLmpwZ1wiLFxuXHRcdFx0XCJzcmNcIjogXCJTaGFraXJhL2NoYW50YWplXCJcblx0XHR9LFxuXHRcdHtcblx0XHRcdFwiaWRcIjogXCIyXCIsXG5cdFx0XHRcImFydGlzdFwiOiBcIlNoYWtpcmEgZnQuIFJpaGFubmFcIixcblx0XHRcdFwic29uZ1wiOiBcIkNhbid0IFJlbWVtYmVyIHRvIEZvcmdldCBZb3VcIixcblx0XHRcdFwicG9zdGVyXCI6IFwiU2hha2lyYS9jYW4ndF9yZW1lbWJlcl90b19mb3JnZXRfeW91LmpwZ1wiLFxuXHRcdFx0XCJzcmNcIjogXCJTaGFraXJhL2Nhbid0X3JlbWVtYmVyX3RvX2ZvcmdldF95b3VcIlxuXHRcdH0sXG5cdFx0e1xuXHRcdFx0XCJpZFwiOiBcIjNcIixcblx0XHRcdFwiYXJ0aXN0XCI6IFwiVGhlIEhhcmRraXNzXCIsXG5cdFx0XHRcInNvbmdcIjogXCJSYWluXCIsXG5cdFx0XHRcInBvc3RlclwiOiBcIlRoZV9IYXJka2lzcy9yYWluLmpwZ1wiLFxuXHRcdFx0XCJzcmNcIjogXCJUaGVfSGFyZGtpc3MvcmFpblwiXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRcImlkXCI6IFwiNFwiLFxuXHRcdFx0XCJhcnRpc3RcIjogXCJUaGUgSGFyZGtpc3NcIixcblx0XHRcdFwic29uZ1wiOiBcIlN0b25lc1wiLFxuXHRcdFx0XCJwb3N0ZXJcIjogXCJUaGVfSGFyZGtpc3Mvc3RvbmVzLmpwZ1wiLFxuXHRcdFx0XCJzcmNcIjogXCJUaGVfSGFyZGtpc3Mvc3RvbmVzXCJcblx0XHR9XG5cdF1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zZXJ2ZXIvdHJhY2tzLmpzb25cbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==